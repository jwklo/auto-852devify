(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[274],{6432:function(e,t,n){"use strict";n.d(t,{d7:function(){return q},Qr:function(){return detectFaces_detectAllFaces},ii:function(){return h},qB:function(){return eu}});var i,o,a,s,c,u,l,f,d,h={};n.r(h),n.d(h,{AnchorPosition:function(){return l},DrawBox:function(){return B},DrawBoxOptions:function(){return DrawBoxOptions},DrawFaceLandmarks:function(){return j},DrawFaceLandmarksOptions:function(){return DrawFaceLandmarksOptions},DrawTextField:function(){return C},DrawTextFieldOptions:function(){return DrawTextFieldOptions},drawContour:function(){return drawContour},drawDetections:function(){return drawDetections},drawFaceExpressions:function(){return drawFaceExpressions},drawFaceLandmarks:function(){return drawFaceLandmarks}});var p=n(4277);function drawContour(e,t,n){if(void 0===n&&(n=!1),e.beginPath(),t.slice(1).forEach(function(n,i){var o=n.x,a=n.y,s=t[i];e.moveTo(s.x,s.y),e.lineTo(o,a)}),n){var i=t[t.length-1],o=t[0];if(!i||!o)return;e.moveTo(i.x,i.y),e.lineTo(o.x,o.y)}e.stroke()}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function __extends(e,t){function __(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function tslib_es6_awaiter(e,t,n,i){return new(n||(n=Promise))(function(o,a){function fulfilled(e){try{step(i.next(e))}catch(e){a(e)}}function rejected(e){try{step(i.throw(e))}catch(e){a(e)}}function step(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())})}function tslib_es6_generator(e,t){var n,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function verb(a){return function(c){return function(a){if(n)throw TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function __spreadArrays(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var a=arguments[t],s=0,c=a.length;s<c;s++,o++)i[o]=a[s];return i}var m=function(){function Dimensions(e,t){if(!isValidNumber(e)||!isValidNumber(t))throw Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:t}));this._width=e,this._height=t}return Object.defineProperty(Dimensions.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(Dimensions.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Dimensions.prototype.reverse=function(){return new Dimensions(1/this.width,1/this.height)},Dimensions}();function isTensor(e,t){return e instanceof p.esB&&e.shape.length===t}function isTensor4D(e){return isTensor(e,4)}function round(e,t){void 0===t&&(t=2);var n=Math.pow(10,t);return Math.floor(e*n)/n}function isDimensions(e){return e&&e.width&&e.height}function getCenterPoint(e){return e.reduce(function(e,t){return e.add(t)},new g(0,0)).div(new g(e.length,e.length))}function range(e,t,n){return Array(e).fill(0).map(function(e,i){return t+i*n})}function isValidNumber(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||0===e}function utils_isValidProbablitiy(e){return isValidNumber(e)&&0<=e&&e<=1}var g=function(){function Point(e,t){this._x=e,this._y=t}return Object.defineProperty(Point.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(Point.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Point.prototype.add=function(e){return new Point(this.x+e.x,this.y+e.y)},Point.prototype.sub=function(e){return new Point(this.x-e.x,this.y-e.y)},Point.prototype.mul=function(e){return new Point(this.x*e.x,this.y*e.y)},Point.prototype.div=function(e){return new Point(this.x/e.x,this.y/e.y)},Point.prototype.abs=function(){return new Point(Math.abs(this.x),Math.abs(this.y))},Point.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},Point.prototype.floor=function(){return new Point(Math.floor(this.x),Math.floor(this.y))},Point}(),v=function(){function Box(e,t){void 0===t&&(t=!0);var n=e||{},i=[n.left,n.top,n.right,n.bottom].every(isValidNumber),o=[n.x,n.y,n.width,n.height].every(isValidNumber);if(!o&&!i)throw Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(n));var a=o?[n.x,n.y,n.width,n.height]:[n.left,n.top,n.right-n.left,n.bottom-n.top],s=a[0],c=a[1],u=a[2],l=a[3];Box.assertIsValidBox({x:s,y:c,width:u,height:l},"Box.constructor",t),this._x=s,this._y=c,this._width=u,this._height=l}return Box.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(isValidNumber)},Box.assertIsValidBox=function(e,t,n){if(void 0===n&&(n=!1),!Box.isRect(e))throw Error(t+" - invalid box: "+JSON.stringify(e)+", expected object with properties x, y, width, height");if(!n&&(e.width<0||e.height<0))throw Error(t+" - width ("+e.width+") and height ("+e.height+") must be positive numbers")},Object.defineProperty(Box.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(Box.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(Box.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(Box.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(Box.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(Box.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(Box.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(Box.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(Box.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(Box.prototype,"topLeft",{get:function(){return new g(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(Box.prototype,"topRight",{get:function(){return new g(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(Box.prototype,"bottomLeft",{get:function(){return new g(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(Box.prototype,"bottomRight",{get:function(){return new g(this.right,this.bottom)},enumerable:!0,configurable:!0}),Box.prototype.round=function(){var e=[this.x,this.y,this.width,this.height].map(function(e){return Math.round(e)}),t=e[0],n=e[1],i=e[2],o=e[3];return new Box({x:t,y:n,width:i,height:o})},Box.prototype.floor=function(){var e=[this.x,this.y,this.width,this.height].map(function(e){return Math.floor(e)}),t=e[0],n=e[1],i=e[2],o=e[3];return new Box({x:t,y:n,width:i,height:o})},Box.prototype.toSquare=function(){var e=this.x,t=this.y,n=this.width,i=this.height,o=Math.abs(n-i);return n<i&&(e-=o/2,n+=o),i<n&&(t-=o/2,i+=o),new Box({x:e,y:t,width:n,height:i})},Box.prototype.rescale=function(e){var t=isDimensions(e)?e.width:e,n=isDimensions(e)?e.height:e;return new Box({x:this.x*t,y:this.y*n,width:this.width*t,height:this.height*n})},Box.prototype.pad=function(e,t){var n=[this.x-e/2,this.y-t/2,this.width+e,this.height+t],i=n[0],o=n[1],a=n[2],s=n[3];return new Box({x:i,y:o,width:a,height:s})},Box.prototype.clipAtImageBorders=function(e,t){var n=this.x,i=this.y,o=this.right,a=this.bottom,s=Math.max(n,0),c=Math.max(i,0);return new Box({x:s,y:c,width:Math.min(o-s,e-s),height:Math.min(a-c,t-c)}).floor()},Box.prototype.shift=function(e,t){var n=this.width,i=this.height,o=this.x+e,a=this.y+t;return new Box({x:o,y:a,width:n,height:i})},Box.prototype.padAtBorders=function(e,t){var n=this.width+1,i=this.height+1,o=n,a=i,s=this.left,c=this.top,u=this.right,l=this.bottom;return u>t&&(o=-u+t+n,u=t),l>e&&(a=-l+e+i,l=e),s<1&&(a=2-s,s=1),c<1&&(a=2-c,c=1),{dy:1,edy:a,dx:1,edx:o,y:c,ey:l,x:s,ex:u,w:n,h:i}},Box.prototype.calibrate=function(e){return new Box({left:this.left+e.left*this.width,top:this.top+e.top*this.height,right:this.right+e.right*this.width,bottom:this.bottom+e.bottom*this.height}).toSquare().round()},Box}(),b=function(e){function BoundingBox(t,n,i,o,a){return void 0===a&&(a=!1),e.call(this,{left:t,top:n,right:i,bottom:o},a)||this}return __extends(BoundingBox,e),BoundingBox}(v),y=function(){function ObjectDetection(e,t,n,i,o){this._imageDims=new m(o.width,o.height),this._score=e,this._classScore=t,this._className=n,this._box=new v(i).rescale(this._imageDims)}return Object.defineProperty(ObjectDetection.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectDetection.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectDetection.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectDetection.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectDetection.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectDetection.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectDetection.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(ObjectDetection.prototype,"relativeBox",{get:function(){return new v(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),ObjectDetection.prototype.forSize=function(e,t){return new ObjectDetection(this.score,this.classScore,this.className,this.relativeBox,{width:e,height:t})},ObjectDetection}(),_=function(e){function FaceDetection(t,n,i){return e.call(this,t,t,"",n,i)||this}return __extends(FaceDetection,e),FaceDetection.prototype.forSize=function(t,n){var i=e.prototype.forSize.call(this,t,n),o=i.score,a=i.relativeBox,s=i.imageDims;return new FaceDetection(o,a,s)},FaceDetection}(y);function nonMaxSuppression(e,t,n,i){void 0===i&&(i=!0);for(var o=t.map(function(e,t){return{score:e,boxIndex:t}}).sort(function(e,t){return e.score-t.score}).map(function(e){return e.boxIndex}),a=[];o.length>0;)!function(){var t=o.pop();a.push(t);for(var s=o,c=[],u=0;u<s.length;u++){var l=s[u],f=e[t],d=e[l];c.push(function(e,t,n){void 0===n&&(n=!0);var i=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left))*Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top));return n?i/(e.area+t.area-i):i/Math.min(e.area,t.area)}(f,d,i))}o=o.filter(function(e,t){return c[t]<=n})}();return a}function normalize(e,t){return p.lub(function(){var n=t[0],i=t[1],o=t[2],a=p.hlL(__spreadArrays(e.shape.slice(0,3),[1]),n),s=p.hlL(__spreadArrays(e.shape.slice(0,3),[1]),i),c=p.hlL(__spreadArrays(e.shape.slice(0,3),[1]),o),u=p.zoF([a,s,c],3);return p.luU(e,u)})}function sigmoid(e){return 1/(1+Math.exp(-e))}var w=function(e){function Rect(t,n,i,o,a){return void 0===a&&(a=!1),e.call(this,{x:t,y:n,width:i,height:o},a)||this}return __extends(Rect,e),Rect}(v),x=function(){function FaceLandmarks(e,t,n){void 0===n&&(n=new g(0,0));var i=t.width,o=t.height;this._imgDims=new m(i,o),this._shift=n,this._positions=e.map(function(e){return e.mul(new g(i,o)).add(n)})}return Object.defineProperty(FaceLandmarks.prototype,"shift",{get:function(){return new g(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(FaceLandmarks.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(FaceLandmarks.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(FaceLandmarks.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(FaceLandmarks.prototype,"relativePositions",{get:function(){var e=this;return this._positions.map(function(t){return t.sub(e._shift).div(new g(e.imageWidth,e.imageHeight))})},enumerable:!0,configurable:!0}),FaceLandmarks.prototype.forSize=function(e,t){return new this.constructor(this.relativePositions,{width:e,height:t})},FaceLandmarks.prototype.shiftBy=function(e,t){return new this.constructor(this.relativePositions,this._imgDims,new g(e,t))},FaceLandmarks.prototype.shiftByPoint=function(e){return this.shiftBy(e.x,e.y)},FaceLandmarks.prototype.align=function(e,t){if(void 0===t&&(t={}),e){var n=e instanceof _?e.box.floor():new v(e);return this.shiftBy(n.x,n.y).align(null,t)}var i=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},t),o=i.useDlibAlignment,a=i.minBoxPadding;return o?this.alignDlib():this.alignMinBbox(a)},FaceLandmarks.prototype.alignDlib=function(){var e=this.getRefPointsForAlignment(),t=e[0],n=e[1],i=e[2],distToMouth=function(e){return i.sub(e).magnitude()},o=Math.floor((distToMouth(t)+distToMouth(n))/2/.45),a=getCenterPoint(e),s=Math.floor(Math.max(0,a.x-.5*o)),c=Math.floor(Math.max(0,a.y-.43*o));return new w(s,c,Math.min(o,this.imageWidth+s),Math.min(o,this.imageHeight+c))},FaceLandmarks.prototype.alignMinBbox=function(e){var t,n,i,o,a,s,c,u=(n=(t=this.positions).map(function(e){return e.x}),i=t.map(function(e){return e.y}),o=n.reduce(function(e,t){return t<e?t:e},1/0),a=i.reduce(function(e,t){return t<e?t:e},1/0),s=n.reduce(function(e,t){return e<t?t:e},0),c=i.reduce(function(e,t){return e<t?t:e},0),new b(o,a,s,c));return u.pad(u.width*e,u.height*e)},FaceLandmarks.prototype.getRefPointsForAlignment=function(){throw Error("getRefPointsForAlignment not implemented by base class")},FaceLandmarks}(),F=function(e){function FaceLandmarks5(){return null!==e&&e.apply(this,arguments)||this}return __extends(FaceLandmarks5,e),FaceLandmarks5.prototype.getRefPointsForAlignment=function(){var e=this.positions;return[e[0],e[1],getCenterPoint([e[3],e[4]])]},FaceLandmarks5}(x),P=function(e){function FaceLandmarks68(){return null!==e&&e.apply(this,arguments)||this}return __extends(FaceLandmarks68,e),FaceLandmarks68.prototype.getJawOutline=function(){return this.positions.slice(0,17)},FaceLandmarks68.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},FaceLandmarks68.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},FaceLandmarks68.prototype.getNose=function(){return this.positions.slice(27,36)},FaceLandmarks68.prototype.getLeftEye=function(){return this.positions.slice(36,42)},FaceLandmarks68.prototype.getRightEye=function(){return this.positions.slice(42,48)},FaceLandmarks68.prototype.getMouth=function(){return this.positions.slice(48,68)},FaceLandmarks68.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(getCenterPoint)},FaceLandmarks68}(x),A=function(){function FaceMatch(e,t){this._label=e,this._distance=t}return Object.defineProperty(FaceMatch.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(FaceMatch.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),FaceMatch.prototype.toString=function(e){return void 0===e&&(e=!0),""+this.label+(e?" ("+round(this.distance)+")":"")},FaceMatch}(),T=function(e){function LabeledBox(t,n){var i=e.call(this,t)||this;return i._label=n,i}return __extends(LabeledBox,e),LabeledBox.assertIsValidLabeledBox=function(e,t){if(v.assertIsValidBox(e,t),!isValidNumber(e.label))throw Error(t+" - expected property label ("+e.label+") to be a number")},Object.defineProperty(LabeledBox.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),LabeledBox}(v),k=function(){function LabeledFaceDescriptors(e,t){if("string"!=typeof e)throw Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(t)||t.some(function(e){return!(e instanceof Float32Array)}))throw Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=t}return Object.defineProperty(LabeledFaceDescriptors.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(LabeledFaceDescriptors.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),LabeledFaceDescriptors.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(e){return Array.from(e)})}},LabeledFaceDescriptors.fromJSON=function(e){var t=e.descriptors.map(function(e){return new Float32Array(e)});return new LabeledFaceDescriptors(e.label,t)},LabeledFaceDescriptors}();function WithFaceDetection_isWithFaceDetection(e){return e.detection instanceof _}function WithFaceDetection_extendWithFaceDetection(e,t){return Object.assign({},e,{detection:t})}function createBrowserEnv(){var e=window.fetch||function(){throw Error("fetch - missing fetch implementation for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D:CanvasRenderingContext2D,Image:HTMLImageElement,ImageData:ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:function(){throw Error("readFile - filesystem not available for browser environment")}}}function createFileSystem(e){var t="";if(!e)try{e=n(8730)}catch(e){t=e.toString()}return{readFile:e?function(t){return new Promise(function(n,i){e.readFile(t,function(e,t){return e?i(e):n(t)})})}:function(){throw Error("readFile - failed to require fs in nodejs environment with error: "+t)}}}function createNodejsEnv(){var e=n.g.Canvas||n.g.HTMLCanvasElement,t=n.g.Image||n.g.HTMLImageElement,i=n.g.fetch||function(){throw Error("fetch - missing fetch implementation for nodejs environment")},o=createFileSystem();return __assign({Canvas:e||function(){},CanvasRenderingContext2D:n.g.CanvasRenderingContext2D||function(){},Image:t||function(){},ImageData:n.g.ImageData||function(){},Video:n.g.HTMLVideoElement||function(){},createCanvasElement:function(){if(e)return new e;throw Error("createCanvasElement - missing Canvas implementation for nodejs environment")},createImageElement:function(){if(t)return new t;throw Error("createImageElement - missing Image implementation for nodejs environment")},fetch:i},o)}function isBrowser(){return"object"==typeof window&&"undefined"!=typeof document&&"undefined"!=typeof HTMLImageElement&&"undefined"!=typeof HTMLCanvasElement&&"undefined"!=typeof HTMLVideoElement&&"undefined"!=typeof ImageData&&"undefined"!=typeof CanvasRenderingContext2D}!function(e){function PredictedBox(t,n,i,o){var a=e.call(this,t,n)||this;return a._score=i,a._classScore=o,a}__extends(PredictedBox,e),PredictedBox.assertIsValidPredictedBox=function(e,t){if(T.assertIsValidLabeledBox(e,t),!utils_isValidProbablitiy(e.score)||!utils_isValidProbablitiy(e.classScore))throw Error(t+" - expected properties score ("+e.score+") and ("+e.classScore+") to be a number between [0, 1]")},Object.defineProperty(PredictedBox.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(PredictedBox.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0})}(T);var E=n(2601);function isNodejs(){return"object"==typeof n.g&&void 0!==E&&!!E.version}function initialize(){isBrowser()&&(u=createBrowserEnv()),isNodejs()&&(u=createNodejsEnv())}var S={getEnv:function(){if(!u)throw Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return u},setEnv:function(e){u=e},initialize:initialize,createBrowserEnv:createBrowserEnv,createFileSystem:createFileSystem,createNodejsEnv:createNodejsEnv,monkeyPatch:function(e){if(u||initialize(),!u)throw Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var t=e.Canvas,n=void 0===t?u.Canvas:t,i=e.Image,o=void 0===i?u.Image:i;u.Canvas=n,u.Image=o,u.createCanvasElement=e.createCanvasElement||function(){return new n},u.createImageElement=e.createImageElement||function(){return new o},u.ImageData=e.ImageData||u.ImageData,u.Video=e.Video||u.Video,u.fetch=e.fetch||u.fetch,u.readFile=e.readFile||u.readFile},isBrowser:isBrowser,isNodejs:isNodejs};function resolveInput(e){return S.isNodejs()||"string"!=typeof e?e:document.getElementById(e)}function getContext2dOrThrow(e){var t=S.getEnv(),n=t.Canvas;if(e instanceof t.CanvasRenderingContext2D)return e;var i=resolveInput(e);if(!(i instanceof n))throw Error("resolveContext2d - expected canvas to be of instance of Canvas");var o=i.getContext("2d");if(!o)throw Error("resolveContext2d - canvas 2d context is null");return o}initialize(),(i=l||(l={})).TOP_LEFT="TOP_LEFT",i.TOP_RIGHT="TOP_RIGHT",i.BOTTOM_LEFT="BOTTOM_LEFT",i.BOTTOM_RIGHT="BOTTOM_RIGHT";var DrawTextFieldOptions=function(e){void 0===e&&(e={});var t=e.anchorPosition,n=e.backgroundColor,i=e.fontColor,o=e.fontSize,a=e.fontStyle,s=e.padding;this.anchorPosition=t||l.TOP_LEFT,this.backgroundColor=n||"rgba(0, 0, 0, 0.5)",this.fontColor=i||"rgba(255, 255, 255, 1)",this.fontSize=o||14,this.fontStyle=a||"Georgia",this.padding=s||4},C=function(){function DrawTextField(e,t,n){void 0===n&&(n={}),this.text="string"==typeof e?[e]:e instanceof DrawTextField?e.text:e,this.anchor=t,this.options=new DrawTextFieldOptions(n)}return DrawTextField.prototype.measureWidth=function(e){var t=this.options.padding;return this.text.map(function(t){return e.measureText(t).width}).reduce(function(e,t){return e<t?t:e},0)+2*t},DrawTextField.prototype.measureHeight=function(){var e=this.options,t=e.fontSize,n=e.padding;return this.text.length*t+2*n},DrawTextField.prototype.getUpperLeft=function(e,t){var n=this.options.anchorPosition,i=n===l.BOTTOM_RIGHT||n===l.TOP_RIGHT,o=n===l.BOTTOM_LEFT||n===l.BOTTOM_RIGHT,a=this.measureWidth(e),s=this.measureHeight(),c=i?this.anchor.x-a:this.anchor.x,u=o?this.anchor.y-s:this.anchor.y;return t?{x:Math.max(Math.min(c,t.width-a),0),y:Math.max(Math.min(u,t.height-s),0)}:{x:c,y:u}},DrawTextField.prototype.draw=function(e){var t=resolveInput(e),n=getContext2dOrThrow(t),i=this.options,o=i.backgroundColor,a=i.fontColor,s=i.fontSize,c=i.fontStyle,u=i.padding;n.font=s+"px "+c;var l=this.measureWidth(n),f=this.measureHeight();n.fillStyle=o;var d=this.getUpperLeft(n,t);n.fillRect(d.x,d.y,l,f),n.fillStyle=a,this.text.forEach(function(e,t){var i=u+d.x,o=u+d.y+(t+1)*s;n.fillText(e,i,o)})},DrawTextField}(),DrawBoxOptions=function(e){void 0===e&&(e={});var t=e.boxColor,n=e.lineWidth,i=e.label,o=e.drawLabelOptions;this.boxColor=t||"rgba(0, 0, 255, 1)",this.lineWidth=n||2,this.label=i;var a={anchorPosition:l.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new DrawTextFieldOptions(Object.assign({},a,o))},B=function(){function DrawBox(e,t){void 0===t&&(t={}),this.box=new v(e),this.options=new DrawBoxOptions(t)}return DrawBox.prototype.draw=function(e){var t=getContext2dOrThrow(e),n=this.options,i=n.boxColor,o=n.lineWidth,a=this.box,s=a.x,c=a.y,u=a.width,l=a.height;t.strokeStyle=i,t.lineWidth=o,t.strokeRect(s,c,u,l);var f=this.options.label;f&&new C([f],{x:s-o/2,y:c},this.options.drawLabelOptions).draw(e)},DrawBox}();function drawDetections(e,t){(Array.isArray(t)?t:[t]).forEach(function(t){var n=t instanceof _?t.score:WithFaceDetection_isWithFaceDetection(t)?t.detection.score:void 0,i=t instanceof _?t.box:WithFaceDetection_isWithFaceDetection(t)?t.detection.box:new v(t),o=n?""+round(n):void 0;new B(i,{label:o}).draw(e)})}function isMediaLoaded(e){var t=S.getEnv(),n=t.Image,i=t.Video;return e instanceof n&&e.complete||e instanceof i&&e.readyState>=3}function getMediaDimensions_getMediaDimensions(e){var t=S.getEnv(),n=t.Image,i=t.Video;return e instanceof n?new m(e.naturalWidth,e.naturalHeight):e instanceof i?new m(e.videoWidth,e.videoHeight):new m(e.width,e.height)}function createCanvas(e){var t=e.width,n=e.height,i=(0,S.getEnv().createCanvasElement)();return i.width=t,i.height=n,i}function createCanvasFromMedia(e,t){var n=S.getEnv().ImageData;if(!(e instanceof n)&&!isMediaLoaded(e))throw Error("createCanvasFromMedia - media has not finished loading yet");var i=t||getMediaDimensions_getMediaDimensions(e),o=i.width,a=i.height,s=createCanvas({width:o,height:a});return e instanceof n?getContext2dOrThrow(s).putImageData(e,0,0):getContext2dOrThrow(s).drawImage(e,0,0,o,a),s}function isMediaElement(e){var t=S.getEnv(),n=t.Image,i=t.Canvas,o=t.Video;return e instanceof n||e instanceof i||e instanceof o}var D=function(){function NetInput(e,t){var n=this;if(void 0===t&&(t=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=t,this._batchSize=e.length,e.forEach(function(e,t){if(isTensor(e,3)){n._imageTensors[t]=e,n._inputDimensions[t]=e.shape;return}if(isTensor4D(e)){var i=e.shape[0];if(1!==i)throw Error("NetInput - tf.Tensor4D with batchSize "+i+" passed, but not supported in input array");n._imageTensors[t]=e,n._inputDimensions[t]=e.shape.slice(1);return}var o=e instanceof S.getEnv().Canvas?e:createCanvasFromMedia(e);n._canvases[t]=o,n._inputDimensions[t]=[o.height,o.width,3]})}return Object.defineProperty(NetInput.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(NetInput.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(NetInput.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(NetInput.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(NetInput.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(NetInput.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(NetInput.prototype,"reshapedInputDimensions",{get:function(){var e=this;return range(this.batchSize,0,1).map(function(t,n){return e.getReshapedInputDimensions(n)})},enumerable:!0,configurable:!0}),NetInput.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},NetInput.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},NetInput.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},NetInput.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},NetInput.prototype.getReshapedInputDimensions=function(e){var t,n,i,o,a;if("number"!=typeof this.inputSize)throw Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");return t={width:this.getInputWidth(e),height:this.getInputHeight(e)},n=this.inputSize,i=t.width,a=n/Math.max(o=t.height,i),new m(Math.round(i*a),Math.round(o*a))},NetInput.prototype.toBatchTensor=function(e,t){var n=this;return void 0===t&&(t=!0),this._inputSize=e,p.lub(function(){var i=range(n.batchSize,0,1).map(function(i){var o=n.getInput(i);if(o instanceof p.esB){var a,s,c=isTensor4D(o)?o:o.expandDims();return a=c,void 0===(s=t)&&(s=!1),((c=p.lub(function(){var e=a.shape.slice(1),t=e[0],n=e[1];if(t===n)return a;var i=Math.abs(t-n),o=t>n?2:1,createPaddingTensor=function(e){var t=a.shape.slice();return t[o]=e,p.hlL(t,0)},c=createPaddingTensor(Math.round(i*(s?.5:1))),u=i-c.shape[o],l=[s&&u?createPaddingTensor(u):null,a,c].filter(function(e){return!!e}).map(function(e){return e.toFloat()});return p.zoF(l,o)})).shape[1]!==e||c.shape[2]!==e)&&(c=p.BHj.resizeBilinear(c,[e,e])),c.as3D(e,e,3)}if(o instanceof S.getEnv().Canvas)return p.Xhn.fromPixels(function(e,t,n){void 0===n&&(n=!1);var i=S.getEnv(),o=i.Image,a=i.Canvas;if(!(e instanceof o||e instanceof a))throw Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var s=getMediaDimensions_getMediaDimensions(e),c=t/Math.max(s.height,s.width),u=c*s.width,l=c*s.height,f=createCanvas({width:t,height:t}),d=e instanceof a?e:createCanvasFromMedia(e),h=Math.abs(u-l)/2,p=n&&u<l?h:0,m=n&&l<u?h:0;return getContext2dOrThrow(f).drawImage(d,p,m,u,l),f}(o,e,t));throw Error("toBatchTensor - at batchIdx "+i+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+o)});return p.knu(i.map(function(e){return e.toFloat()})).as4D(n.batchSize,e,e,3)})},NetInput}();function toNetInput(e){return tslib_es6_awaiter(this,void 0,void 0,function(){var t,n,i;return tslib_es6_generator(this,function(o){switch(o.label){case 0:if(e instanceof D)return[2,e];if(!(t=Array.isArray(e)?e:[e]).length)throw Error("toNetInput - empty array passed as input");return n=function(t){return Array.isArray(e)?" at input index "+t+":":""},(i=t.map(resolveInput)).forEach(function(e,i){if(!isMediaElement(e)&&!isTensor(e,3)&&!isTensor4D(e)){if("string"==typeof t[i])throw Error("toNetInput -"+n(i)+" string passed, but could not resolve HTMLElement for element id "+t[i]);throw Error("toNetInput -"+n(i)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id")}if(isTensor4D(e)){var o=e.shape[0];if(1!==o)throw Error("toNetInput -"+n(i)+" tf.Tensor4D with batchSize "+o+" passed, but not supported in input array")}}),[4,Promise.all(i.map(function(e){return isMediaElement(e)&&new Promise(function(t,n){if(e instanceof S.getEnv().Canvas||isMediaLoaded(e))return t();function onLoad(e){e.currentTarget&&(e.currentTarget.removeEventListener("load",onLoad),e.currentTarget.removeEventListener("error",onError),t(e))}function onError(e){e.currentTarget&&(e.currentTarget.removeEventListener("load",onLoad),e.currentTarget.removeEventListener("error",onError),n(e))}e.addEventListener("load",onLoad),e.addEventListener("error",onError)})}))];case 1:return o.sent(),[2,new D(i,Array.isArray(e))]}})})}function extractFaces(e,t){return tslib_es6_awaiter(this,void 0,void 0,function(){var n,i,o,a,s,c;return tslib_es6_generator(this,function(u){switch(u.label){case 0:if(n=S.getEnv().Canvas,i=e,e instanceof n)return[3,5];return[4,toNetInput(e)];case 1:if((o=u.sent()).batchSize>1)throw Error("extractFaces - batchSize > 1 not supported");if(!((a=o.getInput(0))instanceof n))return[3,2];return s=a,[3,4];case 2:return[4,function(e,t){return tslib_es6_awaiter(this,void 0,void 0,function(){var t,n,i,o,a,s;return tslib_es6_generator(this,function(c){switch(c.label){case 0:return t=S.getEnv().createCanvasElement(),i=(n=e.shape.slice(isTensor4D(e)?1:0))[0],o=n[1],a=n[2],s=p.lub(function(){return e.as3D(i,o,a).toInt()}),[4,p.Xhn.toPixels(s,t)];case 1:return c.sent(),s.dispose(),[2,t]}})})}(a)];case 3:s=u.sent(),u.label=4;case 4:i=s,u.label=5;case 5:return c=getContext2dOrThrow(i),[2,t.map(function(e){return e instanceof _?e.forSize(i.width,i.height).box.floor():e}).map(function(e){return e.clipAtImageBorders(i.width,i.height)}).map(function(e){var t=e.x,n=e.y,i=e.width,o=e.height,a=createCanvas({width:i,height:o});return getContext2dOrThrow(a).putImageData(c.getImageData(t,n,i,o),0,0),a})]}})})}function extractFaceTensors(e,t){return tslib_es6_awaiter(this,void 0,void 0,function(){return tslib_es6_generator(this,function(n){if(!isTensor(e,3)&&!isTensor4D(e))throw Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(isTensor4D(e)&&e.shape[0]>1)throw Error("extractFaceTensors - batchSize > 1 not supported");return[2,p.lub(function(){var n=e.shape.slice(isTensor4D(e)?1:0),i=n[0],o=n[1],a=n[2];return t.map(function(e){return e instanceof _?e.forSize(o,i).box:e}).map(function(e){return e.clipAtImageBorders(o,i)}).map(function(t){var n=t.x,s=t.y,c=t.width,u=t.height;return p.CnO(e.as3D(i,o,a),[s,n,0],[u,c,a])})})]})})}function getModelUris(e,t){var n=t+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:n};if("/"===e)return{modelBaseUri:"/",manifestUri:"/"+n};var i=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"",o=(e=e.replace(i,"")).split("/").filter(function(e){return e}),a=e.endsWith(".json")?o[o.length-1]:n,s=i+(e.endsWith(".json")?o.slice(0,o.length-1):o).join("/");return{modelBaseUri:s=e.startsWith("/")?"/"+s:s,manifestUri:"/"===s?"/"+a:s+"/"+a}}var O=function(){function NeuralNetwork(e){this._name=e,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(NeuralNetwork.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(NeuralNetwork.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(NeuralNetwork.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),NeuralNetwork.prototype.getParamFromPath=function(e){var t=this.traversePropertyPath(e);return t.obj[t.objProp]},NeuralNetwork.prototype.reassignParamFromPath=function(e,t){var n=this.traversePropertyPath(e),i=n.obj,o=n.objProp;i[o].dispose(),i[o]=t},NeuralNetwork.prototype.getParamList=function(){var e=this;return this._paramMappings.map(function(t){var n=t.paramPath;return{path:n,tensor:e.getParamFromPath(n)}})},NeuralNetwork.prototype.getTrainableParams=function(){return this.getParamList().filter(function(e){return e.tensor instanceof p._wD})},NeuralNetwork.prototype.getFrozenParams=function(){return this.getParamList().filter(function(e){return!(e.tensor instanceof p._wD)})},NeuralNetwork.prototype.variable=function(){var e=this;this.getFrozenParams().forEach(function(t){var n=t.path,i=t.tensor;e.reassignParamFromPath(n,i.variable())})},NeuralNetwork.prototype.freeze=function(){var e=this;this.getTrainableParams().forEach(function(t){var n=t.path,i=t.tensor,o=p.XeE(i.dataSync());i.dispose(),e.reassignParamFromPath(n,o)})},NeuralNetwork.prototype.dispose=function(e){void 0===e&&(e=!0),this.getParamList().forEach(function(t){if(e&&t.tensor.isDisposed)throw Error("param tensor has already been disposed for path "+t.path);t.tensor.dispose()}),this._params=void 0},NeuralNetwork.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(e){return Array.from(e.tensor.dataSync())}).reduce(function(e,t){return e.concat(t)}))},NeuralNetwork.prototype.load=function(e){return tslib_es6_awaiter(this,void 0,void 0,function(){return tslib_es6_generator(this,function(t){switch(t.label){case 0:if(e instanceof Float32Array)return this.extractWeights(e),[2];return[4,this.loadFromUri(e)];case 1:return t.sent(),[2]}})})},NeuralNetwork.prototype.loadFromUri=function(e){return tslib_es6_awaiter(this,void 0,void 0,function(){var t;return tslib_es6_generator(this,function(n){switch(n.label){case 0:if(e&&"string"!=typeof e)throw Error(this._name+".loadFromUri - expected model uri");return[4,function(e,t){return tslib_es6_awaiter(this,void 0,void 0,function(){var n,i,o,a;return tslib_es6_generator(this,function(s){switch(s.label){case 0:return i=(n=getModelUris(e,t)).manifestUri,o=n.modelBaseUri,[4,function(e){return tslib_es6_awaiter(this,void 0,void 0,function(){return tslib_es6_generator(this,function(t){switch(t.label){case 0:return[4,function(e,t){return tslib_es6_awaiter(this,void 0,void 0,function(){var t;return tslib_es6_generator(this,function(n){switch(n.label){case 0:return[4,(0,S.getEnv().fetch)(e,void 0)];case 1:if(!((t=n.sent()).status<400))throw Error("failed to fetch: ("+t.status+") "+t.statusText+", from url: "+t.url);return[2,t]}})})}(e)];case 1:return[2,t.sent().json()]}})})}(i)];case 1:return a=s.sent(),[2,p.io.loadWeights(a,o)]}})})}(e,this.getDefaultModelName())];case 1:return t=n.sent(),this.loadFromWeightMap(t),[2]}})})},NeuralNetwork.prototype.loadFromDisk=function(e){return tslib_es6_awaiter(this,void 0,void 0,function(){var t,n,i,o,a,s,c,u,l,f;return tslib_es6_generator(this,function(d){switch(d.label){case 0:if(e&&"string"!=typeof e)throw Error(this._name+".loadFromDisk - expected model file path");return t=S.getEnv().readFile,i=(n=getModelUris(e,this.getDefaultModelName())).manifestUri,o=n.modelBaseUri,a=function(e){return Promise.all(e.map(function(e){return t(e).then(function(e){return e.buffer})}))},s=p.io.weightsLoaderFactory(a),l=(u=JSON).parse,[4,t(i)];case 1:return c=l.apply(u,[d.sent().toString()]),[4,s(c,o)];case 2:return f=d.sent(),this.loadFromWeightMap(f),[2]}})})},NeuralNetwork.prototype.loadFromWeightMap=function(e){var t=this.extractParamsFromWeigthMap(e),n=t.paramMappings,i=t.params;this._paramMappings=n,this._params=i},NeuralNetwork.prototype.extractWeights=function(e){var t=this.extractParams(e),n=t.paramMappings,i=t.params;this._paramMappings=n,this._params=i},NeuralNetwork.prototype.traversePropertyPath=function(e){if(!this.params)throw Error("traversePropertyPath - model has no loaded params");var t=e.split("/").reduce(function(t,n){if(!t.nextObj.hasOwnProperty(n))throw Error("traversePropertyPath - object does not have property "+n+", for path "+e);return{obj:t.nextObj,objProp:n,nextObj:t.nextObj[n]}},{nextObj:this.params}),n=t.obj,i=t.objProp;if(!n||!i||!(n[i]instanceof p.esB))throw Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:n,objProp:i}},NeuralNetwork}();function depthwiseSeparableConv(e,t,n){return p.lub(function(){var i=p.U_I(e,t.depthwise_filter,t.pointwise_filter,n,"same");return p.IHx(i,t.bias)})}function denseBlock3(e,t,n){return void 0===n&&(n=!1),p.lub(function(){var i=p.UYe(n?p.IHx(p.Tek(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):depthwiseSeparableConv(e,t.conv0,[2,2])),o=depthwiseSeparableConv(i,t.conv1,[1,1]),a=depthwiseSeparableConv(p.UYe(p.IHx(i,o)),t.conv2,[1,1]);return p.UYe(p.IHx(i,p.IHx(o,a)))})}function denseBlock4(e,t,n,i){return void 0===n&&(n=!1),void 0===i&&(i=!0),p.lub(function(){var o=p.UYe(n?p.IHx(p.Tek(e,t.conv0.filters,i?[2,2]:[1,1],"same"),t.conv0.bias):depthwiseSeparableConv(e,t.conv0,i?[2,2]:[1,1])),a=depthwiseSeparableConv(o,t.conv1,[1,1]),s=depthwiseSeparableConv(p.UYe(p.IHx(o,a)),t.conv2,[1,1]),c=depthwiseSeparableConv(p.UYe(p.IHx(o,p.IHx(a,s))),t.conv3,[1,1]);return p.UYe(p.IHx(o,p.IHx(a,p.IHx(s,c))))})}function convLayer(e,t,n,i){return void 0===n&&(n="same"),void 0===i&&(i=!1),p.lub(function(){var o=p.IHx(p.Tek(e,t.filters,[1,1],n),t.bias);return i?p.UYe(o):o})}function disposeUnusedWeightTensors(e,t){Object.keys(e).forEach(function(n){t.some(function(e){return e.originalPath===n})||e[n].dispose()})}function extractConvParamsFactory(e,t){return function(n,i,o,a){var s=p.yXz(e(n*i*o*o),[o,o,n,i]),c=p.RRF(e(i));return t.push({paramPath:a+"/filters"},{paramPath:a+"/bias"}),{filters:s,bias:c}}}function extractFCParamsFactory(e,t){return function(n,i,o){var a=p.odF(e(n*i),[n,i]),s=p.RRF(e(i));return t.push({paramPath:o+"/weights"},{paramPath:o+"/bias"}),{weights:a,bias:s}}}var SeparableConvParams=function(e,t,n){this.depthwise_filter=e,this.pointwise_filter=t,this.bias=n};function extractSeparableConvParamsFactory(e,t){return function(n,i,o){var a=p.yXz(e(9*n),[3,3,n,1]),s=p.yXz(e(n*i),[1,1,n,i]),c=p.RRF(e(i));return t.push({paramPath:o+"/depthwise_filter"},{paramPath:o+"/pointwise_filter"},{paramPath:o+"/bias"}),new SeparableConvParams(a,s,c)}}function loadSeparableConvParamsFactory(e){return function(t){var n=e(t+"/depthwise_filter",4),i=e(t+"/pointwise_filter",4),o=e(t+"/bias",1);return new SeparableConvParams(n,i,o)}}function extractWeightEntryFactory(e,t){return function(n,i,o){var a=e[n];if(!isTensor(a,i))throw Error("expected weightMap["+n+"] to be a Tensor"+i+"D, instead have "+a);return t.push({originalPath:n,paramPath:o||n}),a}}function extractWeightsFactory(e){var t=e;return{extractWeights:function(e){var n=t.slice(0,e);return t=t.slice(e),n},getRemainingWeights:function(){return t}}}function extractorsFactory(e,t){var n=extractConvParamsFactory(e,t),i=extractSeparableConvParamsFactory(e,t);function extractDenseBlock3Params(e,t,o,a){return void 0===a&&(a=!1),{conv0:a?n(e,t,3,o+"/conv0"):i(e,t,o+"/conv0"),conv1:i(t,t,o+"/conv1"),conv2:i(t,t,o+"/conv2")}}return{extractDenseBlock3Params:extractDenseBlock3Params,extractDenseBlock4Params:function(e,t,n,o){void 0===o&&(o=!1);var a=extractDenseBlock3Params(e,t,n,o);return{conv0:a.conv0,conv1:a.conv1,conv2:a.conv2,conv3:i(t,t,n+"/conv3")}}}}function loadConvParamsFactory(e){return function(t){return{filters:e(t+"/filters",4),bias:e(t+"/bias",1)}}}function loadParamsFactory(e,t){var n=extractWeightEntryFactory(e,t),i=loadConvParamsFactory(n),o=loadSeparableConvParamsFactory(n);return{extractDenseBlock3Params:function(e,t){return void 0===t&&(t=!1),{conv0:t?i(e+"/conv0"):o(e+"/conv0"),conv1:o(e+"/conv1"),conv2:o(e+"/conv2")}},extractDenseBlock4Params:function(e,t){return void 0===t&&(t=!1),{conv0:t?i(e+"/conv0"):o(e+"/conv0"),conv1:o(e+"/conv1"),conv2:o(e+"/conv2"),conv3:o(e+"/conv3")}}}}var L=function(e){function FaceFeatureExtractor(){return e.call(this,"FaceFeatureExtractor")||this}return __extends(FaceFeatureExtractor,e),FaceFeatureExtractor.prototype.forwardInput=function(e){var t=this.params;if(!t)throw Error("FaceFeatureExtractor - load model before inference");return p.lub(function(){var n=denseBlock4(normalize(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(p.iD$(255)),t.dense0,!0);return n=denseBlock4(n,t.dense1),n=denseBlock4(n,t.dense2),n=denseBlock4(n,t.dense3),n=p.wS1(n,[7,7],[2,2],"valid")})},FaceFeatureExtractor.prototype.forward=function(e){return tslib_es6_awaiter(this,void 0,void 0,function(){var t;return tslib_es6_generator(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,toNetInput(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},FaceFeatureExtractor.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},FaceFeatureExtractor.prototype.extractParamsFromWeigthMap=function(e){var t,n,i;return i={dense0:(n=loadParamsFactory(e,t=[]).extractDenseBlock4Params)("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")},disposeUnusedWeightTensors(e,t),{params:i,paramMappings:t}},FaceFeatureExtractor.prototype.extractParams=function(e){return function(e){var t=[],n=extractWeightsFactory(e),i=n.extractWeights,o=n.getRemainingWeights,a=extractorsFactory(i,t).extractDenseBlock4Params,s=a(3,32,"dense0",!0),c=a(32,64,"dense1"),u=a(64,128,"dense2"),l=a(128,256,"dense3");if(0!==o().length)throw Error("weights remaing after extract: "+o().length);return{paramMappings:t,params:{dense0:s,dense1:c,dense2:u,dense3:l}}}(e)},FaceFeatureExtractor}(O);function fullyConnectedLayer(e,t){return p.lub(function(){return p.IHx(p.OI3(e,t.weights),t.bias)})}function seperateWeightMaps(e){var t={},n={};return Object.keys(e).forEach(function(i){(i.startsWith("fc")?n:t)[i]=e[i]}),{featureExtractorMap:t,classifierMap:n}}var I=function(e){function FaceProcessor(t,n){var i=e.call(this,t)||this;return i._faceFeatureExtractor=n,i}return __extends(FaceProcessor,e),Object.defineProperty(FaceProcessor.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),FaceProcessor.prototype.runNet=function(e){var t=this,n=this.params;if(!n)throw Error(this._name+" - load model before inference");return p.lub(function(){var i=e instanceof D?t.faceFeatureExtractor.forwardInput(e):e;return fullyConnectedLayer(i.as2D(i.shape[0],-1),n.fc)})},FaceProcessor.prototype.dispose=function(t){void 0===t&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},FaceProcessor.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),n=t.params,i=t.paramMappings;this._params=n,this._paramMappings=i},FaceProcessor.prototype.extractClassifierParams=function(e){return function(e,t,n){var i=[],o=extractWeightsFactory(e),a=o.extractWeights,s=o.getRemainingWeights,c=extractFCParamsFactory(a,i)(t,n,"fc");if(0!==s().length)throw Error("weights remaing after extract: "+s().length);return{paramMappings:i,params:{fc:c}}}(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},FaceProcessor.prototype.extractParamsFromWeigthMap=function(e){var t,n,i,o=seperateWeightMaps(e),a=o.featureExtractorMap,s=o.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(a),i={fc:{weights:(n=extractWeightEntryFactory(s,t=[]))("fc/weights",2),bias:n("fc/bias",1)}},disposeUnusedWeightTensors(s,t),{params:i,paramMappings:t}},FaceProcessor.prototype.extractParams=function(e){var t=this.getClassifierChannelsIn(),n=this.getClassifierChannelsOut(),i=n*t+n,o=e.slice(0,e.length-i),a=e.slice(e.length-i);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(a)},FaceProcessor}(O),M=["neutral","happy","sad","angry","fearful","disgusted","surprised"],N=function(){function FaceExpressions(e){var t=this;if(7!==e.length)throw Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);M.forEach(function(n,i){t[n]=e[i]})}return FaceExpressions.prototype.asSortedArray=function(){var e=this;return M.map(function(t){return{expression:t,probability:e[t]}}).sort(function(e,t){return t.probability-e.probability})},FaceExpressions}(),R=function(e){function FaceExpressionNet(t){return void 0===t&&(t=new L),e.call(this,"FaceExpressionNet",t)||this}return __extends(FaceExpressionNet,e),FaceExpressionNet.prototype.forwardInput=function(e){var t=this;return p.lub(function(){return p.XAC(t.runNet(e))})},FaceExpressionNet.prototype.forward=function(e){return tslib_es6_awaiter(this,void 0,void 0,function(){var t;return tslib_es6_generator(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,toNetInput(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},FaceExpressionNet.prototype.predictExpressions=function(e){return tslib_es6_awaiter(this,void 0,void 0,function(){var t,n,i,o,a=this;return tslib_es6_generator(this,function(s){switch(s.label){case 0:return[4,toNetInput(e)];case 1:return t=s.sent(),[4,this.forwardInput(t)];case 2:return n=s.sent(),[4,Promise.all(p.HHK(n).map(function(e){return tslib_es6_awaiter(a,void 0,void 0,function(){var t;return tslib_es6_generator(this,function(n){switch(n.label){case 0:return[4,e.data()];case 1:return t=n.sent(),e.dispose(),[2,t]}})})}))];case 3:return i=s.sent(),n.dispose(),o=i.map(function(e){return new N(e)}),[2,t.isBatchInput?o:o[0]]}})})},FaceExpressionNet.prototype.getDefaultModelName=function(){return"face_expression_model"},FaceExpressionNet.prototype.getClassifierChannelsIn=function(){return 256},FaceExpressionNet.prototype.getClassifierChannelsOut=function(){return 7},FaceExpressionNet}(I);function extendWithFaceExpressions(e,t){return Object.assign({},e,{expressions:t})}function drawFaceExpressions(e,t,n,i){void 0===n&&(n=.1),(Array.isArray(t)?t:[t]).forEach(function(t){var o=t instanceof N?t:t.expressions instanceof N?t.expressions:void 0;if(!o)throw Error("drawFaceExpressions - expected faceExpressions to be FaceExpressions | WithFaceExpressions<{}> or array thereof");var a=o.asSortedArray().filter(function(e){return e.probability>n}),s=WithFaceDetection_isWithFaceDetection(t)?t.detection.box.bottomLeft:i||new g(0,0);new C(a.map(function(e){return e.expression+" ("+round(e.probability)+")"}),s).draw(e)})}function WithFaceLandmarks_isWithFaceLandmarks(e){return WithFaceDetection_isWithFaceDetection(e)&&e.landmarks instanceof x&&e.unshiftedLandmarks instanceof x&&e.alignedRect instanceof _}function WithFaceLandmarks_extendWithFaceLandmarks(e,t){var n=e.detection.box,i=t.shiftBy(n.x,n.y),o=i.align(),a=e.detection.imageDims,s=new _(e.detection.score,o.rescale(a.reverse()),a);return Object.assign({},e,{landmarks:i,unshiftedLandmarks:t,alignedRect:s})}var DrawFaceLandmarksOptions=function(e){void 0===e&&(e={});var t=e.drawLines,n=e.drawPoints,i=e.lineWidth,o=e.lineColor,a=e.pointSize,s=e.pointColor;this.drawLines=void 0===t||t,this.drawPoints=void 0===n||n,this.lineWidth=i||1,this.pointSize=a||2,this.lineColor=o||"rgba(0, 255, 255, 1)",this.pointColor=s||"rgba(255, 0, 255, 1)"},j=function(){function DrawFaceLandmarks(e,t){void 0===t&&(t={}),this.faceLandmarks=e,this.options=new DrawFaceLandmarksOptions(t)}return DrawFaceLandmarks.prototype.draw=function(e){var t=getContext2dOrThrow(e),n=this.options,i=n.drawLines,o=n.drawPoints,a=n.lineWidth,s=n.lineColor,c=n.pointSize,u=n.pointColor;i&&this.faceLandmarks instanceof P&&(t.strokeStyle=s,t.lineWidth=a,drawContour(t,this.faceLandmarks.getJawOutline()),drawContour(t,this.faceLandmarks.getLeftEyeBrow()),drawContour(t,this.faceLandmarks.getRightEyeBrow()),drawContour(t,this.faceLandmarks.getNose()),drawContour(t,this.faceLandmarks.getLeftEye(),!0),drawContour(t,this.faceLandmarks.getRightEye(),!0),drawContour(t,this.faceLandmarks.getMouth(),!0)),o&&(t.strokeStyle=u,t.fillStyle=u,this.faceLandmarks.positions.forEach(function(e){t.beginPath(),t.arc(e.x,e.y,c,0,2*Math.PI),t.fill()}))},DrawFaceLandmarks}();function drawFaceLandmarks(e,t){(Array.isArray(t)?t:[t]).forEach(function(t){var n=t instanceof x?t:WithFaceLandmarks_isWithFaceLandmarks(t)?t.landmarks:void 0;if(!n)throw Error("drawFaceLandmarks - expected faceExpressions to be FaceLandmarks | WithFaceLandmarks<WithFaceDetection<{}>> or array thereof");new j(n).draw(e)})}function conv(e,t,n){return p.IHx(p.Tek(e,t.filters,n,"same"),t.bias)}function reductionBlock(e,t,n){void 0===n&&(n=!0);var i=n?p.UYe(e):e;return i=depthwiseSeparableConv(i,t.separable_conv0,[1,1]),i=depthwiseSeparableConv(p.UYe(i),t.separable_conv1,[1,1]),i=p._sB(i,[3,3],[2,2],"same"),i=p.IHx(i,conv(e,t.expansion_conv,[2,2]))}var V=function(e){function TinyXception(t){var n=e.call(this,"TinyXception")||this;return n._numMainBlocks=t,n}return __extends(TinyXception,e),TinyXception.prototype.forwardInput=function(e){var t=this,n=this.params;if(!n)throw Error("TinyXception - load model before inference");return p.lub(function(){var i=normalize(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(p.iD$(256)),o=p.UYe(conv(i,n.entry_flow.conv_in,[2,2]));return o=reductionBlock(o,n.entry_flow.reduction_block_0,!1),o=reductionBlock(o,n.entry_flow.reduction_block_1),range(t._numMainBlocks,0,1).forEach(function(e){var t,i,a;t=o,i=n.middle_flow["main_block_"+e],a=depthwiseSeparableConv(p.UYe(t),i.separable_conv0,[1,1]),a=depthwiseSeparableConv(p.UYe(a),i.separable_conv1,[1,1]),a=depthwiseSeparableConv(p.UYe(a),i.separable_conv2,[1,1]),o=a=p.IHx(a,t)}),o=reductionBlock(o,n.exit_flow.reduction_block),o=p.UYe(depthwiseSeparableConv(o,n.exit_flow.separable_conv,[1,1]))})},TinyXception.prototype.forward=function(e){return tslib_es6_awaiter(this,void 0,void 0,function(){var t;return tslib_es6_generator(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,toNetInput(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},TinyXception.prototype.getDefaultModelName=function(){return"tiny_xception_model"},TinyXception.prototype.extractParamsFromWeigthMap=function(e){return function(e,t){var n,i,o,a=[],s={extractConvParams:i=loadConvParamsFactory(n=extractWeightEntryFactory(e,a)),extractSeparableConvParams:o=loadSeparableConvParamsFactory(n),extractReductionBlockParams:function(e){return{separable_conv0:o(e+"/separable_conv0"),separable_conv1:o(e+"/separable_conv1"),expansion_conv:i(e+"/expansion_conv")}},extractMainBlockParams:function(e){return{separable_conv0:o(e+"/separable_conv0"),separable_conv1:o(e+"/separable_conv1"),separable_conv2:o(e+"/separable_conv2")}}},c=s.extractConvParams,u=s.extractSeparableConvParams,l=s.extractReductionBlockParams,f=s.extractMainBlockParams,d=c("entry_flow/conv_in"),h=l("entry_flow/reduction_block_0"),p=l("entry_flow/reduction_block_1"),m={};range(t,0,1).forEach(function(e){m["main_block_"+e]=f("middle_flow/main_block_"+e)});var g=l("exit_flow/reduction_block"),v=u("exit_flow/separable_conv");return disposeUnusedWeightTensors(e,a),{params:{entry_flow:{conv_in:d,reduction_block_0:h,reduction_block_1:p},middle_flow:m,exit_flow:{reduction_block:g,separable_conv:v}},paramMappings:a}}(e,this._numMainBlocks)},TinyXception.prototype.extractParams=function(e){return function(e,t){var n,i,o=[],a=extractWeightsFactory(e),s=a.extractWeights,c=a.getRemainingWeights,u={extractConvParams:n=extractConvParamsFactory(s,o),extractSeparableConvParams:i=extractSeparableConvParamsFactory(s,o),extractReductionBlockParams:function(e,t,o){return{separable_conv0:i(e,t,o+"/separable_conv0"),separable_conv1:i(t,t,o+"/separable_conv1"),expansion_conv:n(e,t,1,o+"/expansion_conv")}},extractMainBlockParams:function(e,t){return{separable_conv0:i(e,e,t+"/separable_conv0"),separable_conv1:i(e,e,t+"/separable_conv1"),separable_conv2:i(e,e,t+"/separable_conv2")}}},l=u.extractConvParams,f=u.extractSeparableConvParams,d=u.extractReductionBlockParams,h=u.extractMainBlockParams,p=l(3,32,3,"entry_flow/conv_in"),m=d(32,64,"entry_flow/reduction_block_0"),g=d(64,128,"entry_flow/reduction_block_1"),v={};range(t,0,1).forEach(function(e){v["main_block_"+e]=h(128,"middle_flow/main_block_"+e)});var b=d(128,256,"exit_flow/reduction_block"),y=f(256,512,"exit_flow/separable_conv");if(0!==c().length)throw Error("weights remaing after extract: "+c().length);return{paramMappings:o,params:{entry_flow:{conv_in:p,reduction_block_0:m,reduction_block_1:g},middle_flow:v,exit_flow:{reduction_block:b,separable_conv:y}}}}(e,this._numMainBlocks)},TinyXception}(O);(o=f||(f={})).FEMALE="female",o.MALE="male";var W=function(e){function AgeGenderNet(t){void 0===t&&(t=new V(2));var n=e.call(this,"AgeGenderNet")||this;return n._faceFeatureExtractor=t,n}return __extends(AgeGenderNet,e),Object.defineProperty(AgeGenderNet.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),AgeGenderNet.prototype.runNet=function(e){var t=this,n=this.params;if(!n)throw Error(this._name+" - load model before inference");return p.lub(function(){var i=e instanceof D?t.faceFeatureExtractor.forwardInput(e):e,o=p.wS1(i,[7,7],[2,2],"valid").as2D(i.shape[0],-1);return{age:fullyConnectedLayer(o,n.fc.age).as1D(),gender:fullyConnectedLayer(o,n.fc.gender)}})},AgeGenderNet.prototype.forwardInput=function(e){var t=this;return p.lub(function(){var n=t.runNet(e),i=n.age,o=n.gender;return{age:i,gender:p.XAC(o)}})},AgeGenderNet.prototype.forward=function(e){return tslib_es6_awaiter(this,void 0,void 0,function(){var t;return tslib_es6_generator(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,toNetInput(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},AgeGenderNet.prototype.predictAgeAndGender=function(e){return tslib_es6_awaiter(this,void 0,void 0,function(){var t,n,i,o,a,s=this;return tslib_es6_generator(this,function(c){switch(c.label){case 0:return[4,toNetInput(e)];case 1:return t=c.sent(),[4,this.forwardInput(t)];case 2:return n=c.sent(),i=p.HHK(n.age),o=p.HHK(n.gender),[4,Promise.all(i.map(function(e,t){return{ageTensor:e,genderTensor:o[t]}}).map(function(e){var t=e.ageTensor,n=e.genderTensor;return tslib_es6_awaiter(s,void 0,void 0,function(){var e,i,o,a,s;return tslib_es6_generator(this,function(c){switch(c.label){case 0:return[4,t.data()];case 1:return e=c.sent()[0],[4,n.data()];case 2:return a=(o=(i=c.sent()[0])>.5)?f.MALE:f.FEMALE,s=o?i:1-i,t.dispose(),n.dispose(),[2,{age:e,gender:a,genderProbability:s}]}})})}))];case 3:return a=c.sent(),n.age.dispose(),n.gender.dispose(),[2,t.isBatchInput?a:a[0]]}})})},AgeGenderNet.prototype.getDefaultModelName=function(){return"age_gender_model"},AgeGenderNet.prototype.dispose=function(t){void 0===t&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},AgeGenderNet.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),n=t.params,i=t.paramMappings;this._params=n,this._paramMappings=i},AgeGenderNet.prototype.extractClassifierParams=function(e){return function(e){var t=[],n=extractWeightsFactory(e),i=n.extractWeights,o=n.getRemainingWeights,a=extractFCParamsFactory(i,t),s=a(512,1,"fc/age"),c=a(512,2,"fc/gender");if(0!==o().length)throw Error("weights remaing after extract: "+o().length);return{paramMappings:t,params:{fc:{age:s,gender:c}}}}(e)},AgeGenderNet.prototype.extractParamsFromWeigthMap=function(e){var t=seperateWeightMaps(e),n=t.featureExtractorMap,i=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(n),function(e){var t=[],n=extractWeightEntryFactory(e,t);function extractFcParams(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}var i={fc:{age:extractFcParams("fc/age"),gender:extractFcParams("fc/gender")}};return disposeUnusedWeightTensors(e,t),{params:i,paramMappings:t}}(i)},AgeGenderNet.prototype.extractParams=function(e){var t=e.slice(0,e.length-1539),n=e.slice(e.length-1539);return this.faceFeatureExtractor.extractWeights(t),this.extractClassifierParams(n)},AgeGenderNet}(O),U=function(e){function FaceLandmark68NetBase(){return null!==e&&e.apply(this,arguments)||this}return __extends(FaceLandmark68NetBase,e),FaceLandmark68NetBase.prototype.postProcess=function(e,t,n){var i=n.map(function(e){var n=e.width,i=e.height,o=t/Math.max(i,n);return{width:n*o,height:i*o}}),o=i.length;return p.lub(function(){var createInterleavedTensor=function(e,t){return p.knu([p.hlL([68],e),p.hlL([68],t)],1).as2D(1,136).as1D()},getPadding=function(e,t){var n=i[e],o=n.width,a=n.height;return t(o,a)?Math.abs(o-a)/2:0};return e.mul(p.hlL([o,136],t)).sub(p.knu(Array.from(Array(o),function(e,t){return createInterleavedTensor(getPadding(t,function(e,t){return e<t}),getPadding(t,function(e,t){return t<e}))}))).div(p.knu(Array.from(Array(o),function(e,t){return createInterleavedTensor(i[t].width,i[t].height)})))})},FaceLandmark68NetBase.prototype.forwardInput=function(e){var t=this;return p.lub(function(){var n=t.runNet(e);return t.postProcess(n,e.inputSize,e.inputDimensions.map(function(e){return{height:e[0],width:e[1]}}))})},FaceLandmark68NetBase.prototype.forward=function(e){return tslib_es6_awaiter(this,void 0,void 0,function(){var t;return tslib_es6_generator(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,toNetInput(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},FaceLandmark68NetBase.prototype.detectLandmarks=function(e){return tslib_es6_awaiter(this,void 0,void 0,function(){var t,n,i,o=this;return tslib_es6_generator(this,function(a){switch(a.label){case 0:return[4,toNetInput(e)];case 1:return t=a.sent(),[4,Promise.all((n=p.lub(function(){return p.HHK(o.forwardInput(t))})).map(function(e,n){return tslib_es6_awaiter(o,void 0,void 0,function(){var i,o,a,s,c;return tslib_es6_generator(this,function(u){switch(u.label){case 0:return a=(o=Array).from,[4,e.data()];case 1:return s=(i=a.apply(o,[u.sent()])).filter(function(e,t){return t%2==0}),c=i.filter(function(e,t){return t%2!=0}),[2,new P(Array(68).fill(0).map(function(e,t){return new g(s[t],c[t])}),{height:t.getInputHeight(n),width:t.getInputWidth(n)})]}})})}))];case 2:return i=a.sent(),n.forEach(function(e){return e.dispose()}),[2,t.isBatchInput?i:i[0]]}})})},FaceLandmark68NetBase.prototype.getClassifierChannelsOut=function(){return 136},FaceLandmark68NetBase}(I),z=function(e){function FaceLandmark68Net(t){return void 0===t&&(t=new L),e.call(this,"FaceLandmark68Net",t)||this}return __extends(FaceLandmark68Net,e),FaceLandmark68Net.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},FaceLandmark68Net.prototype.getClassifierChannelsIn=function(){return 256},FaceLandmark68Net}(U),H=function(e){function TinyFaceFeatureExtractor(){return e.call(this,"TinyFaceFeatureExtractor")||this}return __extends(TinyFaceFeatureExtractor,e),TinyFaceFeatureExtractor.prototype.forwardInput=function(e){var t=this.params;if(!t)throw Error("TinyFaceFeatureExtractor - load model before inference");return p.lub(function(){var n=denseBlock3(normalize(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(p.iD$(255)),t.dense0,!0);return n=denseBlock3(n,t.dense1),n=denseBlock3(n,t.dense2),n=p.wS1(n,[14,14],[2,2],"valid")})},TinyFaceFeatureExtractor.prototype.forward=function(e){return tslib_es6_awaiter(this,void 0,void 0,function(){var t;return tslib_es6_generator(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,toNetInput(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},TinyFaceFeatureExtractor.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},TinyFaceFeatureExtractor.prototype.extractParamsFromWeigthMap=function(e){var t,n,i;return i={dense0:(n=loadParamsFactory(e,t=[]).extractDenseBlock3Params)("dense0",!0),dense1:n("dense1"),dense2:n("dense2")},disposeUnusedWeightTensors(e,t),{params:i,paramMappings:t}},TinyFaceFeatureExtractor.prototype.extractParams=function(e){return function(e){var t=[],n=extractWeightsFactory(e),i=n.extractWeights,o=n.getRemainingWeights,a=extractorsFactory(i,t).extractDenseBlock3Params,s=a(3,32,"dense0",!0),c=a(32,64,"dense1"),u=a(64,128,"dense2");if(0!==o().length)throw Error("weights remaing after extract: "+o().length);return{paramMappings:t,params:{dense0:s,dense1:c,dense2:u}}}(e)},TinyFaceFeatureExtractor}(O),G=function(e){function FaceLandmark68TinyNet(t){return void 0===t&&(t=new H),e.call(this,"FaceLandmark68TinyNet",t)||this}return __extends(FaceLandmark68TinyNet,e),FaceLandmark68TinyNet.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},FaceLandmark68TinyNet.prototype.getClassifierChannelsIn=function(){return 128},FaceLandmark68TinyNet}(U);function convLayer_convLayer(e,t,n,i,o){void 0===o&&(o="same");var a,s,c=t.conv,u=c.filters,l=c.bias,f=p.Tek(e,u,n,o);return a=f=p.IHx(f,l),s=t.scale,f=p.IHx(p.dC7(a,s.weights),s.biases),i?p.UYe(f):f}function convNoRelu(e,t){return convLayer_convLayer(e,t,[1,1],!1)}function convDown(e,t){return convLayer_convLayer(e,t,[2,2],!0,"valid")}function residual(e,t){var n=convLayer_convLayer(e,t.conv1,[1,1],!0);return n=convNoRelu(n,t.conv2),n=p.IHx(n,e),n=p.UYe(n)}function residualDown(e,t){var n=convDown(e,t.conv1);n=convNoRelu(n,t.conv2);var i=p.wS1(e,2,2,"valid"),o=p.lls(i.shape),a=i.shape[3]!==n.shape[3];if(i.shape[1]!==n.shape[1]||i.shape[2]!==n.shape[2]){var s=__spreadArrays(n.shape);s[1]=1;var c=p.lls(s),u=__spreadArrays((n=p.zoF([n,c],1)).shape);u[2]=1;var l=p.lls(u);n=p.zoF([n,l],2)}return i=a?p.zoF([i,o],3):i,n=p.IHx(i,n),n=p.UYe(n)}__extends(function(){return null!==a&&a.apply(this,arguments)||this},a=z);var Y=function(e){function FaceRecognitionNet(){return e.call(this,"FaceRecognitionNet")||this}return __extends(FaceRecognitionNet,e),FaceRecognitionNet.prototype.forwardInput=function(e){var t=this.params;if(!t)throw Error("FaceRecognitionNet - load model before inference");return p.lub(function(){var n=convDown(normalize(e.toBatchTensor(150,!0).toFloat(),[122.782,117.001,104.298]).div(p.iD$(256)),t.conv32_down);n=residual(n=p._sB(n,3,2,"valid"),t.conv32_1),n=residual(n,t.conv32_2),n=residualDown(n=residual(n,t.conv32_3),t.conv64_down),n=residual(n,t.conv64_1),n=residual(n,t.conv64_2),n=residualDown(n=residual(n,t.conv64_3),t.conv128_down),n=residual(n,t.conv128_1),n=residualDown(n=residual(n,t.conv128_2),t.conv256_down),n=residual(n,t.conv256_1);var i=(n=residualDown(n=residual(n,t.conv256_2),t.conv256_down_out)).mean([1,2]);return p.OI3(i,t.fc)})},FaceRecognitionNet.prototype.forward=function(e){return tslib_es6_awaiter(this,void 0,void 0,function(){var t;return tslib_es6_generator(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,toNetInput(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},FaceRecognitionNet.prototype.computeFaceDescriptor=function(e){return tslib_es6_awaiter(this,void 0,void 0,function(){var t,n,i,o=this;return tslib_es6_generator(this,function(a){switch(a.label){case 0:return[4,toNetInput(e)];case 1:return t=a.sent(),[4,Promise.all((n=p.lub(function(){return p.HHK(o.forwardInput(t))})).map(function(e){return e.data()}))];case 2:return i=a.sent(),n.forEach(function(e){return e.dispose()}),[2,t.isBatchInput?i:i[0]]}})})},FaceRecognitionNet.prototype.getDefaultModelName=function(){return"face_recognition_model"},FaceRecognitionNet.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=function(e,t){var n=extractWeightEntryFactory(e,t);function extractConvLayerParams(e){return{conv:{filters:n(e+"/conv/filters",4),bias:n(e+"/conv/bias",1)},scale:{weights:n(e+"/scale/weights",1),biases:n(e+"/scale/biases",1)}}}return{extractConvLayerParams:extractConvLayerParams,extractResidualLayerParams:function(e){return{conv1:extractConvLayerParams(e+"/conv1"),conv2:extractConvLayerParams(e+"/conv2")}}}}(e,t),i=n.extractConvLayerParams,o=n.extractResidualLayerParams,a=i("conv32_down"),s=o("conv32_1"),c=o("conv32_2"),u=o("conv32_3"),l=o("conv64_down"),f=o("conv64_1"),d=o("conv64_2"),h=o("conv64_3"),p=o("conv128_down"),m=o("conv128_1"),g=o("conv128_2"),v=o("conv256_down"),b=o("conv256_1"),y=o("conv256_2"),_=o("conv256_down_out"),w=e.fc;if(t.push({originalPath:"fc",paramPath:"fc"}),!isTensor(w,2))throw Error("expected weightMap[fc] to be a Tensor2D, instead have "+w);return disposeUnusedWeightTensors(e,t),{params:{conv32_down:a,conv32_1:s,conv32_2:c,conv32_3:u,conv64_down:l,conv64_1:f,conv64_2:d,conv64_3:h,conv128_down:p,conv128_1:m,conv128_2:g,conv256_down:v,conv256_1:b,conv256_2:y,conv256_down_out:_,fc:w},paramMappings:t}}(e)},FaceRecognitionNet.prototype.extractParams=function(e){return function(e){var t=extractWeightsFactory(e),n=t.extractWeights,i=t.getRemainingWeights,o=[],a=function(e,t){function extractConvLayerParams(n,i,o,a){var s,c,u,l,f,d;return{conv:(s=a+"/conv",c=function(t,n,i){var o=e(t),a=o.length/(n*i*i);if(a%1!=0)throw Error("depth has to be an integer: "+a+", weights.length: "+o.length+", numFilters: "+n+", filterSize: "+i);return p.lub(function(){return p.p4s(p.yXz(o,[n,a,i,i]),[2,3,1,0])})}(n,i,o),u=p.RRF(e(i)),t.push({paramPath:s+"/filters"},{paramPath:s+"/bias"}),{filters:c,bias:u}),scale:(l=a+"/scale",f=p.RRF(e(i)),d=p.RRF(e(i)),t.push({paramPath:l+"/weights"},{paramPath:l+"/biases"}),{weights:f,biases:d})}}return{extractConvLayerParams:extractConvLayerParams,extractResidualLayerParams:function(e,t,n,i,o){return void 0===o&&(o=!1),{conv1:extractConvLayerParams((o?.5:1)*e,t,n,i+"/conv1"),conv2:extractConvLayerParams(e,t,n,i+"/conv2")}}}}(n,o),s=a.extractConvLayerParams,c=a.extractResidualLayerParams,u=s(4704,32,7,"conv32_down"),l=c(9216,32,3,"conv32_1"),f=c(9216,32,3,"conv32_2"),d=c(9216,32,3,"conv32_3"),h=c(36864,64,3,"conv64_down",!0),m=c(36864,64,3,"conv64_1"),g=c(36864,64,3,"conv64_2"),v=c(36864,64,3,"conv64_3"),b=c(147456,128,3,"conv128_down",!0),y=c(147456,128,3,"conv128_1"),_=c(147456,128,3,"conv128_2"),w=c(589824,256,3,"conv256_down",!0),x=c(589824,256,3,"conv256_1"),F=c(589824,256,3,"conv256_2"),P=c(589824,256,3,"conv256_down_out"),A=p.lub(function(){return p.p4s(p.odF(n(32768),[128,256]),[1,0])});if(o.push({paramPath:"fc"}),0!==i().length)throw Error("weights remaing after extract: "+i().length);return{params:{conv32_down:u,conv32_1:l,conv32_2:f,conv32_3:d,conv64_down:h,conv64_1:m,conv64_2:g,conv64_3:v,conv128_down:b,conv128_1:y,conv128_2:_,conv256_down:w,conv256_1:x,conv256_2:F,conv256_down_out:P,fc:A},paramMappings:o}}(e)},FaceRecognitionNet}(O);function extendWithGender(e,t,n){return Object.assign({},e,{gender:t,genderProbability:n})}var Q=function(){function MtcnnOptions(e){var t=void 0===e?{}:e,n=t.minFaceSize,i=t.scaleFactor,o=t.maxNumScales,a=t.scoreThresholds,s=t.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=n||20,this._scaleFactor=i||.709,this._maxNumScales=o||10,this._scoreThresholds=a||[.6,.7,.7],this._scaleSteps=s,"number"!=typeof this._minFaceSize||this._minFaceSize<0)throw Error(this._name+" - expected minFaceSize to be a number > 0");if("number"!=typeof this._scaleFactor||this._scaleFactor<=0||this._scaleFactor>=1)throw Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if("number"!=typeof this._maxNumScales||this._maxNumScales<0)throw Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||3!==this._scoreThresholds.length||this._scoreThresholds.some(function(e){return"number"!=typeof e}))throw Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(e){return"number"!=typeof e})))throw Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(MtcnnOptions.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(MtcnnOptions.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(MtcnnOptions.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(MtcnnOptions.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(MtcnnOptions.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),MtcnnOptions}();function pointwiseConvLayer(e,t,n){return p.lub(function(){var i=p.Tek(e,t.filters,n,"same");return i=p.IHx(i,t.batch_norm_offset),p.iUl(i,0,6)})}function boxPredictionLayer(e,t){return p.lub(function(){var n=e.shape[0];return{boxPredictionEncoding:p.XLQ(convLayer(e,t.box_encoding_predictor),[n,-1,1,4]),classPrediction:p.XLQ(convLayer(e,t.class_predictor),[n,-1,3])}})}var q=function(){function SsdMobilenetv1Options(e){var t=void 0===e?{}:e,n=t.minConfidence,i=t.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=n||.5,this._maxResults=i||100,"number"!=typeof this._minConfidence||this._minConfidence<=0||this._minConfidence>=1)throw Error(this._name+" - expected minConfidence to be a number between 0 and 1");if("number"!=typeof this._maxResults)throw Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(SsdMobilenetv1Options.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(SsdMobilenetv1Options.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),SsdMobilenetv1Options}(),$=function(e){function SsdMobilenetv1(){return e.call(this,"SsdMobilenetv1")||this}return __extends(SsdMobilenetv1,e),SsdMobilenetv1.prototype.forwardInput=function(e){var t=this.params;if(!t)throw Error("SsdMobilenetv1 - load model before inference");return p.lub(function(){var n,i,o,a,s,c,u=e.toBatchTensor(512,!1).toFloat(),l=(n=p.luU(p.dC7(u,p.iD$(.007843137718737125)),p.iD$(1)),i=t.mobilenetv1,p.lub(function(){var e=null,t=pointwiseConvLayer(n,i.conv_0,[2,2]);if([i.conv_1,i.conv_2,i.conv_3,i.conv_4,i.conv_5,i.conv_6,i.conv_7,i.conv_8,i.conv_9,i.conv_10,i.conv_11,i.conv_12,i.conv_13].forEach(function(n,i){var o,a,s=i+1,c=[2,4,6,12].some(function(e){return e===s})?[2,2]:[1,1];o=t,a=n.depthwise_conv,t=pointwiseConvLayer(t=p.lub(function(){var e=p.B10(o,a.filters,c,"same");return e=p.tgs(e,a.batch_norm_mean,a.batch_norm_variance,a.batch_norm_offset,a.batch_norm_scale,.0010000000474974513),p.iUl(e,0,6)}),n.pointwise_conv,[1,1]),11===s&&(e=t)}),null===e)throw Error("mobileNetV1 - output of conv layer 11 is null");return{out:t,conv11:e}})),f=(o=l.out,a=l.conv11,s=t.prediction_layer,p.lub(function(){var e=pointwiseConvLayer(o,s.conv_0,[1,1]),t=pointwiseConvLayer(e,s.conv_1,[2,2]),n=pointwiseConvLayer(t,s.conv_2,[1,1]),i=pointwiseConvLayer(n,s.conv_3,[2,2]),c=pointwiseConvLayer(i,s.conv_4,[1,1]),u=pointwiseConvLayer(c,s.conv_5,[2,2]),l=pointwiseConvLayer(u,s.conv_6,[1,1]),f=pointwiseConvLayer(l,s.conv_7,[2,2]),d=boxPredictionLayer(a,s.box_predictor_0),h=boxPredictionLayer(o,s.box_predictor_1),m=boxPredictionLayer(t,s.box_predictor_2),g=boxPredictionLayer(i,s.box_predictor_3),v=boxPredictionLayer(u,s.box_predictor_4),b=boxPredictionLayer(f,s.box_predictor_5);return{boxPredictions:p.zoF([d.boxPredictionEncoding,h.boxPredictionEncoding,m.boxPredictionEncoding,g.boxPredictionEncoding,v.boxPredictionEncoding,b.boxPredictionEncoding],1),classPredictions:p.zoF([d.classPrediction,h.classPrediction,m.classPrediction,g.classPrediction,v.classPrediction,b.classPrediction],1)}})),d=f.boxPredictions,h=f.classPredictions;return c=t.output_layer,p.lub(function(){var e,t,n,i,o,a,s,u,l,f,m,g,v,b=d.shape[0],y=(e=p.XLQ(p.Gg6(c.extra_dim,[b,1,1]),[-1,4]),t=p.XLQ(d,[-1,4]),s=(n=p.HHK(p.p4s(e,[1,0])),i=[p.luU(n[2],n[0]),p.luU(n[3],n[1])],o=[p.IHx(n[0],p.hiC(i[0],p.iD$(2))),p.IHx(n[1],p.hiC(i[1],p.iD$(2)))],a={sizes:i,centers:o}).sizes,u=a.centers,l=p.HHK(p.p4s(t,[1,0])),f=p.hiC(p.dC7(p.Qqt(p.hiC(l[2],p.iD$(5))),s[0]),p.iD$(2)),m=p.IHx(p.dC7(p.hiC(l[0],p.iD$(10)),s[0]),u[0]),g=p.hiC(p.dC7(p.Qqt(p.hiC(l[3],p.iD$(5))),s[1]),p.iD$(2)),v=p.IHx(p.dC7(p.hiC(l[1],p.iD$(10)),s[1]),u[1]),p.p4s(p.knu([p.luU(m,f),p.luU(v,g),p.IHx(m,f),p.IHx(v,g)]),[1,0]));y=p.XLQ(y,[b,y.shape[0]/b,4]);var _=p.XD2(p.tPi(h,[0,0,1],[-1,-1,-1])),w=p.tPi(_,[0,0,0],[-1,-1,1]);return w=p.XLQ(w,[b,w.shape[1]]),{boxes:p.HHK(y),scores:p.HHK(w)}})})},SsdMobilenetv1.prototype.forward=function(e){return tslib_es6_awaiter(this,void 0,void 0,function(){var t;return tslib_es6_generator(this,function(n){switch(n.label){case 0:return t=this.forwardInput,[4,toNetInput(e)];case 1:return[2,t.apply(this,[n.sent()])]}})})},SsdMobilenetv1.prototype.locateFaces=function(e,t){return void 0===t&&(t={}),tslib_es6_awaiter(this,void 0,void 0,function(){var n,i,o,a,s,c,u,l,f,d,h,p,m,g,v,b,y,x,F,P;return tslib_es6_generator(this,function(A){switch(A.label){case 0:return i=(n=new q(t)).maxResults,o=n.minConfidence,[4,toNetInput(e)];case 1:for(a=A.sent(),c=(s=this.forwardInput(a)).boxes,u=s.scores,l=c[0],f=u[0],d=1;d<c.length;d++)c[d].dispose(),u[d].dispose();return m=(p=Array).from,[4,f.data()];case 2:var T,k,E,S,C,B;return h=m.apply(p,[A.sent()]),T=l,k=i,E=o,S=Math.min(k,T.shape[0]),C=h.map(function(e,t){return{score:e,boxIndex:t}}).filter(function(e){return e.score>E}).sort(function(e,t){return t.score-e.score}),B=[],C.forEach(function(e){if(!(B.length>=S)){for(var t=e.score,n=B.length-1;n>=0;--n){var i=function(e,t,n){var i=e.arraySync(),o=Math.min(i[t][0],i[t][2]),a=Math.min(i[t][1],i[t][3]),s=Math.max(i[t][0],i[t][2]),c=Math.max(i[t][1],i[t][3]),u=Math.min(i[n][0],i[n][2]),l=Math.min(i[n][1],i[n][3]),f=Math.max(i[n][0],i[n][2]),d=Math.max(i[n][1],i[n][3]),h=(s-o)*(c-a),p=(f-u)*(d-l);if(h<=0||p<=0)return 0;var m=Math.max(Math.min(s,f)-Math.max(o,u),0)*Math.max(Math.min(c,d)-Math.max(a,l),0);return m/(h+p-m)}(T,e.boxIndex,B[n]);if(0!==i&&(e.score*=i<=.5?1:0,e.score<=E))break}t===e.score&&B.push(e.boxIndex)}}),g=B,v=a.getReshapedInputDimensions(0),y=(b=a.inputSize)/v.width,x=b/v.height,F=l.arraySync(),P=g.map(function(e){var t=[Math.max(0,F[e][0]),Math.min(1,F[e][2])].map(function(e){return e*x}),n=t[0],i=t[1],o=[Math.max(0,F[e][1]),Math.min(1,F[e][3])].map(function(e){return e*y}),s=o[0],c=o[1];return new _(h[e],new w(s,n,c-s,i-n),{height:a.getInputHeight(0),width:a.getInputWidth(0)})}),l.dispose(),f.dispose(),[2,P]}})})},SsdMobilenetv1.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},SsdMobilenetv1.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=function(e,t){var n=extractWeightEntryFactory(e,t);function extractPointwiseConvParams(e,t,i){return{filters:n(e+"/Conv2d_"+t+"_pointwise/weights",4,i+"/filters"),batch_norm_offset:n(e+"/Conv2d_"+t+"_pointwise/convolution_bn_offset",1,i+"/batch_norm_offset")}}function extractConvPairParams(e){var t="mobilenetv1/conv_"+e,i="MobilenetV1/Conv2d_"+e+"_depthwise",o=t+"/depthwise_conv";return{depthwise_conv:{filters:n(i+"/depthwise_weights",4,o+"/filters"),batch_norm_scale:n(i+"/BatchNorm/gamma",1,o+"/batch_norm_scale"),batch_norm_offset:n(i+"/BatchNorm/beta",1,o+"/batch_norm_offset"),batch_norm_mean:n(i+"/BatchNorm/moving_mean",1,o+"/batch_norm_mean"),batch_norm_variance:n(i+"/BatchNorm/moving_variance",1,o+"/batch_norm_variance")},pointwise_conv:extractPointwiseConvParams("MobilenetV1",e,t+"/pointwise_conv")}}function extractConvParams(e,t){return{filters:n(e+"/weights",4,t+"/filters"),bias:n(e+"/biases",1,t+"/bias")}}function extractBoxPredictorParams(e){return{box_encoding_predictor:extractConvParams("Prediction/BoxPredictor_"+e+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+e+"/box_encoding_predictor"),class_predictor:extractConvParams("Prediction/BoxPredictor_"+e+"/ClassPredictor","prediction_layer/box_predictor_"+e+"/class_predictor")}}return{extractMobilenetV1Params:function(){return{conv_0:extractPointwiseConvParams("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:extractConvPairParams(1),conv_2:extractConvPairParams(2),conv_3:extractConvPairParams(3),conv_4:extractConvPairParams(4),conv_5:extractConvPairParams(5),conv_6:extractConvPairParams(6),conv_7:extractConvPairParams(7),conv_8:extractConvPairParams(8),conv_9:extractConvPairParams(9),conv_10:extractConvPairParams(10),conv_11:extractConvPairParams(11),conv_12:extractConvPairParams(12),conv_13:extractConvPairParams(13)}},extractPredictionLayerParams:function(){return{conv_0:extractPointwiseConvParams("Prediction",0,"prediction_layer/conv_0"),conv_1:extractPointwiseConvParams("Prediction",1,"prediction_layer/conv_1"),conv_2:extractPointwiseConvParams("Prediction",2,"prediction_layer/conv_2"),conv_3:extractPointwiseConvParams("Prediction",3,"prediction_layer/conv_3"),conv_4:extractPointwiseConvParams("Prediction",4,"prediction_layer/conv_4"),conv_5:extractPointwiseConvParams("Prediction",5,"prediction_layer/conv_5"),conv_6:extractPointwiseConvParams("Prediction",6,"prediction_layer/conv_6"),conv_7:extractPointwiseConvParams("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:extractBoxPredictorParams(0),box_predictor_1:extractBoxPredictorParams(1),box_predictor_2:extractBoxPredictorParams(2),box_predictor_3:extractBoxPredictorParams(3),box_predictor_4:extractBoxPredictorParams(4),box_predictor_5:extractBoxPredictorParams(5)}}}}(e,t),i=n.extractMobilenetV1Params,o=n.extractPredictionLayerParams,a=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!isTensor(a,3))throw Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+a);var s={mobilenetv1:i(),prediction_layer:o(),output_layer:{extra_dim:a}};return disposeUnusedWeightTensors(e,t),{params:s,paramMappings:t}}(e)},SsdMobilenetv1.prototype.extractParams=function(e){return function(e){var t=[],n=extractWeightsFactory(e),i=n.extractWeights,o=n.getRemainingWeights,a=function(e,t){function extractConvParams(n,i,o,a,s){var c=p.yXz(e(n*i*o*o),[o,o,n,i]),u=p.RRF(e(i));return t.push({paramPath:a+"/filters"},{paramPath:a+"/"+(s?"batch_norm_offset":"bias")}),{filters:c,bias:u}}function extractPointwiseConvParams(e,t,n,i){var o=extractConvParams(e,t,n,i,!0);return{filters:o.filters,batch_norm_offset:o.bias}}function extractConvPairParams(n,i,o){var a,s,c,u,l,f;return{depthwise_conv:(a=o+"/depthwise_conv",s=p.yXz(e(9*n),[3,3,n,1]),c=p.RRF(e(n)),u=p.RRF(e(n)),l=p.RRF(e(n)),f=p.RRF(e(n)),t.push({paramPath:a+"/filters"},{paramPath:a+"/batch_norm_scale"},{paramPath:a+"/batch_norm_offset"},{paramPath:a+"/batch_norm_mean"},{paramPath:a+"/batch_norm_variance"}),{filters:s,batch_norm_scale:c,batch_norm_offset:u,batch_norm_mean:l,batch_norm_variance:f}),pointwise_conv:extractPointwiseConvParams(n,i,1,o+"/pointwise_conv")}}return{extractMobilenetV1Params:function(){return{conv_0:extractPointwiseConvParams(3,32,3,"mobilenetv1/conv_0"),conv_1:extractConvPairParams(32,64,"mobilenetv1/conv_1"),conv_2:extractConvPairParams(64,128,"mobilenetv1/conv_2"),conv_3:extractConvPairParams(128,128,"mobilenetv1/conv_3"),conv_4:extractConvPairParams(128,256,"mobilenetv1/conv_4"),conv_5:extractConvPairParams(256,256,"mobilenetv1/conv_5"),conv_6:extractConvPairParams(256,512,"mobilenetv1/conv_6"),conv_7:extractConvPairParams(512,512,"mobilenetv1/conv_7"),conv_8:extractConvPairParams(512,512,"mobilenetv1/conv_8"),conv_9:extractConvPairParams(512,512,"mobilenetv1/conv_9"),conv_10:extractConvPairParams(512,512,"mobilenetv1/conv_10"),conv_11:extractConvPairParams(512,512,"mobilenetv1/conv_11"),conv_12:extractConvPairParams(512,1024,"mobilenetv1/conv_12"),conv_13:extractConvPairParams(1024,1024,"mobilenetv1/conv_13")}},extractPredictionLayerParams:function(){return{conv_0:extractPointwiseConvParams(1024,256,1,"prediction_layer/conv_0"),conv_1:extractPointwiseConvParams(256,512,3,"prediction_layer/conv_1"),conv_2:extractPointwiseConvParams(512,128,1,"prediction_layer/conv_2"),conv_3:extractPointwiseConvParams(128,256,3,"prediction_layer/conv_3"),conv_4:extractPointwiseConvParams(256,128,1,"prediction_layer/conv_4"),conv_5:extractPointwiseConvParams(128,256,3,"prediction_layer/conv_5"),conv_6:extractPointwiseConvParams(256,64,1,"prediction_layer/conv_6"),conv_7:extractPointwiseConvParams(64,128,3,"prediction_layer/conv_7"),box_predictor_0:{box_encoding_predictor:extractConvParams(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),class_predictor:extractConvParams(512,9,1,"prediction_layer/box_predictor_0/class_predictor")},box_predictor_1:{box_encoding_predictor:extractConvParams(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),class_predictor:extractConvParams(1024,18,1,"prediction_layer/box_predictor_1/class_predictor")},box_predictor_2:{box_encoding_predictor:extractConvParams(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),class_predictor:extractConvParams(512,18,1,"prediction_layer/box_predictor_2/class_predictor")},box_predictor_3:{box_encoding_predictor:extractConvParams(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),class_predictor:extractConvParams(256,18,1,"prediction_layer/box_predictor_3/class_predictor")},box_predictor_4:{box_encoding_predictor:extractConvParams(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),class_predictor:extractConvParams(256,18,1,"prediction_layer/box_predictor_4/class_predictor")},box_predictor_5:{box_encoding_predictor:extractConvParams(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),class_predictor:extractConvParams(128,18,1,"prediction_layer/box_predictor_5/class_predictor")}}}}}(i,t),s=a.extractMobilenetV1Params,c=a.extractPredictionLayerParams,u=s(),l=c(),f=p.wOQ(i(20472),[1,5118,4]);if(t.push({paramPath:"output_layer/extra_dim"}),0!==o().length)throw Error("weights remaing after extract: "+o().length);return{params:{mobilenetv1:u,prediction_layer:l,output_layer:{extra_dim:f}},paramMappings:t}}(e)},SsdMobilenetv1}(O);__extends(function(){return null!==s&&s.apply(this,arguments)||this},s=$);var X=[new g(.738768,.874946),new g(2.42204,2.65704),new g(4.30971,7.04493),new g(10.246,4.59428),new g(12.6868,11.8741)],K=[new g(1.603231,2.094468),new g(6.041143,7.080126),new g(2.882459,3.518061),new g(4.266906,5.178857),new g(9.041765,10.66308)],J=[117.001,114.697,97.404],isNumber=function(e){return"number"==typeof e};function leaky(e){return p.lub(function(){var t=p.dC7(e,p.iD$(.10000000149011612));return p.IHx(p.UYe(p.luU(e,t)),t)})}function convWithBatchNorm(e,t){return p.lub(function(){var n=p.vku(e,[[0,0],[1,1],[1,1],[0,0]]);return n=p.Tek(n,t.conv.filters,[1,1],"valid"),n=p.luU(n,t.bn.sub),n=p.dC7(n,t.bn.truediv),leaky(n=p.IHx(n,t.conv.bias))})}function depthwiseSeparableConv_depthwiseSeparableConv(e,t){return p.lub(function(){var n=p.vku(e,[[0,0],[1,1],[1,1],[0,0]]);return n=p.U_I(n,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),leaky(n=p.IHx(n,t.bias))})}(c=d||(d={}))[c.XS=224]="XS",c[c.SM=320]="SM",c[c.MD=416]="MD",c[c.LG=608]="LG";var Z=function(){function TinyYolov2Options(e){var t=void 0===e?{}:e,n=t.inputSize,i=t.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=n||416,this._scoreThreshold=i||.5,"number"!=typeof this._inputSize||this._inputSize%32!=0)throw Error(this._name+" - expected inputSize to be a number divisible by 32");if("number"!=typeof this._scoreThreshold||this._scoreThreshold<=0||this._scoreThreshold>=1)throw Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(TinyYolov2Options.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(TinyYolov2Options.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),TinyYolov2Options}(),ee=function(e){function TinyYolov2Base(t){var n=e.call(this,"TinyYolov2")||this;return!function(e){if(!e)throw Error("invalid config: "+e);if("boolean"!=typeof e.withSeparableConvs)throw Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!isNumber(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(function(e){return"string"==typeof e}))throw Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(function(e){return e||{}}).every(function(e){return isNumber(e.x)&&isNumber(e.y)}))throw Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||3!==e.meanRgb.length||!e.meanRgb.every(isNumber)))throw Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}(t),n._config=t,n}return __extends(TinyYolov2Base,e),Object.defineProperty(TinyYolov2Base.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(TinyYolov2Base.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(TinyYolov2Base.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),TinyYolov2Base.prototype.runTinyYolov2=function(e,t){var n=convWithBatchNorm(e,t.conv0);return n=convWithBatchNorm(n=p._sB(n,[2,2],[2,2],"same"),t.conv1),n=convWithBatchNorm(n=p._sB(n,[2,2],[2,2],"same"),t.conv2),n=convWithBatchNorm(n=p._sB(n,[2,2],[2,2],"same"),t.conv3),n=convWithBatchNorm(n=p._sB(n,[2,2],[2,2],"same"),t.conv4),n=convWithBatchNorm(n=p._sB(n,[2,2],[2,2],"same"),t.conv5),n=convWithBatchNorm(n=p._sB(n,[2,2],[1,1],"same"),t.conv6),convLayer(n=convWithBatchNorm(n,t.conv7),t.conv8,"valid",!1)},TinyYolov2Base.prototype.runMobilenet=function(e,t){var n=this.config.isFirstLayerConv2d?leaky(convLayer(e,t.conv0,"valid",!1)):depthwiseSeparableConv_depthwiseSeparableConv(e,t.conv0);return n=depthwiseSeparableConv_depthwiseSeparableConv(n=p._sB(n,[2,2],[2,2],"same"),t.conv1),n=depthwiseSeparableConv_depthwiseSeparableConv(n=p._sB(n,[2,2],[2,2],"same"),t.conv2),n=depthwiseSeparableConv_depthwiseSeparableConv(n=p._sB(n,[2,2],[2,2],"same"),t.conv3),n=depthwiseSeparableConv_depthwiseSeparableConv(n=p._sB(n,[2,2],[2,2],"same"),t.conv4),n=depthwiseSeparableConv_depthwiseSeparableConv(n=p._sB(n,[2,2],[2,2],"same"),t.conv5),n=p._sB(n,[2,2],[1,1],"same"),n=t.conv6?depthwiseSeparableConv_depthwiseSeparableConv(n,t.conv6):n,convLayer(n=t.conv7?depthwiseSeparableConv_depthwiseSeparableConv(n,t.conv7):n,t.conv8,"valid",!1)},TinyYolov2Base.prototype.forwardInput=function(e,t){var n=this,i=this.params;if(!i)throw Error("TinyYolov2 - load model before inference");return p.lub(function(){var o=e.toBatchTensor(t,!1).toFloat();return o=(o=n.config.meanRgb?normalize(o,n.config.meanRgb):o).div(p.iD$(256)),n.config.withSeparableConvs?n.runMobilenet(o,i):n.runTinyYolov2(o,i)})},TinyYolov2Base.prototype.forward=function(e,t){return tslib_es6_awaiter(this,void 0,void 0,function(){var n;return tslib_es6_generator(this,function(i){switch(i.label){case 0:return n=this.forwardInput,[4,toNetInput(e)];case 1:return[4,n.apply(this,[i.sent(),t])];case 2:return[2,i.sent()]}})})},TinyYolov2Base.prototype.detect=function(e,t){return void 0===t&&(t={}),tslib_es6_awaiter(this,void 0,void 0,function(){var n,i,o,a,s,c,u,l,f,d,h,m,g=this;return tslib_es6_generator(this,function(v){switch(v.label){case 0:return i=(n=new Z(t)).inputSize,o=n.scoreThreshold,[4,toNetInput(e)];case 1:return a=v.sent(),[4,this.forwardInput(a,i)];case 2:return s=v.sent(),c=p.lub(function(){return p.HHK(s)[0].expandDims()}),u={width:a.getInputWidth(0),height:a.getInputHeight(0)},[4,this.extractBoxes(c,a.getReshapedInputDimensions(0),o)];case 3:return l=v.sent(),s.dispose(),c.dispose(),f=l.map(function(e){return e.box}),d=l.map(function(e){return e.score}),h=l.map(function(e){return e.classScore}),m=l.map(function(e){return g.config.classes[e.label]}),[2,nonMaxSuppression(f.map(function(e){return e.rescale(i)}),d,this.config.iouThreshold,!0).map(function(e){return new y(d[e],h[e],m[e],f[e],u)})]}})})},TinyYolov2Base.prototype.getDefaultModelName=function(){return""},TinyYolov2Base.prototype.extractParamsFromWeigthMap=function(e){return function(e,t){var n,i=[],o=function(e,t){var n=extractWeightEntryFactory(e,t);function extractConvParams(e){return{filters:n(e+"/filters",4),bias:n(e+"/bias",1)}}return{extractConvParams:extractConvParams,extractConvWithBatchNormParams:function(e){var t;return{conv:extractConvParams(e+"/conv"),bn:{sub:n((t=e+"/bn")+"/sub",1),truediv:n(t+"/truediv",1)}}},extractSeparableConvParams:loadSeparableConvParamsFactory(n)}}(e,i),a=o.extractConvParams,s=o.extractConvWithBatchNormParams,c=o.extractSeparableConvParams;if(t.withSeparableConvs){var u=t.filterSizes&&t.filterSizes.length||9;n={conv0:t.isFirstLayerConv2d?a("conv0"):c("conv0"),conv1:c("conv1"),conv2:c("conv2"),conv3:c("conv3"),conv4:c("conv4"),conv5:c("conv5"),conv6:u>7?c("conv6"):void 0,conv7:u>8?c("conv7"):void 0,conv8:a("conv8")}}else n={conv0:s("conv0"),conv1:s("conv1"),conv2:s("conv2"),conv3:s("conv3"),conv4:s("conv4"),conv5:s("conv5"),conv6:s("conv6"),conv7:s("conv7"),conv8:a("conv8")};return disposeUnusedWeightTensors(e,i),{params:n,paramMappings:i}}(e,this.config)},TinyYolov2Base.prototype.extractParams=function(e){var t=this.config.filterSizes||TinyYolov2Base.DEFAULT_FILTER_SIZES,n=t?t.length:void 0;if(7!==n&&8!==n&&9!==n)throw Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+n+" filterSizes in config");return function(e,t,n,i){var o,a,s=extractWeightsFactory(e),c=s.extractWeights,u=s.getRemainingWeights,l=[],f={extractConvParams:o=extractConvParamsFactory(c,l),extractConvWithBatchNormParams:function(e,t,n){var i,a,s;return{conv:o(e,t,3,n+"/conv"),bn:(i=n+"/bn",a=p.RRF(c(t)),s=p.RRF(c(t)),l.push({paramPath:i+"/sub"},{paramPath:i+"/truediv"}),{sub:a,truediv:s})}},extractSeparableConvParams:extractSeparableConvParamsFactory(c,l)},d=f.extractConvParams,h=f.extractConvWithBatchNormParams,m=f.extractSeparableConvParams;if(t.withSeparableConvs){var g=i[0],v=i[1],b=i[2],y=i[3],_=i[4],w=i[5],x=i[6],F=i[7],P=i[8],A=t.isFirstLayerConv2d?d(g,v,3,"conv0"):m(g,v,"conv0"),T=m(v,b,"conv1"),k=m(b,y,"conv2"),E=m(y,_,"conv3"),S=m(_,w,"conv4"),C=m(w,x,"conv5"),B=F?m(x,F,"conv6"):void 0,D=P?m(F,P,"conv7"):void 0,O=d(P||F||x,5*n,1,"conv8");a={conv0:A,conv1:T,conv2:k,conv3:E,conv4:S,conv5:C,conv6:B,conv7:D,conv8:O}}else{var g=i[0],v=i[1],b=i[2],y=i[3],_=i[4],w=i[5],x=i[6],F=i[7],P=i[8],A=h(g,v,"conv0"),T=h(v,b,"conv1"),k=h(b,y,"conv2"),E=h(y,_,"conv3"),S=h(_,w,"conv4"),C=h(w,x,"conv5"),B=h(x,F,"conv6"),D=h(F,P,"conv7"),O=d(P,5*n,1,"conv8");a={conv0:A,conv1:T,conv2:k,conv3:E,conv4:S,conv5:C,conv6:B,conv7:D,conv8:O}}if(0!==u().length)throw Error("weights remaing after extract: "+u().length);return{params:a,paramMappings:l}}(e,this.config,this.boxEncodingSize,t)},TinyYolov2Base.prototype.extractBoxes=function(e,t,n){return tslib_es6_awaiter(this,void 0,void 0,function(){var i,o,a,s,c,u,l,f,d,h,m,g,v,y,_,w,x,F,P,A,T,k,E,S,C,B,D,O,L,I=this;return tslib_es6_generator(this,function(M){switch(M.label){case 0:return s=(a=Math.max(i=t.width,o=t.height))/i,c=a/o,u=e.shape[1],l=this.config.anchors.length,d=(f=p.lub(function(){var t=e.reshape([u,u,l,I.boxEncodingSize]);return[t.slice([0,0,0,0],[u,u,l,4]),t.slice([0,0,0,4],[u,u,l,1]),I.withClassScores?p.XAC(t.slice([0,0,0,5],[u,u,l,I.config.classes.length]),3):p.iD$(0)]}))[0],h=f[1],m=f[2],g=[],[4,h.array()];case 1:return v=M.sent(),[4,d.array()];case 2:y=M.sent(),_=0,M.label=3;case 3:if(!(_<u))return[3,12];w=0,M.label=4;case 4:if(!(w<u))return[3,11];x=0,M.label=5;case 5:if(!(x<l))return[3,10];if(F=sigmoid(v[_][w][x][0]),!(!n||F>n))return[3,9];if(P=(w+sigmoid(y[_][w][x][0]))/u*s,A=(_+sigmoid(y[_][w][x][1]))/u*c,T=Math.exp(y[_][w][x][2])*this.config.anchors[x].x/u*s,k=Math.exp(y[_][w][x][3])*this.config.anchors[x].y/u*c,E=P-T/2,S=A-k/2,C={row:_,col:w,anchor:x},!this.withClassScores)return[3,7];return[4,this.extractPredictedClass(m,C)];case 6:return L=M.sent(),[3,8];case 7:L={classScore:1,label:0},M.label=8;case 8:D=(B=L).classScore,O=B.label,g.push(__assign({box:new b(E,S,E+T,S+k),score:F,classScore:F*D,label:O},C)),M.label=9;case 9:return x++,[3,5];case 10:return w++,[3,4];case 11:return _++,[3,3];case 12:return d.dispose(),h.dispose(),m.dispose(),[2,g]}})})},TinyYolov2Base.prototype.extractPredictedClass=function(e,t){return tslib_es6_awaiter(this,void 0,void 0,function(){var n,i,o,a;return tslib_es6_generator(this,function(s){switch(s.label){case 0:return n=t.row,i=t.col,o=t.anchor,[4,e.array()];case 1:return a=s.sent(),[2,Array(this.config.classes.length).fill(0).map(function(e,t){return a[n][i][o][t]}).map(function(e,t){return{classScore:e,label:t}}).reduce(function(e,t){return e.classScore>t.classScore?e:t})]}})})},TinyYolov2Base.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],TinyYolov2Base}(O),et=function(e){function TinyYolov2(t){void 0===t&&(t=!0);var n=Object.assign({},{withSeparableConvs:t,iouThreshold:.4,classes:["face"]},t?{anchors:K,meanRgb:J}:{anchors:X,withClassScores:!0});return e.call(this,n)||this}return __extends(TinyYolov2,e),Object.defineProperty(TinyYolov2.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(TinyYolov2.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),TinyYolov2.prototype.locateFaces=function(e,t){return tslib_es6_awaiter(this,void 0,void 0,function(){return tslib_es6_generator(this,function(n){switch(n.label){case 0:return[4,this.detect(e,t)];case 1:return[2,n.sent().map(function(e){return new _(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})})]}})})},TinyYolov2.prototype.getDefaultModelName=function(){return this.withSeparableConvs?"tiny_yolov2_separable_conv_model":"tiny_yolov2_model"},TinyYolov2.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},TinyYolov2}(ee),er=function(e){function TinyFaceDetectorOptions(){var t=null!==e&&e.apply(this,arguments)||this;return t._name="TinyFaceDetectorOptions",t}return __extends(TinyFaceDetectorOptions,e),TinyFaceDetectorOptions}(Z),en=function(){function ComposableTask(){}return ComposableTask.prototype.then=function(e){return tslib_es6_awaiter(this,void 0,void 0,function(){var t;return tslib_es6_generator(this,function(n){switch(n.label){case 0:return t=e,[4,this.run()];case 1:return[2,t.apply(void 0,[n.sent()])]}})})},ComposableTask.prototype.run=function(){return tslib_es6_awaiter(this,void 0,void 0,function(){return tslib_es6_generator(this,function(e){throw Error("ComposableTask - run is not implemented")})})},ComposableTask}();function extendWithFaceDescriptor(e,t){return Object.assign({},e,{descriptor:t})}function extractAllFacesAndComputeResults(e,t,n,i,o){return void 0===o&&(o=function(e){return e.alignedRect}),tslib_es6_awaiter(this,void 0,void 0,function(){var a,s,c,u,l;return tslib_es6_generator(this,function(f){switch(f.label){case 0:if(a=e.map(function(e){return WithFaceLandmarks_isWithFaceLandmarks(e)?o(e):e.detection}),c=i)return[3,5];if(!(t instanceof p.esB))return[3,2];return[4,extractFaceTensors(t,a)];case 1:return u=f.sent(),[3,4];case 2:return[4,extractFaces(t,a)];case 3:u=f.sent(),f.label=4;case 4:c=u,f.label=5;case 5:return[4,n(s=c)];case 6:return l=f.sent(),s.forEach(function(e){return e instanceof p.esB&&e.dispose()}),[2,l]}})})}function extractSingleFaceAndComputeResult(e,t,n,i,o){return tslib_es6_awaiter(this,void 0,void 0,function(){var a=this;return tslib_es6_generator(this,function(s){return[2,extractAllFacesAndComputeResults([e],t,function(e){return tslib_es6_awaiter(a,void 0,void 0,function(){return tslib_es6_generator(this,function(t){return[2,n(e[0])]})})},i,o)]})})}function getSizesForScale(e,t){return{height:Math.floor(t[0]*e),width:Math.floor(t[1]*e)}}var ei=function(e){function MtcnnBox(t,n,i,o){return e.call(this,{left:t,top:n,right:i,bottom:o},!0)||this}return __extends(MtcnnBox,e),MtcnnBox}(v);function normalize_normalize(e){return p.lub(function(){return p.dC7(p.luU(e,p.iD$(127.5)),p.iD$(.0078125))})}function prelu(e,t){return p.lub(function(){return p.IHx(p.UYe(e),p.dC7(t,p.W76(p.UYe(p.W76(e)))))})}function sharedLayer(e,t,n){return void 0===n&&(n=!1),p.lub(function(){var i=convLayer(e,t.conv1,"valid");return i=prelu(i,t.prelu1_alpha),i=prelu(i=convLayer(i=p._sB(i,n?[2,2]:[3,3],[2,2],"same"),t.conv2,"valid"),t.prelu2_alpha),i=prelu(i=convLayer(i=n?i:p._sB(i,[3,3],[2,2],"valid"),t.conv3,"valid"),t.prelu3_alpha)})}function extractImagePatches(e,t,n){var i=n.width,o=n.height;return tslib_es6_awaiter(this,void 0,void 0,function(){var n,a,s,c=this;return tslib_es6_generator(this,function(u){switch(u.label){case 0:return n=getContext2dOrThrow(e),[4,Promise.all(t.map(function(t){return tslib_es6_awaiter(c,void 0,void 0,function(){var i,o,a,s,c,u,l,f;return tslib_es6_generator(this,function(d){return o=(i=t.padAtBorders(e.height,e.width)).y,a=i.ey,s=i.x,c=i.ex,u=s-1,l=o-1,f=n.getImageData(u,l,c-u,a-l),[2,S.isNodejs()?createCanvasFromMedia(f):createImageBitmap(f)]})})}))];case 1:return a=u.sent(),s=[],a.forEach(function(e){var t=getContext2dOrThrow(createCanvas({width:i,height:o}));t.drawImage(e,0,0,i,o);for(var n=t.getImageData(0,0,i,o).data,a=[],c=0;c<n.length;c+=4)a.push(n[c+2]),a.push(n[c+1]),a.push(n[c]);s.push(a)}),[2,s.map(function(e){return p.lub(function(){return normalize_normalize(p.p4s(p.yXz(e,[1,i,o,3]),[0,2,1,3]).toFloat())})})]}})})}var eo=function(e){function Mtcnn(){return e.call(this,"Mtcnn")||this}return __extends(Mtcnn,e),Mtcnn.prototype.load=function(t){return tslib_es6_awaiter(this,void 0,void 0,function(){return tslib_es6_generator(this,function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.load.call(this,t)]})})},Mtcnn.prototype.loadFromDisk=function(t){return tslib_es6_awaiter(this,void 0,void 0,function(){return tslib_es6_generator(this,function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.loadFromDisk.call(this,t)]})})},Mtcnn.prototype.forwardInput=function(e,t){return void 0===t&&(t={}),tslib_es6_awaiter(this,void 0,void 0,function(){var n,i,o,a,s,c,u,l,f,d,h,m,v,y,x,P,A,T,k,E;return tslib_es6_generator(this,function(S){switch(S.label){case 0:if(!(n=this.params))throw Error("Mtcnn - load model before inference");if(!(i=e.canvases[0]))throw Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return o={},a=Date.now(),s=p.lub(function(){var e;return e=p.dt4(p.Xhn.fromPixels(i)).toFloat(),p.lub(function(){return p.knu(p.HHK(e,3).reverse(),3)})}),c=function(e){return s.dispose(),o.total=Date.now()-a,e},l=(u=s.shape.slice(1))[0],f=u[1],h=(d=new Q(t)).minFaceSize,m=d.scaleFactor,v=d.maxNumScales,y=d.scoreThresholds,x=(d.scaleSteps||function(e,t,n){for(var i=n[0],o=n[1],a=12/e,s=[],c=Math.min(i,o)*a,u=0;c>=12;)s.push(a*Math.pow(t,u)),c*=t,u+=1;return s}(h,m,[l,f])).filter(function(e){var t=getSizesForScale(e,[l,f]);return Math.min(t.width,t.height)>12}).slice(0,v),o.scales=x,o.pyramid=x.map(function(e){return getSizesForScale(e,[l,f])}),P=Date.now(),[4,function(e,t,n,i,o){o.stage1=[];var a=t.map(function(t){return p.lub(function(){var n={scale:t},o=p.lub(function(){var n=getSizesForScale(t,e.shape.slice(1)),i=n.height,o=n.width,a=normalize_normalize(p.BHj.resizeBilinear(e,[i,o]));return p.p4s(a,[0,2,1,3])}),a=Date.now(),s=p.lub(function(){var e=sharedLayer(o,i,!0),t=convLayer(e,i.conv4_1,"valid"),n=p.dt4(p.Fp7(t,3),3);return{prob:p.XAC(p.luU(t,n),3),regions:convLayer(e,i.conv4_2,"valid")}}),c=s.prob,u=s.regions;return n.pnet=Date.now()-a,{scoresTensor:p.HHK(p.HHK(c,3)[1])[0],regionsTensor:p.HHK(u)[0],scale:t,statsForScale:n}})}).map(function(e){var t=e.scoresTensor,i=e.regionsTensor,a=e.scale,s=e.statsForScale,c=function(e,t,n,i){for(var o=[],a=e.arraySync(),s=0;s<e.shape[0];s++)for(var c=0;c<e.shape[1];c++)a[s][c]>=i&&o.push(new g(c,s));return o.map(function(e){var i=new b(Math.round((2*e.y+1)/n),Math.round((2*e.x+1)/n),Math.round((2*e.y+12)/n),Math.round((2*e.x+12)/n)),o=a[e.y][e.x],s=t.arraySync();return{cell:i,score:o,region:new ei(s[e.y][e.x][0],s[e.y][e.x][1],s[e.y][e.x][2],s[e.y][e.x][3])}})}(t,i,a,n);if(t.dispose(),i.dispose(),!c.length)return o.stage1.push(s),[];var u=Date.now(),l=nonMaxSuppression(c.map(function(e){return e.cell}),c.map(function(e){return e.score}),.5);return s.nms=Date.now()-u,s.numBoxes=l.length,o.stage1.push(s),l.map(function(e){return c[e]})}).reduce(function(e,t){return e.concat(t)},[]),s=[],c=[];if(a.length>0){var u=Date.now(),l=nonMaxSuppression(a.map(function(e){return e.cell}),a.map(function(e){return e.score}),.7);o.stage1_nms=Date.now()-u,c=l.map(function(e){return a[e].score}),s=l.map(function(e){return a[e]}).map(function(e){var t=e.cell,n=e.region;return new b(t.left+n.left*t.width,t.top+n.top*t.height,t.right+n.right*t.width,t.bottom+n.bottom*t.height).toSquare().round()})}return{boxes:s,scores:c}}(s,x,y[0],n.pnet,o)];case 1:if(A=S.sent(),o.total_stage1=Date.now()-P,!A.boxes.length)return[2,c({results:[],stats:o})];return o.stage2_numInputBoxes=A.boxes.length,P=Date.now(),[4,function(e,t,n,i,o){return tslib_es6_awaiter(this,void 0,void 0,function(){var a,s,c,u,l,f,d,h,m,g,v,b,y,_;return tslib_es6_generator(this,function(w){switch(w.label){case 0:return a=Date.now(),[4,extractImagePatches(e,t,{width:24,height:24})];case 1:return s=w.sent(),o.stage2_extractImagePatches=Date.now()-a,a=Date.now(),c=s.map(function(e){var t=p.lub(function(){var t=sharedLayer(e,i),n=prelu(fullyConnectedLayer(p.XLQ(t,[t.shape[0],i.fc1.weights.shape[0]]),i.fc1),i.prelu4_alpha),o=fullyConnectedLayer(n,i.fc2_1),a=p.dt4(p.Fp7(o,1),1),s=p.XAC(p.luU(o,a),1),c=fullyConnectedLayer(n,i.fc2_2);return{scores:p.HHK(s,1)[1],regions:c}});return e.dispose(),t}),o.stage2_rnet=Date.now()-a,u=c.length>1?p.zoF(c.map(function(e){return e.scores})):c[0].scores,d=(f=Array).from,[4,u.data()];case 2:return l=d.apply(f,[w.sent()]),u.dispose(),m=(h=l.map(function(e,t){return{score:e,idx:t}}).filter(function(e){return e.score>n}).map(function(e){return e.idx})).map(function(e){return t[e]}),g=h.map(function(e){return l[e]}),v=[],b=[],m.length>0&&(a=Date.now(),y=nonMaxSuppression(m,g,.7),o.stage2_nms=Date.now()-a,_=y.map(function(e){var t=c[h[e]].regions.arraySync();return new ei(t[0][0],t[0][1],t[0][2],t[0][3])}),b=y.map(function(e){return g[e]}),v=y.map(function(e,t){return m[e].calibrate(_[t])})),c.forEach(function(e){e.regions.dispose(),e.scores.dispose()}),[2,{boxes:v,scores:b}]}})})}(i,A.boxes,y[1],n.rnet,o)];case 2:if(T=S.sent(),o.total_stage2=Date.now()-P,!T.boxes.length)return[2,c({results:[],stats:o})];return o.stage3_numInputBoxes=T.boxes.length,P=Date.now(),[4,function(e,t,n,i,o){return tslib_es6_awaiter(this,void 0,void 0,function(){var a,s,c,u,l,f,d,h,m,v,b,y,_,w,x;return tslib_es6_generator(this,function(F){switch(F.label){case 0:return a=Date.now(),[4,extractImagePatches(e,t,{width:48,height:48})];case 1:return s=F.sent(),o.stage3_extractImagePatches=Date.now()-a,a=Date.now(),c=s.map(function(e){var t=p.lub(function(){var t=sharedLayer(e,i);t=prelu(t=convLayer(t=p._sB(t,[2,2],[2,2],"same"),i.conv4,"valid"),i.prelu4_alpha);var n=prelu(fullyConnectedLayer(p.XLQ(t,[t.shape[0],i.fc1.weights.shape[0]]),i.fc1),i.prelu5_alpha),o=fullyConnectedLayer(n,i.fc2_1),a=p.dt4(p.Fp7(o,1),1),s=p.XAC(p.luU(o,a),1),c=fullyConnectedLayer(n,i.fc2_2),u=fullyConnectedLayer(n,i.fc2_3);return{scores:p.HHK(s,1)[1],regions:c,points:u}});return e.dispose(),t}),o.stage3_onet=Date.now()-a,u=c.length>1?p.zoF(c.map(function(e){return e.scores})):c[0].scores,d=(f=Array).from,[4,u.data()];case 2:return l=d.apply(f,[F.sent()]),u.dispose(),m=(h=l.map(function(e,t){return{score:e,idx:t}}).filter(function(e){return e.score>n}).map(function(e){return e.idx})).map(function(e){var t=c[e].regions.arraySync();return new ei(t[0][0],t[0][1],t[0][2],t[0][3])}),v=h.map(function(e,n){return t[e].calibrate(m[n])}),b=h.map(function(e){return l[e]}),y=[],_=[],w=[],v.length>0&&(a=Date.now(),x=nonMaxSuppression(v,b,.7,!1),o.stage3_nms=Date.now()-a,y=x.map(function(e){return v[e]}),_=x.map(function(e){return b[e]}),w=x.map(function(e,t){return[,,,,,].fill(0).map(function(n,i){var o=c[e].points.arraySync();return new g(o[0][i]*(y[t].width+1)+y[t].left,o[0][i+5]*(y[t].height+1)+y[t].top)})})),c.forEach(function(e){e.regions.dispose(),e.scores.dispose(),e.points.dispose()}),[2,{boxes:y,scores:_,points:w}]}})})}(i,T.boxes,y[2],n.onet,o)];case 3:return k=S.sent(),o.total_stage3=Date.now()-P,E=k.boxes.map(function(e,t){return WithFaceLandmarks_extendWithFaceLandmarks(WithFaceDetection_extendWithFaceDetection({},new _(k.scores[t],new w(e.left/f,e.top/l,e.width/f,e.height/l),{height:l,width:f})),new F(k.points[t].map(function(t){return t.sub(new g(e.left,e.top)).div(new g(e.width,e.height))}),{width:e.width,height:e.height}))}),[2,c({results:E,stats:o})]}})})},Mtcnn.prototype.forward=function(e,t){return void 0===t&&(t={}),tslib_es6_awaiter(this,void 0,void 0,function(){var n;return tslib_es6_generator(this,function(i){switch(i.label){case 0:return n=this.forwardInput,[4,toNetInput(e)];case 1:return[4,n.apply(this,[i.sent(),t])];case 2:return[2,i.sent().results]}})})},Mtcnn.prototype.forwardWithStats=function(e,t){return void 0===t&&(t={}),tslib_es6_awaiter(this,void 0,void 0,function(){var n;return tslib_es6_generator(this,function(i){switch(i.label){case 0:return n=this.forwardInput,[4,toNetInput(e)];case 1:return[2,n.apply(this,[i.sent(),t])]}})})},Mtcnn.prototype.getDefaultModelName=function(){return"mtcnn_model"},Mtcnn.prototype.extractParamsFromWeigthMap=function(e){var t,n,i,o,a,s,c,u;return i=(n=function(e,t){var n=extractWeightEntryFactory(e,t);function extractConvParams(e){return{filters:n(e+"/weights",4,e+"/filters"),bias:n(e+"/bias",1)}}function extractFCParams(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}function extractSharedParams(e){return{conv1:extractConvParams(e+"/conv1"),prelu1_alpha:n(e+"/prelu1_alpha",1),conv2:extractConvParams(e+"/conv2"),prelu2_alpha:n(e+"/prelu2_alpha",1),conv3:extractConvParams(e+"/conv3"),prelu3_alpha:n(e+"/prelu3_alpha",1)}}return{extractPNetParams:function(){var e=extractSharedParams("pnet"),t=extractConvParams("pnet/conv4_1"),n=extractConvParams("pnet/conv4_2");return __assign(__assign({},e),{conv4_1:t,conv4_2:n})},extractRNetParams:function(){var e=extractSharedParams("rnet"),t=extractFCParams("rnet/fc1"),i=n("rnet/prelu4_alpha",1),o=extractFCParams("rnet/fc2_1"),a=extractFCParams("rnet/fc2_2");return __assign(__assign({},e),{fc1:t,prelu4_alpha:i,fc2_1:o,fc2_2:a})},extractONetParams:function(){var e=extractSharedParams("onet"),t=extractConvParams("onet/conv4"),i=n("onet/prelu4_alpha",1),o=extractFCParams("onet/fc1"),a=n("onet/prelu5_alpha",1),s=extractFCParams("onet/fc2_1"),c=extractFCParams("onet/fc2_2"),u=extractFCParams("onet/fc2_3");return __assign(__assign({},e),{conv4:t,prelu4_alpha:i,fc1:o,prelu5_alpha:a,fc2_1:s,fc2_2:c,fc2_3:u})}}}(e,t=[])).extractPNetParams,o=n.extractRNetParams,a=n.extractONetParams,s=i(),c=o(),u=a(),disposeUnusedWeightTensors(e,t),{params:{pnet:s,rnet:c,onet:u},paramMappings:t}},Mtcnn.prototype.extractParams=function(e){return function(e){var t=extractWeightsFactory(e),n=t.extractWeights,i=t.getRemainingWeights,o=[],a=function(e,t){var n=extractConvParamsFactory(e,t),i=extractFCParamsFactory(e,t);function extractPReluParams(n,i){var o=p.RRF(e(n));return t.push({paramPath:i}),o}function extractSharedParams(e,t,i){return void 0===i&&(i=!1),{conv1:n(e[0],e[1],3,t+"/conv1"),prelu1_alpha:extractPReluParams(e[1],t+"/prelu1_alpha"),conv2:n(e[1],e[2],3,t+"/conv2"),prelu2_alpha:extractPReluParams(e[2],t+"/prelu2_alpha"),conv3:n(e[2],e[3],i?2:3,t+"/conv3"),prelu3_alpha:extractPReluParams(e[3],t+"/prelu3_alpha")}}return{extractPNetParams:function(){var e=extractSharedParams([3,10,16,32],"pnet"),t=n(32,2,1,"pnet/conv4_1"),i=n(32,4,1,"pnet/conv4_2");return __assign(__assign({},e),{conv4_1:t,conv4_2:i})},extractRNetParams:function(){var e=extractSharedParams([3,28,48,64],"rnet",!0),t=i(576,128,"rnet/fc1"),n=extractPReluParams(128,"rnet/prelu4_alpha"),o=i(128,2,"rnet/fc2_1"),a=i(128,4,"rnet/fc2_2");return __assign(__assign({},e),{fc1:t,prelu4_alpha:n,fc2_1:o,fc2_2:a})},extractONetParams:function(){var e=extractSharedParams([3,32,64,64],"onet"),t=n(64,128,2,"onet/conv4"),o=extractPReluParams(128,"onet/prelu4_alpha"),a=i(1152,256,"onet/fc1"),s=extractPReluParams(256,"onet/prelu5_alpha"),c=i(256,2,"onet/fc2_1"),u=i(256,4,"onet/fc2_2"),l=i(256,10,"onet/fc2_3");return __assign(__assign({},e),{conv4:t,prelu4_alpha:o,fc1:a,prelu5_alpha:s,fc2_1:c,fc2_2:u,fc2_3:l})}}}(n,o),s=a.extractPNetParams,c=a.extractRNetParams,u=a.extractONetParams,l=s(),f=c(),d=u();if(0!==i().length)throw Error("weights remaing after extract: "+i().length);return{params:{pnet:l,rnet:f,onet:d},paramMappings:o}}(e)},Mtcnn}(O),ea=[new g(1.603231,2.094468),new g(6.041143,7.080126),new g(2.882459,3.518061),new g(4.266906,5.178857),new g(9.041765,10.66308)],es=[117.001,114.697,97.404],ec=function(e){function TinyFaceDetector(){return e.call(this,{withSeparableConvs:!0,iouThreshold:.4,classes:["face"],anchors:ea,meanRgb:es,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]})||this}return __extends(TinyFaceDetector,e),Object.defineProperty(TinyFaceDetector.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),TinyFaceDetector.prototype.locateFaces=function(e,t){return tslib_es6_awaiter(this,void 0,void 0,function(){return tslib_es6_generator(this,function(n){switch(n.label){case 0:return[4,this.detect(e,t)];case 1:return[2,n.sent().map(function(e){return new _(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})})]}})})},TinyFaceDetector.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},TinyFaceDetector.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},TinyFaceDetector}(ee),eu={ssdMobilenetv1:new $,tinyFaceDetector:new ec,tinyYolov2:new et,mtcnn:new eo,faceLandmark68Net:new z,faceLandmark68TinyNet:new G,faceRecognitionNet:new Y,faceExpressionNet:new R,ageGenderNet:new W};function extendWithAge(e,t){return Object.assign({},e,{age:t})}var el=function(e){function PredictFaceExpressionsTaskBase(t,n,i){var o=e.call(this)||this;return o.parentTask=t,o.input=n,o.extractedFaces=i,o}return __extends(PredictFaceExpressionsTaskBase,e),PredictFaceExpressionsTaskBase}(en),ef=function(e){function PredictAllFaceExpressionsTask(){return null!==e&&e.apply(this,arguments)||this}return __extends(PredictAllFaceExpressionsTask,e),PredictAllFaceExpressionsTask.prototype.run=function(){return tslib_es6_awaiter(this,void 0,void 0,function(){var e,t,n=this;return tslib_es6_generator(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return[4,extractAllFacesAndComputeResults(e=i.sent(),this.input,function(e){return tslib_es6_awaiter(n,void 0,void 0,function(){return tslib_es6_generator(this,function(t){switch(t.label){case 0:return[4,Promise.all(e.map(function(e){return eu.faceExpressionNet.predictExpressions(e)}))];case 1:return[2,t.sent()]}})})},this.extractedFaces)];case 2:return t=i.sent(),[2,e.map(function(e,n){return extendWithFaceExpressions(e,t[n])})]}})})},PredictAllFaceExpressionsTask.prototype.withAgeAndGender=function(){return new eg(this,this.input)},PredictAllFaceExpressionsTask}(el),ed=function(e){function PredictSingleFaceExpressionsTask(){return null!==e&&e.apply(this,arguments)||this}return __extends(PredictSingleFaceExpressionsTask,e),PredictSingleFaceExpressionsTask.prototype.run=function(){return tslib_es6_awaiter(this,void 0,void 0,function(){var e,t;return tslib_es6_generator(this,function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:if(!(e=n.sent()))return[2];return[4,extractSingleFaceAndComputeResult(e,this.input,function(e){return eu.faceExpressionNet.predictExpressions(e)},this.extractedFaces)];case 2:return t=n.sent(),[2,extendWithFaceExpressions(e,t)]}})})},PredictSingleFaceExpressionsTask.prototype.withAgeAndGender=function(){return new ev(this,this.input)},PredictSingleFaceExpressionsTask}(el),eh=function(e){function PredictAllFaceExpressionsWithFaceAlignmentTask(){return null!==e&&e.apply(this,arguments)||this}return __extends(PredictAllFaceExpressionsWithFaceAlignmentTask,e),PredictAllFaceExpressionsWithFaceAlignmentTask.prototype.withAgeAndGender=function(){return new eb(this,this.input)},PredictAllFaceExpressionsWithFaceAlignmentTask.prototype.withFaceDescriptors=function(){return new ew(this,this.input)},PredictAllFaceExpressionsWithFaceAlignmentTask}(ef),ep=function(e){function PredictSingleFaceExpressionsWithFaceAlignmentTask(){return null!==e&&e.apply(this,arguments)||this}return __extends(PredictSingleFaceExpressionsWithFaceAlignmentTask,e),PredictSingleFaceExpressionsWithFaceAlignmentTask.prototype.withAgeAndGender=function(){return new ey(this,this.input)},PredictSingleFaceExpressionsWithFaceAlignmentTask.prototype.withFaceDescriptor=function(){return new ex(this,this.input)},PredictSingleFaceExpressionsWithFaceAlignmentTask}(ed),em=function(e){function PredictAgeAndGenderTaskBase(t,n,i){var o=e.call(this)||this;return o.parentTask=t,o.input=n,o.extractedFaces=i,o}return __extends(PredictAgeAndGenderTaskBase,e),PredictAgeAndGenderTaskBase}(en),eg=function(e){function PredictAllAgeAndGenderTask(){return null!==e&&e.apply(this,arguments)||this}return __extends(PredictAllAgeAndGenderTask,e),PredictAllAgeAndGenderTask.prototype.run=function(){return tslib_es6_awaiter(this,void 0,void 0,function(){var e,t,n=this;return tslib_es6_generator(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return[4,extractAllFacesAndComputeResults(e=i.sent(),this.input,function(e){return tslib_es6_awaiter(n,void 0,void 0,function(){return tslib_es6_generator(this,function(t){switch(t.label){case 0:return[4,Promise.all(e.map(function(e){return eu.ageGenderNet.predictAgeAndGender(e)}))];case 1:return[2,t.sent()]}})})},this.extractedFaces)];case 2:return t=i.sent(),[2,e.map(function(e,n){var i=t[n],o=i.age;return extendWithAge(extendWithGender(e,i.gender,i.genderProbability),o)})]}})})},PredictAllAgeAndGenderTask.prototype.withFaceExpressions=function(){return new ef(this,this.input)},PredictAllAgeAndGenderTask}(em),ev=function(e){function PredictSingleAgeAndGenderTask(){return null!==e&&e.apply(this,arguments)||this}return __extends(PredictSingleAgeAndGenderTask,e),PredictSingleAgeAndGenderTask.prototype.run=function(){return tslib_es6_awaiter(this,void 0,void 0,function(){var e,t,n,i,o;return tslib_es6_generator(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:if(!(e=a.sent()))return[2];return[4,extractSingleFaceAndComputeResult(e,this.input,function(e){return eu.ageGenderNet.predictAgeAndGender(e)},this.extractedFaces)];case 2:return n=(t=a.sent()).age,i=t.gender,o=t.genderProbability,[2,extendWithAge(extendWithGender(e,i,o),n)]}})})},PredictSingleAgeAndGenderTask.prototype.withFaceExpressions=function(){return new ed(this,this.input)},PredictSingleAgeAndGenderTask}(em),eb=function(e){function PredictAllAgeAndGenderWithFaceAlignmentTask(){return null!==e&&e.apply(this,arguments)||this}return __extends(PredictAllAgeAndGenderWithFaceAlignmentTask,e),PredictAllAgeAndGenderWithFaceAlignmentTask.prototype.withFaceExpressions=function(){return new eh(this,this.input)},PredictAllAgeAndGenderWithFaceAlignmentTask.prototype.withFaceDescriptors=function(){return new ew(this,this.input)},PredictAllAgeAndGenderWithFaceAlignmentTask}(eg),ey=function(e){function PredictSingleAgeAndGenderWithFaceAlignmentTask(){return null!==e&&e.apply(this,arguments)||this}return __extends(PredictSingleAgeAndGenderWithFaceAlignmentTask,e),PredictSingleAgeAndGenderWithFaceAlignmentTask.prototype.withFaceExpressions=function(){return new ep(this,this.input)},PredictSingleAgeAndGenderWithFaceAlignmentTask.prototype.withFaceDescriptor=function(){return new ex(this,this.input)},PredictSingleAgeAndGenderWithFaceAlignmentTask}(ev),e_=function(e){function ComputeFaceDescriptorsTaskBase(t,n){var i=e.call(this)||this;return i.parentTask=t,i.input=n,i}return __extends(ComputeFaceDescriptorsTaskBase,e),ComputeFaceDescriptorsTaskBase}(en),ew=function(e){function ComputeAllFaceDescriptorsTask(){return null!==e&&e.apply(this,arguments)||this}return __extends(ComputeAllFaceDescriptorsTask,e),ComputeAllFaceDescriptorsTask.prototype.run=function(){return tslib_es6_awaiter(this,void 0,void 0,function(){var e;return tslib_es6_generator(this,function(t){switch(t.label){case 0:return[4,this.parentTask];case 1:return[4,extractAllFacesAndComputeResults(e=t.sent(),this.input,function(e){return Promise.all(e.map(function(e){return eu.faceRecognitionNet.computeFaceDescriptor(e)}))},null,function(e){return e.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return[2,t.sent().map(function(t,n){return extendWithFaceDescriptor(e[n],t)})]}})})},ComputeAllFaceDescriptorsTask.prototype.withFaceExpressions=function(){return new eh(this,this.input)},ComputeAllFaceDescriptorsTask.prototype.withAgeAndGender=function(){return new eb(this,this.input)},ComputeAllFaceDescriptorsTask}(e_),ex=function(e){function ComputeSingleFaceDescriptorTask(){return null!==e&&e.apply(this,arguments)||this}return __extends(ComputeSingleFaceDescriptorTask,e),ComputeSingleFaceDescriptorTask.prototype.run=function(){return tslib_es6_awaiter(this,void 0,void 0,function(){var e,t;return tslib_es6_generator(this,function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:if(!(e=n.sent()))return[2];return[4,extractSingleFaceAndComputeResult(e,this.input,function(e){return eu.faceRecognitionNet.computeFaceDescriptor(e)},null,function(e){return e.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return t=n.sent(),[2,extendWithFaceDescriptor(e,t)]}})})},ComputeSingleFaceDescriptorTask.prototype.withFaceExpressions=function(){return new ep(this,this.input)},ComputeSingleFaceDescriptorTask.prototype.withAgeAndGender=function(){return new ey(this,this.input)},ComputeSingleFaceDescriptorTask}(e_),eF=function(e){function DetectFaceLandmarksTaskBase(t,n,i){var o=e.call(this)||this;return o.parentTask=t,o.input=n,o.useTinyLandmarkNet=i,o}return __extends(DetectFaceLandmarksTaskBase,e),Object.defineProperty(DetectFaceLandmarksTaskBase.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?eu.faceLandmark68TinyNet:eu.faceLandmark68Net},enumerable:!0,configurable:!0}),DetectFaceLandmarksTaskBase}(en),eP=function(e){function DetectAllFaceLandmarksTask(){return null!==e&&e.apply(this,arguments)||this}return __extends(DetectAllFaceLandmarksTask,e),DetectAllFaceLandmarksTask.prototype.run=function(){return tslib_es6_awaiter(this,void 0,void 0,function(){var e,t,n,i,o,a=this;return tslib_es6_generator(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:if(t=(e=s.sent()).map(function(e){return e.detection}),!(this.input instanceof p.esB))return[3,3];return[4,extractFaceTensors(this.input,t)];case 2:return i=s.sent(),[3,5];case 3:return[4,extractFaces(this.input,t)];case 4:i=s.sent(),s.label=5;case 5:return[4,Promise.all((n=i).map(function(e){return a.landmarkNet.detectLandmarks(e)}))];case 6:return o=s.sent(),n.forEach(function(e){return e instanceof p.esB&&e.dispose()}),[2,e.map(function(e,t){return WithFaceLandmarks_extendWithFaceLandmarks(e,o[t])})]}})})},DetectAllFaceLandmarksTask.prototype.withFaceExpressions=function(){return new eh(this,this.input)},DetectAllFaceLandmarksTask.prototype.withAgeAndGender=function(){return new eb(this,this.input)},DetectAllFaceLandmarksTask.prototype.withFaceDescriptors=function(){return new ew(this,this.input)},DetectAllFaceLandmarksTask}(eF),eA=function(e){function DetectSingleFaceLandmarksTask(){return null!==e&&e.apply(this,arguments)||this}return __extends(DetectSingleFaceLandmarksTask,e),DetectSingleFaceLandmarksTask.prototype.run=function(){return tslib_es6_awaiter(this,void 0,void 0,function(){var e,t,n,i,o;return tslib_es6_generator(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:if(!(e=a.sent()))return[2];if(t=e.detection,!(this.input instanceof p.esB))return[3,3];return[4,extractFaceTensors(this.input,[t])];case 2:return i=a.sent(),[3,5];case 3:return[4,extractFaces(this.input,[t])];case 4:i=a.sent(),a.label=5;case 5:return n=i,[4,this.landmarkNet.detectLandmarks(n[0])];case 6:return o=a.sent(),n.forEach(function(e){return e instanceof p.esB&&e.dispose()}),[2,WithFaceLandmarks_extendWithFaceLandmarks(e,o)]}})})},DetectSingleFaceLandmarksTask.prototype.withFaceExpressions=function(){return new ep(this,this.input)},DetectSingleFaceLandmarksTask.prototype.withAgeAndGender=function(){return new ey(this,this.input)},DetectSingleFaceLandmarksTask.prototype.withFaceDescriptor=function(){return new ex(this,this.input)},DetectSingleFaceLandmarksTask}(eF),eT=function(e){function DetectFacesTaskBase(t,n){void 0===n&&(n=new q);var i=e.call(this)||this;return i.input=t,i.options=n,i}return __extends(DetectFacesTaskBase,e),DetectFacesTaskBase}(en),ek=function(e){function DetectAllFacesTask(){return null!==e&&e.apply(this,arguments)||this}return __extends(DetectAllFacesTask,e),DetectAllFacesTask.prototype.run=function(){return tslib_es6_awaiter(this,void 0,void 0,function(){var e,t,n,i;return tslib_es6_generator(this,function(o){switch(o.label){case 0:if(e=this,t=e.input,!((n=e.options)instanceof Q))return[3,2];return[4,eu.mtcnn.forward(t,n)];case 1:return[2,o.sent().map(function(e){return e.detection})];case 2:if(!(i=n instanceof er?function(e){return eu.tinyFaceDetector.locateFaces(e,n)}:n instanceof q?function(e){return eu.ssdMobilenetv1.locateFaces(e,n)}:n instanceof Z?function(e){return eu.tinyYolov2.locateFaces(e,n)}:null))throw Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,i(t)]}})})},DetectAllFacesTask.prototype.runAndExtendWithFaceDetections=function(){var e=this;return new Promise(function(t){return tslib_es6_awaiter(e,void 0,void 0,function(){return tslib_es6_generator(this,function(e){switch(e.label){case 0:return[4,this.run()];case 1:return[2,t(e.sent().map(function(e){return WithFaceDetection_extendWithFaceDetection({},e)}))]}})})})},DetectAllFacesTask.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new eP(this.runAndExtendWithFaceDetections(),this.input,e)},DetectAllFacesTask.prototype.withFaceExpressions=function(){return new ef(this.runAndExtendWithFaceDetections(),this.input)},DetectAllFacesTask.prototype.withAgeAndGender=function(){return new eg(this.runAndExtendWithFaceDetections(),this.input)},DetectAllFacesTask}(eT);function detectFaces_detectAllFaces(e,t){return void 0===t&&(t=new q),new ek(e,t)}!function(e){function DetectSingleFaceTask(){return null!==e&&e.apply(this,arguments)||this}__extends(DetectSingleFaceTask,e),DetectSingleFaceTask.prototype.run=function(){return tslib_es6_awaiter(this,void 0,void 0,function(){var e,t;return tslib_es6_generator(this,function(n){switch(n.label){case 0:return[4,new ek(this.input,this.options)];case 1:return t=(e=n.sent())[0],e.forEach(function(e){e.score>t.score&&(t=e)}),[2,t]}})})},DetectSingleFaceTask.prototype.runAndExtendWithFaceDetection=function(){var e=this;return new Promise(function(t){return tslib_es6_awaiter(e,void 0,void 0,function(){var e;return tslib_es6_generator(this,function(n){switch(n.label){case 0:return[4,this.run()];case 1:return[2,t((e=n.sent())?WithFaceDetection_extendWithFaceDetection({},e):void 0)]}})})})},DetectSingleFaceTask.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new eA(this.runAndExtendWithFaceDetection(),this.input,e)},DetectSingleFaceTask.prototype.withFaceExpressions=function(){return new ed(this.runAndExtendWithFaceDetection(),this.input)},DetectSingleFaceTask.prototype.withAgeAndGender=function(){return new ev(this.runAndExtendWithFaceDetection(),this.input)}}(eT),function(){function FaceMatcher(e,t){void 0===t&&(t=.6),this._distanceThreshold=t;var n=Array.isArray(e)?e:[e];if(!n.length)throw Error("FaceRecognizer.constructor - expected atleast one input");var i=1,createUniqueLabel=function(){return"person "+i++};this._labeledDescriptors=n.map(function(e){if(e instanceof k)return e;if(e instanceof Float32Array)return new k(createUniqueLabel(),[e]);if(e.descriptor&&e.descriptor instanceof Float32Array)return new k(createUniqueLabel(),[e.descriptor]);throw Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}Object.defineProperty(FaceMatcher.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(FaceMatcher.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),FaceMatcher.prototype.computeMeanDistance=function(e,t){return t.map(function(t){return function(e,t){if(e.length!==t.length)throw Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(e),i=Array.from(t);return Math.sqrt(n.map(function(e,t){return e-i[t]}).reduce(function(e,t){return e+Math.pow(t,2)},0))}(t,e)}).reduce(function(e,t){return e+t},0)/(t.length||1)},FaceMatcher.prototype.matchDescriptor=function(e){var t=this;return this.labeledDescriptors.map(function(n){var i=n.descriptors,o=n.label;return new A(o,t.computeMeanDistance(e,i))}).reduce(function(e,t){return e.distance<t.distance?e:t})},FaceMatcher.prototype.findBestMatch=function(e){var t=this.matchDescriptor(e);return t.distance<this.distanceThreshold?t:new A("unknown",t.distance)},FaceMatcher.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(e){return e.toJSON()})}},FaceMatcher.fromJSON=function(e){var t=e.labeledDescriptors.map(function(e){return k.fromJSON(e)});return new FaceMatcher(t,e.distanceThreshold)}}()},9948:function(e){e.exports=function(e,t,n,i){var o=new Blob(void 0!==i?[i,e]:[e],{type:n||"application/octet-stream"});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(o,t);else{var a=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(o):window.webkitURL.createObjectURL(o),s=document.createElement("a");s.style.display="none",s.href=a,s.setAttribute("download",t),void 0===s.download&&s.setAttribute("target","_blank"),document.body.appendChild(s),s.click(),setTimeout(function(){document.body.removeChild(s),window.URL.revokeObjectURL(a)},200)}}},2898:function(e,t,n){"use strict";n.d(t,{Z:function(){return createLucideIcon}});var i=n(2265),o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),createLucideIcon=(e,t)=>{let n=(0,i.forwardRef)(({color:n="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:c,children:u,...l},f)=>(0,i.createElement)("svg",{ref:f,...o,width:a,height:a,stroke:n,strokeWidth:c?24*Number(s)/Number(a):s,className:`lucide lucide-${toKebabCase(e)}`,...l},[...t.map(([e,t])=>(0,i.createElement)(e,t)),...(Array.isArray(u)?u:[u])||[]]));return n.displayName=`${e}`,n}},5817:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var i=n(2898);let o=(0,i.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},6264:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var i=n(2898);let o=(0,i.Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2601:function(e,t,n){"use strict";var i,o;e.exports=(null==(i=n.g.process)?void 0:i.env)&&"object"==typeof(null==(o=n.g.process)?void 0:o.env)?n.g.process:n(8960)},263:function(e){!function(){var t={675:function(e,t){"use strict";t.byteLength=function(e){var t=getLens(e),n=t[0],i=t[1];return(n+i)*3/4-i},t.toByteArray=function(e){var t,n,a=getLens(e),s=a[0],c=a[1],u=new o((s+c)*3/4-c),l=0,f=c>0?s-4:s;for(n=0;n<f;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;return 2===c&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,u[l++]=255&t),1===c&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t),u},t.fromByteArray=function(e){for(var t,i=e.length,o=i%3,a=[],s=0,c=i-o;s<c;s+=16383)a.push(function(e,t,i){for(var o,a=[],s=t;s<i;s+=3)a.push(n[(o=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]))>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}(e,s,s+16383>c?c:s+16383));return 1===o?a.push(n[(t=e[i-1])>>2]+n[t<<4&63]+"=="):2===o&&a.push(n[(t=(e[i-2]<<8)+e[i-1])>>10]+n[t>>4&63]+n[t<<2&63]+"="),a.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)n[s]=a[s],i[a.charCodeAt(s)]=s;function getLens(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var i=n===t?0:4-n%4;return[n,i]}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},72:function(e,t,n){"use strict";/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var i=n(675),o=n(783),a="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function createBuffer(e){if(e>2147483647)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,Buffer.prototype),t}function Buffer(e,t,n){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return allocUnsafe(e)}return from(e,t,n)}function from(e,t,n){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!Buffer.isEncoding(t))throw TypeError("Unknown encoding: "+t);var n=0|byteLength(e,t),i=createBuffer(n),o=i.write(e,t);return o!==n&&(i=i.slice(0,o)),i}(e,t);if(ArrayBuffer.isView(e))return fromArrayLike(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(isInstance(e,ArrayBuffer)||e&&isInstance(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(isInstance(e,SharedArrayBuffer)||e&&isInstance(e.buffer,SharedArrayBuffer)))return function(e,t,n){var i;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(i=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Buffer.prototype),i}(e,t,n);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return Buffer.from(i,t,n);var o=function(e){if(Buffer.isBuffer(e)){var t,n=0|checked(e.length),i=createBuffer(n);return 0===i.length||e.copy(i,0,0,n),i}return void 0!==e.length?"number"!=typeof e.length||(t=e.length)!=t?createBuffer(0):fromArrayLike(e):"Buffer"===e.type&&Array.isArray(e.data)?fromArrayLike(e.data):void 0}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return Buffer.from(e[Symbol.toPrimitive]("string"),t,n);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function assertSize(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function allocUnsafe(e){return assertSize(e),createBuffer(e<0?0:0|checked(e))}function fromArrayLike(e){for(var t=e.length<0?0:0|checked(e.length),n=createBuffer(t),i=0;i<t;i+=1)n[i]=255&e[i];return n}function checked(e){if(e>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function byteLength(e,t){if(Buffer.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||isInstance(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return base64ToBytes(e).length;default:if(o)return i?-1:utf8ToBytes(e).length;t=(""+t).toLowerCase(),o=!0}}function slowToString(e,t,n){var o,a,s=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0||(n>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var o="",a=t;a<n;++a)o+=c[e[a]];return o}(this,t,n);case"utf8":case"utf-8":return utf8Slice(this,t,n);case"ascii":return function(e,t,n){var i="";n=Math.min(e.length,n);for(var o=t;o<n;++o)i+=String.fromCharCode(127&e[o]);return i}(this,t,n);case"latin1":case"binary":return function(e,t,n){var i="";n=Math.min(e.length,n);for(var o=t;o<n;++o)i+=String.fromCharCode(e[o]);return i}(this,t,n);case"base64":return o=t,a=n,0===o&&a===this.length?i.fromByteArray(this):i.fromByteArray(this.slice(o,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,n){for(var i=e.slice(t,n),o="",a=0;a<i.length;a+=2)o+=String.fromCharCode(i[a]+256*i[a+1]);return o}(this,t,n);default:if(s)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}function swap(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function bidirectionalIndexOf(e,t,n,i,o){var a;if(0===e.length)return -1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),(a=n=+n)!=a&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return -1;n=e.length-1}else if(n<0){if(!o)return -1;n=0}if("string"==typeof t&&(t=Buffer.from(t,i)),Buffer.isBuffer(t))return 0===t.length?-1:arrayIndexOf(e,t,n,i,o);if("number"==typeof t)return(t&=255,"function"==typeof Uint8Array.prototype.indexOf)?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):arrayIndexOf(e,[t],n,i,o);throw TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,n,i,o){var a,s=1,c=e.length,u=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return -1;s=2,c/=2,u/=2,n/=2}function read(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){var l=-1;for(a=n;a<c;a++)if(read(e,a)===read(t,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===u)return l*s}else -1!==l&&(a-=a-l),l=-1}else for(n+u>c&&(n=c-u),a=n;a>=0;a--){for(var f=!0,d=0;d<u;d++)if(read(e,a+d)!==read(t,d)){f=!1;break}if(f)return a}return -1}function utf8Slice(e,t,n){n=Math.min(e.length,n);for(var i=[],o=t;o<n;){var a,s,c,u,l=e[o],f=null,d=l>239?4:l>223?3:l>191?2:1;if(o+d<=n)switch(d){case 1:l<128&&(f=l);break;case 2:(192&(a=e[o+1]))==128&&(u=(31&l)<<6|63&a)>127&&(f=u);break;case 3:a=e[o+1],s=e[o+2],(192&a)==128&&(192&s)==128&&(u=(15&l)<<12|(63&a)<<6|63&s)>2047&&(u<55296||u>57343)&&(f=u);break;case 4:a=e[o+1],s=e[o+2],c=e[o+3],(192&a)==128&&(192&s)==128&&(192&c)==128&&(u=(15&l)<<18|(63&a)<<12|(63&s)<<6|63&c)>65535&&u<1114112&&(f=u)}null===f?(f=65533,d=1):f>65535&&(f-=65536,i.push(f>>>10&1023|55296),f=56320|1023&f),i.push(f),o+=d}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var n="",i=0;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=4096));return n}(i)}function checkOffset(e,t,n){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>n)throw RangeError("Trying to access beyond buffer length")}function checkInt(e,t,n,i,o,a){if(!Buffer.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw RangeError('"value" argument is out of bounds');if(n+i>e.length)throw RangeError("Index out of range")}function checkIEEE754(e,t,n,i,o,a){if(n+i>e.length||n<0)throw RangeError("Index out of range")}function writeFloat(e,t,n,i,a){return t=+t,n>>>=0,a||checkIEEE754(e,t,n,4,34028234663852886e22,-34028234663852886e22),o.write(e,t,n,i,23,4),n+4}function writeDouble(e,t,n,i,a){return t=+t,n>>>=0,a||checkIEEE754(e,t,n,8,17976931348623157e292,-17976931348623157e292),o.write(e,t,n,i,52,8),n+8}t.Buffer=Buffer,t.SlowBuffer=function(e){return+e!=e&&(e=0),Buffer.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=2147483647,Buffer.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),Buffer.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Buffer.prototype,"parent",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.buffer}}),Object.defineProperty(Buffer.prototype,"offset",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.byteOffset}}),Buffer.poolSize=8192,Buffer.from=function(e,t,n){return from(e,t,n)},Object.setPrototypeOf(Buffer.prototype,Uint8Array.prototype),Object.setPrototypeOf(Buffer,Uint8Array),Buffer.alloc=function(e,t,n){return(assertSize(e),e<=0)?createBuffer(e):void 0!==t?"string"==typeof n?createBuffer(e).fill(t,n):createBuffer(e).fill(t):createBuffer(e)},Buffer.allocUnsafe=function(e){return allocUnsafe(e)},Buffer.allocUnsafeSlow=function(e){return allocUnsafe(e)},Buffer.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==Buffer.prototype},Buffer.compare=function(e,t){if(isInstance(e,Uint8Array)&&(e=Buffer.from(e,e.offset,e.byteLength)),isInstance(t,Uint8Array)&&(t=Buffer.from(t,t.offset,t.byteLength)),!Buffer.isBuffer(e)||!Buffer.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,i=t.length,o=0,a=Math.min(n,i);o<a;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0},Buffer.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer.alloc(0);if(void 0===t)for(n=0,t=0;n<e.length;++n)t+=e[n].length;var n,i=Buffer.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var a=e[n];if(isInstance(a,Uint8Array)&&(a=Buffer.from(a)),!Buffer.isBuffer(a))throw TypeError('"list" argument must be an Array of Buffers');a.copy(i,o),o+=a.length}return i},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)swap(this,t,t+1);return this},Buffer.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)swap(this,t,t+3),swap(this,t+1,t+2);return this},Buffer.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)swap(this,t,t+7),swap(this,t+1,t+6),swap(this,t+2,t+5),swap(this,t+3,t+4);return this},Buffer.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?utf8Slice(this,0,e):slowToString.apply(this,arguments)},Buffer.prototype.toLocaleString=Buffer.prototype.toString,Buffer.prototype.equals=function(e){if(!Buffer.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===Buffer.compare(this,e)},Buffer.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},a&&(Buffer.prototype[a]=Buffer.prototype.inspect),Buffer.prototype.compare=function(e,t,n,i,o){if(isInstance(e,Uint8Array)&&(e=Buffer.from(e,e.offset,e.byteLength)),!Buffer.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return -1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;for(var a=o-i,s=n-t,c=Math.min(a,s),u=this.slice(i,o),l=e.slice(t,n),f=0;f<c;++f)if(u[f]!==l[f]){a=u[f],s=l[f];break}return a<s?-1:s<a?1:0},Buffer.prototype.includes=function(e,t,n){return -1!==this.indexOf(e,t,n)},Buffer.prototype.indexOf=function(e,t,n){return bidirectionalIndexOf(this,e,t,n,!0)},Buffer.prototype.lastIndexOf=function(e,t,n){return bidirectionalIndexOf(this,e,t,n,!1)},Buffer.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o,a,s,c,u,l,f,d,h,p,m,g,v=this.length-t;if((void 0===n||n>v)&&(n=v),e.length>0&&(n<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var b=!1;;)switch(i){case"hex":return function(e,t,n,i){n=Number(n)||0;var o=e.length-n;i?(i=Number(i))>o&&(i=o):i=o;var a=t.length;i>a/2&&(i=a/2);for(var s=0;s<i;++s){var c=parseInt(t.substr(2*s,2),16);if(c!=c)break;e[n+s]=c}return s}(this,e,t,n);case"utf8":case"utf-8":return u=t,l=n,blitBuffer(utf8ToBytes(e,this.length-u),this,u,l);case"ascii":return f=t,d=n,blitBuffer(asciiToBytes(e),this,f,d);case"latin1":case"binary":return o=this,a=e,s=t,c=n,blitBuffer(asciiToBytes(a),o,s,c);case"base64":return h=t,p=n,blitBuffer(base64ToBytes(e),this,h,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m=t,g=n,blitBuffer(function(e,t){for(var n,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)i=(n=e.charCodeAt(a))>>8,o.push(n%256),o.push(i);return o}(e,this.length-m),this,m,g);default:if(b)throw TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),b=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},Buffer.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var i=this.subarray(e,t);return Object.setPrototypeOf(i,Buffer.prototype),i},Buffer.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||checkOffset(e,t,this.length);for(var i=this[e],o=1,a=0;++a<t&&(o*=256);)i+=this[e+a]*o;return i},Buffer.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||checkOffset(e,t,this.length);for(var i=this[e+--t],o=1;t>0&&(o*=256);)i+=this[e+--t]*o;return i},Buffer.prototype.readUInt8=function(e,t){return e>>>=0,t||checkOffset(e,1,this.length),this[e]},Buffer.prototype.readUInt16LE=function(e,t){return e>>>=0,t||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer.prototype.readUInt16BE=function(e,t){return e>>>=0,t||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer.prototype.readUInt32LE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer.prototype.readUInt32BE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||checkOffset(e,t,this.length);for(var i=this[e],o=1,a=0;++a<t&&(o*=256);)i+=this[e+a]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},Buffer.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||checkOffset(e,t,this.length);for(var i=t,o=1,a=this[e+--i];i>0&&(o*=256);)a+=this[e+--i]*o;return a>=(o*=128)&&(a-=Math.pow(2,8*t)),a},Buffer.prototype.readInt8=function(e,t){return(e>>>=0,t||checkOffset(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},Buffer.prototype.readInt16LE=function(e,t){e>>>=0,t||checkOffset(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},Buffer.prototype.readInt16BE=function(e,t){e>>>=0,t||checkOffset(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},Buffer.prototype.readInt32LE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer.prototype.readInt32BE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer.prototype.readFloatLE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),o.read(this,e,!0,23,4)},Buffer.prototype.readFloatBE=function(e,t){return e>>>=0,t||checkOffset(e,4,this.length),o.read(this,e,!1,23,4)},Buffer.prototype.readDoubleLE=function(e,t){return e>>>=0,t||checkOffset(e,8,this.length),o.read(this,e,!0,52,8)},Buffer.prototype.readDoubleBE=function(e,t){return e>>>=0,t||checkOffset(e,8,this.length),o.read(this,e,!1,52,8)},Buffer.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t>>>=0,n>>>=0,!i){var o=Math.pow(2,8*n)-1;checkInt(this,e,t,n,o,0)}var a=1,s=0;for(this[t]=255&e;++s<n&&(a*=256);)this[t+s]=e/a&255;return t+n},Buffer.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t>>>=0,n>>>=0,!i){var o=Math.pow(2,8*n)-1;checkInt(this,e,t,n,o,0)}var a=n-1,s=1;for(this[t+a]=255&e;--a>=0&&(s*=256);)this[t+a]=e/s&255;return t+n},Buffer.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,1,255,0),this[t]=255&e,t+1},Buffer.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},Buffer.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},Buffer.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},Buffer.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Buffer.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t>>>=0,!i){var o=Math.pow(2,8*n-1);checkInt(this,e,t,n,o-1,-o)}var a=0,s=1,c=0;for(this[t]=255&e;++a<n&&(s*=256);)e<0&&0===c&&0!==this[t+a-1]&&(c=1),this[t+a]=(e/s>>0)-c&255;return t+n},Buffer.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t>>>=0,!i){var o=Math.pow(2,8*n-1);checkInt(this,e,t,n,o-1,-o)}var a=n-1,s=1,c=0;for(this[t+a]=255&e;--a>=0&&(s*=256);)e<0&&0===c&&0!==this[t+a+1]&&(c=1),this[t+a]=(e/s>>0)-c&255;return t+n},Buffer.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},Buffer.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},Buffer.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},Buffer.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},Buffer.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||checkInt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Buffer.prototype.writeFloatLE=function(e,t,n){return writeFloat(this,e,t,!0,n)},Buffer.prototype.writeFloatBE=function(e,t,n){return writeFloat(this,e,t,!1,n)},Buffer.prototype.writeDoubleLE=function(e,t,n){return writeDouble(this,e,t,!0,n)},Buffer.prototype.writeDoubleBE=function(e,t,n){return writeDouble(this,e,t,!1,n)},Buffer.prototype.copy=function(e,t,n,i){if(!Buffer.isBuffer(e))throw TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw RangeError("Index out of range");if(i<0)throw RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var o=i-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,i);else if(this===e&&n<t&&t<i)for(var a=o-1;a>=0;--a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,i),t);return o},Buffer.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw TypeError("encoding must be a string");if("string"==typeof i&&!Buffer.isEncoding(i))throw TypeError("Unknown encoding: "+i);if(1===e.length){var o,a=e.charCodeAt(0);("utf8"===i&&a<128||"latin1"===i)&&(e=a)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw RangeError("Out of range index");if(n<=t)return this;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=Buffer.isBuffer(e)?e:Buffer.from(e,i),c=s.length;if(0===c)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%c]}return this};var s=/[^+/0-9A-Za-z-_]/g;function utf8ToBytes(e,t){t=t||1/0;for(var n,i=e.length,o=null,a=[],s=0;s<i;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!o){if(n>56319||s+1===i){(t-=3)>-1&&a.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),o=n;continue}n=(o-55296<<10|n-56320)+65536}else o&&(t-=3)>-1&&a.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else if(n<1114112){if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}else throw Error("Invalid code point")}return a}function asciiToBytes(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function base64ToBytes(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(s,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function blitBuffer(e,t,n,i){for(var o=0;o<i&&!(o+n>=t.length)&&!(o>=e.length);++o)t[o+n]=e[o];return o}function isInstance(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var c=function(){for(var e="0123456789abcdef",t=Array(256),n=0;n<16;++n)for(var i=16*n,o=0;o<16;++o)t[i+o]=e[n]+e[o];return t}()},783:function(e,t){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */t.read=function(e,t,n,i,o){var a,s,c=8*o-i-1,u=(1<<c)-1,l=u>>1,f=-7,d=n?o-1:0,h=n?-1:1,p=e[t+d];for(d+=h,a=p&(1<<-f)-1,p>>=-f,f+=c;f>0;a=256*a+e[t+d],d+=h,f-=8);for(s=a&(1<<-f)-1,a>>=-f,f+=i;f>0;s=256*s+e[t+d],d+=h,f-=8);if(0===a)a=1-l;else{if(a===u)return s?NaN:(p?-1:1)*(1/0);s+=Math.pow(2,i),a-=l}return(p?-1:1)*s*Math.pow(2,a-i)},t.write=function(e,t,n,i,o,a){var s,c,u,l=8*a-o-1,f=(1<<l)-1,d=f>>1,h=23===o?5960464477539062e-23:0,p=i?0:a-1,m=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(c=isNaN(t)?1:0,s=f):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),s+d>=1?t+=h/u:t+=h*Math.pow(2,1-d),t*u>=2&&(s++,u/=2),s+d>=f?(c=0,s=f):s+d>=1?(c=(t*u-1)*Math.pow(2,o),s+=d):(c=t*Math.pow(2,d-1)*Math.pow(2,o),s=0));o>=8;e[n+p]=255&c,p+=m,c/=256,o-=8);for(s=s<<o|c,l+=o;l>0;e[n+p]=255&s,p+=m,s/=256,l-=8);e[n+p-m]|=128*g}}},n={};function __nccwpck_require__(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}},a=!0;try{t[e](o,o.exports,__nccwpck_require__),a=!1}finally{a&&delete n[e]}return o.exports}__nccwpck_require__.ab="//";var i=__nccwpck_require__(72);e.exports=i}()},8960:function(e){!function(){var t={229:function(e){var t,n,i,o=e.exports={};function defaultSetTimout(){throw Error("setTimeout has not been defined")}function defaultClearTimeout(){throw Error("clearTimeout has not been defined")}function runTimeout(e){if(t===setTimeout)return setTimeout(e,0);if((t===defaultSetTimout||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){t=defaultSetTimout}try{n="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){n=defaultClearTimeout}}();var a=[],s=!1,c=-1;function cleanUpNextTick(){s&&i&&(s=!1,i.length?a=i.concat(a):c=-1,a.length&&drainQueue())}function drainQueue(){if(!s){var e=runTimeout(cleanUpNextTick);s=!0;for(var t=a.length;t;){for(i=a,a=[];++c<t;)i&&i[c].run();c=-1,t=a.length}i=null,s=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===defaultClearTimeout||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];a.push(new Item(e,t)),1!==a.length||s||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=noop,o.addListener=noop,o.once=noop,o.off=noop,o.removeListener=noop,o.removeAllListeners=noop,o.emit=noop,o.prependListener=noop,o.prependOnceListener=noop,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},n={};function __nccwpck_require__(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}},a=!0;try{t[e](o,o.exports,__nccwpck_require__),a=!1}finally{a&&delete n[e]}return o.exports}__nccwpck_require__.ab="//";var i=__nccwpck_require__(229);e.exports=i}()},1853:function(e,t,n){"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i=n(2265),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=i.useState,s=i.useEffect,c=i.useLayoutEffect,u=i.useDebugValue;function r(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(e){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),i=a({inst:{value:n,getSnapshot:t}}),o=i[0].inst,l=i[1];return c(function(){o.value=n,o.getSnapshot=t,r(o)&&l({inst:o})},[e,n,t]),s(function(){return r(o)&&l({inst:o}),e(function(){r(o)&&l({inst:o})})},[e]),u(n),n};t.useSyncExternalStore=void 0!==i.useSyncExternalStore?i.useSyncExternalStore:l},6272:function(e,t,n){"use strict";e.exports=n(1853)},4972:function(e,t,n){"use strict";function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}n.d(t,{g7:function(){return o}});var i=n(2265);let o=(0,i.forwardRef)((e,t)=>{let{children:n,...o}=e,s=i.Children.toArray(n),c=s.find($5e63c961fc1ce211$var$isSlottable);if(c){let e=c.props.children,n=s.map(t=>t!==c?t:i.Children.count(e)>1?i.Children.only(null):(0,i.isValidElement)(e)?e.props.children:null);return(0,i.createElement)(a,_extends({},o,{ref:t}),(0,i.isValidElement)(e)?(0,i.cloneElement)(e,void 0,n):null)}return(0,i.createElement)(a,_extends({},o,{ref:t}),n)});o.displayName="Slot";let a=(0,i.forwardRef)((e,t)=>{let{children:n,...o}=e;return(0,i.isValidElement)(n)?(0,i.cloneElement)(n,{...function(e,t){let n={...t};for(let i in t){let o=e[i],a=t[i],s=/^on[A-Z]/.test(i);s?o&&a?n[i]=(...e)=>{a(...e),o(...e)}:o&&(n[i]=o):"style"===i?n[i]={...o,...a}:"className"===i&&(n[i]=[o,a].filter(Boolean).join(" "))}return{...e,...n}}(o,n.props),ref:t?function(...e){return t=>e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}(t,n.ref):n.ref}):i.Children.count(n)>1?i.Children.only(null):null});a.displayName="SlotClone";let $5e63c961fc1ce211$export$d9f1ccf0bdb05d45=({children:e})=>(0,i.createElement)(i.Fragment,null,e);function $5e63c961fc1ce211$var$isSlottable(e){return(0,i.isValidElement)(e)&&e.type===$5e63c961fc1ce211$export$d9f1ccf0bdb05d45}},8947:function(e,t,n){"use strict";let i;n.d(t,{a:function(){return useQuery}});var o=n(6504),a=n(7156),s=n(8202),c=n(9492),u=n(3238);let QueryObserver=class QueryObserver extends c.l{constructor(e,t){super(),this.client=e,this.options=t,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(t)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.currentQuery.addObserver(this),shouldFetchOnMount(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return shouldFetchOn(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return shouldFetchOn(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,t){let n=this.options,i=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),(0,o.VS)(n,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled)throw Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=n.queryKey),this.updateQuery();let a=this.hasListeners();a&&shouldFetchOptionally(this.currentQuery,i,this.options,n)&&this.executeFetch(),this.updateResult(t),a&&(this.currentQuery!==i||this.options.enabled!==n.enabled||this.options.staleTime!==n.staleTime)&&this.updateStaleTimeout();let s=this.computeRefetchInterval();a&&(this.currentQuery!==i||this.options.enabled!==n.enabled||s!==this.currentRefetchInterval)&&this.updateRefetchInterval(s)}getOptimisticResult(e){let t=this.client.getQueryCache().build(this.client,e),n=this.createResult(t,e);return e.keepPreviousData||(void 0!==e.placeholderData?!n.isPlaceholderData:(0,o.VS)(this.getCurrentResult(),n))||(this.currentResult=n,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),n}getCurrentResult(){return this.currentResult}trackResult(e){let t={};return Object.keys(e).forEach(n=>{Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(n),e[n])})}),t}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...t}={}){return this.fetch({...t,meta:{refetchPage:e}})}fetchOptimistic(e){let t=this.client.defaultQueryOptions(e),n=this.client.getQueryCache().build(this.client,t);return n.isFetchingOptimistic=!0,n.fetch().then(()=>this.createResult(n,t))}fetch(e){var t;return this.executeFetch({...e,cancelRefetch:null==(t=e.cancelRefetch)||t}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let t=this.currentQuery.fetch(this.options,e);return null!=e&&e.throwOnError||(t=t.catch(o.ZT)),t}updateStaleTimeout(){if(this.clearStaleTimeout(),o.sk||this.currentResult.isStale||!(0,o.PN)(this.options.staleTime))return;let e=(0,o.Kp)(this.currentResult.dataUpdatedAt,this.options.staleTime);this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},e+1)}computeRefetchInterval(){var e;return"function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.currentResult.data,this.currentQuery):null!=(e=this.options.refetchInterval)&&e}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!o.sk&&!1!==this.options.enabled&&(0,o.PN)(this.currentRefetchInterval)&&0!==this.currentRefetchInterval&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||s.j.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,t){let n;let i=this.currentQuery,a=this.options,s=this.currentResult,c=this.currentResultState,l=this.currentResultOptions,f=e!==i,d=f?e.state:this.currentQueryInitialState,h=f?this.currentResult:this.previousQueryResult,{state:p}=e,{dataUpdatedAt:m,error:g,errorUpdatedAt:v,fetchStatus:b,status:y}=p,_=!1,w=!1;if(t._optimisticResults){let n=this.hasListeners(),o=!n&&shouldFetchOnMount(e,t),s=n&&shouldFetchOptionally(e,i,t,a);(o||s)&&(b=(0,u.Kw)(e.options.networkMode)?"fetching":"paused",m||(y="loading")),"isRestoring"===t._optimisticResults&&(b="idle")}if(t.keepPreviousData&&!p.dataUpdatedAt&&null!=h&&h.isSuccess&&"error"!==y)n=h.data,m=h.dataUpdatedAt,y=h.status,_=!0;else if(t.select&&void 0!==p.data){if(s&&p.data===(null==c?void 0:c.data)&&t.select===this.selectFn)n=this.selectResult;else try{this.selectFn=t.select,n=t.select(p.data),n=(0,o.oE)(null==s?void 0:s.data,n,t),this.selectResult=n,this.selectError=null}catch(e){this.selectError=e}}else n=p.data;if(void 0!==t.placeholderData&&void 0===n&&"loading"===y){let e;if(null!=s&&s.isPlaceholderData&&t.placeholderData===(null==l?void 0:l.placeholderData))e=s.data;else if(e="function"==typeof t.placeholderData?t.placeholderData():t.placeholderData,t.select&&void 0!==e)try{e=t.select(e),this.selectError=null}catch(e){this.selectError=e}void 0!==e&&(y="success",n=(0,o.oE)(null==s?void 0:s.data,e,t),w=!0)}this.selectError&&(g=this.selectError,n=this.selectResult,v=Date.now(),y="error");let x="fetching"===b,F="loading"===y,P="error"===y,A={status:y,fetchStatus:b,isLoading:F,isSuccess:"success"===y,isError:P,isInitialLoading:F&&x,data:n,dataUpdatedAt:m,error:g,errorUpdatedAt:v,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>d.dataUpdateCount||p.errorUpdateCount>d.errorUpdateCount,isFetching:x,isRefetching:x&&!F,isLoadingError:P&&0===p.dataUpdatedAt,isPaused:"paused"===b,isPlaceholderData:w,isPreviousData:_,isRefetchError:P&&0!==p.dataUpdatedAt,isStale:isStale(e,t),refetch:this.refetch,remove:this.remove};return A}updateResult(e){let t=this.currentResult,n=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,(0,o.VS)(n,t))return;this.currentResult=n;let i={cache:!0};(null==e?void 0:e.listeners)!==!1&&(()=>{if(!t)return!0;let{notifyOnChangeProps:e}=this.options,n="function"==typeof e?e():e;if("all"===n||!n&&!this.trackedProps.size)return!0;let i=new Set(null!=n?n:this.trackedProps);return this.options.useErrorBoundary&&i.add("error"),Object.keys(this.currentResult).some(e=>{let n=this.currentResult[e]!==t[e];return n&&i.has(e)})})()&&(i.listeners=!0),this.notify({...i,...e})}updateQuery(){let e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;let t=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null==t||t.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){let t={};"success"===e.type?t.onSuccess=!e.manual:"error"!==e.type||(0,u.DV)(e.error)||(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()}notify(e){a.V.batch(()=>{var t,n,i,o,a,s,c,u;e.onSuccess?(null==(t=(n=this.options).onSuccess)||t.call(n,this.currentResult.data),null==(i=(o=this.options).onSettled)||i.call(o,this.currentResult.data,null)):e.onError&&(null==(a=(s=this.options).onError)||a.call(s,this.currentResult.error),null==(c=(u=this.options).onSettled)||c.call(u,void 0,this.currentResult.error)),e.listeners&&this.listeners.forEach(({listener:e})=>{e(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}};function shouldFetchOnMount(e,t){return!1!==t.enabled&&!e.state.dataUpdatedAt&&!("error"===e.state.status&&!1===t.retryOnMount)||e.state.dataUpdatedAt>0&&shouldFetchOn(e,t,t.refetchOnMount)}function shouldFetchOn(e,t,n){if(!1!==t.enabled){let i="function"==typeof n?n(e):n;return"always"===i||!1!==i&&isStale(e,t)}return!1}function shouldFetchOptionally(e,t,n,i){return!1!==n.enabled&&(e!==t||!1===i.enabled)&&(!n.suspense||"error"!==e.state.status)&&isStale(e,n)}function isStale(e,t){return e.isStaleByTime(t.staleTime)}var l=n(2265),f=n(6272);let d=f.useSyncExternalStore,h=l.createContext((i=!1,{clearReset:()=>{i=!1},reset:()=>{i=!0},isReset:()=>i})),useQueryErrorResetBoundary=()=>l.useContext(h);var p=n(165);let m=l.createContext(!1),useIsRestoring=()=>l.useContext(m);m.Provider;let ensurePreventErrorBoundaryRetry=(e,t)=>{(e.suspense||e.useErrorBoundary)&&!t.isReset()&&(e.retryOnMount=!1)},useClearResetErrorBoundary=e=>{l.useEffect(()=>{e.clearReset()},[e])},getHasError=({result:e,errorResetBoundary:t,useErrorBoundary:n,query:i})=>{var o;return e.isError&&!t.isReset()&&!e.isFetching&&(o=[e.error,i],"function"==typeof n?n(...o):!!n)},ensureStaleTime=e=>{e.suspense&&"number"!=typeof e.staleTime&&(e.staleTime=1e3)},willFetch=(e,t)=>e.isLoading&&e.isFetching&&!t,shouldSuspend=(e,t,n)=>(null==e?void 0:e.suspense)&&willFetch(t,n),fetchOptimistic=(e,t,n)=>t.fetchOptimistic(e).then(({data:t})=>{null==e.onSuccess||e.onSuccess(t),null==e.onSettled||e.onSettled(t,null)}).catch(t=>{n.clearReset(),null==e.onError||e.onError(t),null==e.onSettled||e.onSettled(void 0,t)});function useQuery(e,t,n){let i=(0,o._v)(e,t,n);return function(e,t){let n=(0,p.NL)({context:e.context}),i=useIsRestoring(),o=useQueryErrorResetBoundary(),s=n.defaultQueryOptions(e);s._optimisticResults=i?"isRestoring":"optimistic",s.onError&&(s.onError=a.V.batchCalls(s.onError)),s.onSuccess&&(s.onSuccess=a.V.batchCalls(s.onSuccess)),s.onSettled&&(s.onSettled=a.V.batchCalls(s.onSettled)),ensureStaleTime(s),ensurePreventErrorBoundaryRetry(s,o),useClearResetErrorBoundary(o);let[c]=l.useState(()=>new t(n,s)),u=c.getOptimisticResult(s);if(d(l.useCallback(e=>{let t=i?()=>void 0:c.subscribe(a.V.batchCalls(e));return c.updateResult(),t},[c,i]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),l.useEffect(()=>{c.setOptions(s,{listeners:!1})},[s,c]),shouldSuspend(s,u,i))throw fetchOptimistic(s,c,o);if(getHasError({result:u,errorResetBoundary:o,useErrorBoundary:s.useErrorBoundary,query:c.getCurrentQuery()}))throw u.error;return s.notifyOnChangeProps?u:c.trackResult(u)}(i,QueryObserver)}},6061:function(e,t,n){"use strict";n.d(t,{j:function(){return cva}});var i=n(7042);let falsyToString=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,o=i.W,cva=(e,t)=>n=>{var i;if((null==t?void 0:t.variants)==null)return o(e,null==n?void 0:n.class,null==n?void 0:n.className);let{variants:a,defaultVariants:s}=t,c=Object.keys(a).map(e=>{let t=null==n?void 0:n[e],i=null==s?void 0:s[e];if(null===t)return null;let o=falsyToString(t)||falsyToString(i);return a[e][o]}),u=n&&Object.entries(n).reduce((e,t)=>{let[n,i]=t;return void 0===i||(e[n]=i),e},{}),l=null==t?void 0:null===(i=t.compoundVariants)||void 0===i?void 0:i.reduce((e,t)=>{let{class:n,className:i,...o}=t;return Object.entries(o).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...s,...u}[t]):({...s,...u})[t]===n})?[...e,n,i]:e},[]);return o(e,c,l,null==n?void 0:n.class,null==n?void 0:n.className)}},7042:function(e,t,n){"use strict";function clsx(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=function r(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e){if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t)}return i}(e))&&(i&&(i+=" "),i+=t);return i}n.d(t,{W:function(){return clsx}})},1865:function(e,t,n){"use strict";n.d(t,{cI:function(){return useForm}});var i=n(2265),isCheckBoxInput=e=>"checkbox"===e.type,isDateObject=e=>e instanceof Date,isNullOrUndefined=e=>null==e;let isObjectType=e=>"object"==typeof e;var isObject=e=>!isNullOrUndefined(e)&&!Array.isArray(e)&&isObjectType(e)&&!isDateObject(e),getEventValue=e=>isObject(e)&&e.target?isCheckBoxInput(e.target)?e.target.checked:e.target.value:e,getNodeParentName=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,isNameInFieldArray=(e,t)=>e.has(getNodeParentName(t)),isPlainObject=e=>{let t=e.constructor&&e.constructor.prototype;return isObject(t)&&t.hasOwnProperty("isPrototypeOf")},o="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function cloneObject(e){let t;let n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(!(o&&(e instanceof Blob||e instanceof FileList))&&(n||isObject(e))))return e;else if(t=n?[]:{},n||isPlainObject(e))for(let n in e)e.hasOwnProperty(n)&&(t[n]=cloneObject(e[n]));else t=e;return t}var compact=e=>Array.isArray(e)?e.filter(Boolean):[],isUndefined=e=>void 0===e,get=(e,t,n)=>{if(!t||!isObject(e))return n;let i=compact(t.split(/[,[\].]+?/)).reduce((e,t)=>isNullOrUndefined(e)?e:e[t],e);return isUndefined(i)||i===e?isUndefined(e[t])?n:e[t]:i},isBoolean=e=>"boolean"==typeof e;let a={BLUR:"blur",FOCUS_OUT:"focusout"},s={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},c={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};i.createContext(null);var getProxyFormState=(e,t,n,i=!0)=>{let o={defaultValues:t._defaultValues};for(let a in e)Object.defineProperty(o,a,{get:()=>(t._proxyFormState[a]!==s.all&&(t._proxyFormState[a]=!i||s.all),n&&(n[a]=!0),e[a])});return o},isEmptyObject=e=>isObject(e)&&!Object.keys(e).length,shouldRenderFormState=(e,t,n,i)=>{n(e);let{name:o,...a}=e;return isEmptyObject(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(e=>t[e]===(!i||s.all))},convertToArrayPayload=e=>Array.isArray(e)?e:[e],isString=e=>"string"==typeof e,generateWatchOutput=(e,t,n,i,o)=>isString(e)?(i&&t.watch.add(e),get(n,e,o)):Array.isArray(e)?e.map(e=>(i&&t.watch.add(e),get(n,e))):(i&&(t.watchAll=!0),n),isKey=e=>/^\w*$/.test(e),stringToPath=e=>compact(e.replace(/["|']|\]/g,"").split(/\.|\[/));function set(e,t,n){let i=-1,o=isKey(t)?[t]:stringToPath(t),a=o.length,s=a-1;for(;++i<a;){let t=o[i],a=n;if(i!==s){let n=e[t];a=isObject(n)||Array.isArray(n)?n:isNaN(+o[i+1])?{}:[]}e[t]=a,e=e[t]}return e}var appendErrors=(e,t,n,i,o)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[i]:o||!0}}:{};let focusFieldBy=(e,t,n)=>{for(let i of n||Object.keys(e)){let n=get(e,i);if(n){let{_f:e,...i}=n;if(e&&t(e.name)){if(e.ref.focus){e.ref.focus();break}if(e.refs&&e.refs[0].focus){e.refs[0].focus();break}}else isObject(i)&&focusFieldBy(i,t)}}};var getValidationModes=e=>({isOnSubmit:!e||e===s.onSubmit,isOnBlur:e===s.onBlur,isOnChange:e===s.onChange,isOnAll:e===s.all,isOnTouch:e===s.onTouched}),isWatched=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length)))),updateFieldArrayRootError=(e,t,n)=>{let i=compact(get(e,n));return set(i,"root",t[n]),set(e,n,i),e},isFileInput=e=>"file"===e.type,isFunction=e=>"function"==typeof e,isHTMLElement=e=>{if(!o)return!1;let t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},isMessage=e=>isString(e),isRadioInput=e=>"radio"===e.type,isRegex=e=>e instanceof RegExp;let u={value:!1,isValid:!1},l={value:!0,isValid:!0};var getCheckboxValue=e=>{if(Array.isArray(e)){if(e.length>1){let t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!isUndefined(e[0].attributes.value)?isUndefined(e[0].value)||""===e[0].value?l:{value:e[0].value,isValid:!0}:l:u}return u};let f={isValid:!1,value:null};var getRadioValue=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,f):f;function getValidateError(e,t,n="validate"){if(isMessage(e)||Array.isArray(e)&&e.every(isMessage)||isBoolean(e)&&!e)return{type:n,message:isMessage(e)?e:"",ref:t}}var getValueAndMessage=e=>isObject(e)&&!isRegex(e)?e:{value:e,message:""},validateField=async(e,t,n,i,o)=>{let{ref:a,refs:s,required:u,maxLength:l,minLength:f,min:d,max:h,pattern:p,validate:m,name:g,valueAsNumber:v,mount:b,disabled:y}=e._f,_=get(t,g);if(!b||y)return{};let w=s?s[0]:a,setCustomValidity=e=>{i&&w.reportValidity&&(w.setCustomValidity(isBoolean(e)?"":e||""),w.reportValidity())},x={},F=isRadioInput(a),P=isCheckBoxInput(a),A=(v||isFileInput(a))&&isUndefined(a.value)&&isUndefined(_)||isHTMLElement(a)&&""===a.value||""===_||Array.isArray(_)&&!_.length,T=appendErrors.bind(null,g,n,x),getMinMaxMessage=(e,t,n,i=c.maxLength,o=c.minLength)=>{let s=e?t:n;x[g]={type:e?i:o,message:s,ref:a,...T(e?i:o,s)}};if(o?!Array.isArray(_)||!_.length:u&&(!(F||P)&&(A||isNullOrUndefined(_))||isBoolean(_)&&!_||P&&!getCheckboxValue(s).isValid||F&&!getRadioValue(s).isValid)){let{value:e,message:t}=isMessage(u)?{value:!!u,message:u}:getValueAndMessage(u);if(e&&(x[g]={type:c.required,message:t,ref:w,...T(c.required,t)},!n))return setCustomValidity(t),x}if(!A&&(!isNullOrUndefined(d)||!isNullOrUndefined(h))){let e,t;let i=getValueAndMessage(h),o=getValueAndMessage(d);if(isNullOrUndefined(_)||isNaN(_)){let n=a.valueAsDate||new Date(_),convertTimeToDate=e=>new Date(new Date().toDateString()+" "+e),s="time"==a.type,c="week"==a.type;isString(i.value)&&_&&(e=s?convertTimeToDate(_)>convertTimeToDate(i.value):c?_>i.value:n>new Date(i.value)),isString(o.value)&&_&&(t=s?convertTimeToDate(_)<convertTimeToDate(o.value):c?_<o.value:n<new Date(o.value))}else{let n=a.valueAsNumber||(_?+_:_);isNullOrUndefined(i.value)||(e=n>i.value),isNullOrUndefined(o.value)||(t=n<o.value)}if((e||t)&&(getMinMaxMessage(!!e,i.message,o.message,c.max,c.min),!n))return setCustomValidity(x[g].message),x}if((l||f)&&!A&&(isString(_)||o&&Array.isArray(_))){let e=getValueAndMessage(l),t=getValueAndMessage(f),i=!isNullOrUndefined(e.value)&&_.length>+e.value,o=!isNullOrUndefined(t.value)&&_.length<+t.value;if((i||o)&&(getMinMaxMessage(i,e.message,t.message),!n))return setCustomValidity(x[g].message),x}if(p&&!A&&isString(_)){let{value:e,message:t}=getValueAndMessage(p);if(isRegex(e)&&!_.match(e)&&(x[g]={type:c.pattern,message:t,ref:a,...T(c.pattern,t)},!n))return setCustomValidity(t),x}if(m){if(isFunction(m)){let e=await m(_,t),i=getValidateError(e,w);if(i&&(x[g]={...i,...T(c.validate,i.message)},!n))return setCustomValidity(i.message),x}else if(isObject(m)){let e={};for(let i in m){if(!isEmptyObject(e)&&!n)break;let o=getValidateError(await m[i](_,t),w,i);o&&(e={...o,...T(i,o.message)},setCustomValidity(o.message),n&&(x[g]=e))}if(!isEmptyObject(e)&&(x[g]={ref:w,...e},!n))return x}}return setCustomValidity(!0),x};function unset(e,t){let n=Array.isArray(t)?t:isKey(t)?[t]:stringToPath(t),i=1===n.length?e:function(e,t){let n=t.slice(0,-1).length,i=0;for(;i<n;)e=isUndefined(e)?i++:e[t[i++]];return e}(e,n),o=n.length-1,a=n[o];return i&&delete i[a],0!==o&&(isObject(i)&&isEmptyObject(i)||Array.isArray(i)&&function(e){for(let t in e)if(e.hasOwnProperty(t)&&!isUndefined(e[t]))return!1;return!0}(i))&&unset(e,n.slice(0,-1)),e}function createSubject(){let e=[];return{get observers(){return e},next:t=>{for(let n of e)n.next&&n.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t)}}),unsubscribe:()=>{e=[]}}}var isPrimitive=e=>isNullOrUndefined(e)||!isObjectType(e);function deepEqual(e,t){if(isPrimitive(e)||isPrimitive(t))return e===t;if(isDateObject(e)&&isDateObject(t))return e.getTime()===t.getTime();let n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(let o of n){let n=e[o];if(!i.includes(o))return!1;if("ref"!==o){let e=t[o];if(isDateObject(n)&&isDateObject(e)||isObject(n)&&isObject(e)||Array.isArray(n)&&Array.isArray(e)?!deepEqual(n,e):n!==e)return!1}}return!0}var isMultipleSelect=e=>"select-multiple"===e.type,isRadioOrCheckbox=e=>isRadioInput(e)||isCheckBoxInput(e),live=e=>isHTMLElement(e)&&e.isConnected,objectHasFunction=e=>{for(let t in e)if(isFunction(e[t]))return!0;return!1};function markFieldsDirty(e,t={}){let n=Array.isArray(e);if(isObject(e)||n)for(let n in e)Array.isArray(e[n])||isObject(e[n])&&!objectHasFunction(e[n])?(t[n]=Array.isArray(e[n])?[]:{},markFieldsDirty(e[n],t[n])):isNullOrUndefined(e[n])||(t[n]=!0);return t}var getDirtyFields=(e,t)=>(function getDirtyFieldsFromDefaultValues(e,t,n){let i=Array.isArray(e);if(isObject(e)||i)for(let i in e)Array.isArray(e[i])||isObject(e[i])&&!objectHasFunction(e[i])?isUndefined(t)||isPrimitive(n[i])?n[i]=Array.isArray(e[i])?markFieldsDirty(e[i],[]):{...markFieldsDirty(e[i])}:getDirtyFieldsFromDefaultValues(e[i],isNullOrUndefined(t)?{}:t[i],n[i]):n[i]=!deepEqual(e[i],t[i]);return n})(e,t,markFieldsDirty(t)),getFieldValueAs=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:i})=>isUndefined(e)?e:t?""===e?NaN:e?+e:e:n&&isString(e)?new Date(e):i?i(e):e;function getFieldValue(e){let t=e.ref;return(e.refs?e.refs.every(e=>e.disabled):t.disabled)?void 0:isFileInput(t)?t.files:isRadioInput(t)?getRadioValue(e.refs).value:isMultipleSelect(t)?[...t.selectedOptions].map(({value:e})=>e):isCheckBoxInput(t)?getCheckboxValue(e.refs).value:getFieldValueAs(isUndefined(t.value)?e.ref.value:t.value,e)}var getResolverOptions=(e,t,n,i)=>{let o={};for(let n of e){let e=get(t,n);e&&set(o,n,e._f)}return{criteriaMode:n,names:[...e],fields:o,shouldUseNativeValidation:i}},getRuleValue=e=>isUndefined(e)?e:isRegex(e)?e.source:isObject(e)?isRegex(e.value)?e.value.source:e.value:e,hasValidation=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function schemaErrorLookup(e,t,n){let i=get(e,n);if(i||isKey(n))return{error:i,name:n};let o=n.split(".");for(;o.length;){let i=o.join("."),a=get(t,i),s=get(e,i);if(a&&!Array.isArray(a)&&n!==i)break;if(s&&s.type)return{name:i,error:s};o.pop()}return{name:n}}var skipValidation=(e,t,n,i,o)=>!o.isOnAll&&(!n&&o.isOnTouch?!(t||e):(n?i.isOnBlur:o.isOnBlur)?!e:(n?!i.isOnChange:!o.isOnChange)||e),unsetEmptyArray=(e,t)=>!compact(get(e,t)).length&&unset(e,t);let d={mode:s.onSubmit,reValidateMode:s.onChange,shouldFocusError:!0};function useForm(e={}){let t=i.useRef(),n=i.useRef(),[c,u]=i.useState({isDirty:!1,isValidating:!1,isLoading:isFunction(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:isFunction(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...function(e={},t){let n,i={...d,...e},c={submitCount:0,isDirty:!1,isLoading:isFunction(i.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},u={},l=(isObject(i.defaultValues)||isObject(i.values))&&cloneObject(i.defaultValues||i.values)||{},f=i.shouldUnregister?{}:cloneObject(l),h={action:!1,mount:!1,watch:!1},p={mount:new Set,unMount:new Set,array:new Set,watch:new Set},m=0,g={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},v={values:createSubject(),array:createSubject(),state:createSubject()},b=e.resetOptions&&e.resetOptions.keepDirtyValues,y=getValidationModes(i.mode),_=getValidationModes(i.reValidateMode),w=i.criteriaMode===s.all,debounce=e=>t=>{clearTimeout(m),m=setTimeout(e,t)},_updateValid=async e=>{if(g.isValid||e){let e=i.resolver?isEmptyObject((await _executeSchema()).errors):await executeBuiltInValidation(u,!0);e!==c.isValid&&v.state.next({isValid:e})}},_updateIsValidating=e=>g.isValidating&&v.state.next({isValidating:e}),updateErrors=(e,t)=>{set(c.errors,e,t),v.state.next({errors:c.errors})},updateValidAndValue=(e,t,n,i)=>{let o=get(u,e);if(o){let a=get(f,e,isUndefined(n)?get(l,e):n);isUndefined(a)||i&&i.defaultChecked||t?set(f,e,t?a:getFieldValue(o._f)):setFieldValue(e,a),h.mount&&_updateValid()}},updateTouchAndDirty=(e,t,n,i,o)=>{let a=!1,s=!1,u={name:e};if(!n||i){g.isDirty&&(s=c.isDirty,c.isDirty=u.isDirty=_getDirty(),a=s!==u.isDirty);let n=deepEqual(get(l,e),t);s=get(c.dirtyFields,e),n?unset(c.dirtyFields,e):set(c.dirtyFields,e,!0),u.dirtyFields=c.dirtyFields,a=a||g.dirtyFields&&!n!==s}if(n){let t=get(c.touchedFields,e);t||(set(c.touchedFields,e,n),u.touchedFields=c.touchedFields,a=a||g.touchedFields&&t!==n)}return a&&o&&v.state.next(u),a?u:{}},shouldRenderByError=(t,i,o,a)=>{let s=get(c.errors,t),u=g.isValid&&isBoolean(i)&&c.isValid!==i;if(e.delayError&&o?(n=debounce(()=>updateErrors(t,o)))(e.delayError):(clearTimeout(m),n=null,o?set(c.errors,t,o):unset(c.errors,t)),(o?!deepEqual(s,o):s)||!isEmptyObject(a)||u){let e={...a,...u&&isBoolean(i)?{isValid:i}:{},errors:c.errors,name:t};c={...c,...e},v.state.next(e)}_updateIsValidating(!1)},_executeSchema=async e=>i.resolver(f,i.context,getResolverOptions(e||p.mount,u,i.criteriaMode,i.shouldUseNativeValidation)),executeSchemaAndUpdateState=async e=>{let{errors:t}=await _executeSchema(e);if(e)for(let n of e){let e=get(t,n);e?set(c.errors,n,e):unset(c.errors,n)}else c.errors=t;return t},executeBuiltInValidation=async(e,t,n={valid:!0})=>{for(let o in e){let a=e[o];if(a){let{_f:e,...o}=a;if(e){let o=p.array.has(e.name),s=await validateField(a,f,w,i.shouldUseNativeValidation&&!t,o);if(s[e.name]&&(n.valid=!1,t))break;t||(get(s,e.name)?o?updateFieldArrayRootError(c.errors,s,e.name):set(c.errors,e.name,s[e.name]):unset(c.errors,e.name))}o&&await executeBuiltInValidation(o,t,n)}}return n.valid},_getDirty=(e,t)=>(e&&t&&set(f,e,t),!deepEqual(getValues(),l)),_getWatch=(e,t,n)=>generateWatchOutput(e,p,{...h.mount?f:isUndefined(t)?l:isString(e)?{[e]:t}:t},n,t),setFieldValue=(e,t,n={})=>{let i=get(u,e),o=t;if(i){let n=i._f;n&&(n.disabled||set(f,e,getFieldValueAs(t,n)),o=isHTMLElement(n.ref)&&isNullOrUndefined(t)?"":t,isMultipleSelect(n.ref)?[...n.ref.options].forEach(e=>e.selected=o.includes(e.value)):n.refs?isCheckBoxInput(n.ref)?n.refs.length>1?n.refs.forEach(e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(o)?!!o.find(t=>t===e.value):o===e.value)):n.refs[0]&&(n.refs[0].checked=!!o):n.refs.forEach(e=>e.checked=e.value===o):isFileInput(n.ref)?n.ref.value="":(n.ref.value=o,n.ref.type||v.values.next({name:e,values:{...f}})))}(n.shouldDirty||n.shouldTouch)&&updateTouchAndDirty(e,o,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&trigger(e)},setValues=(e,t,n)=>{for(let i in t){let o=t[i],a=`${e}.${i}`,s=get(u,a);!p.array.has(e)&&isPrimitive(o)&&(!s||s._f)||isDateObject(o)?setFieldValue(a,o,n):setValues(a,o,n)}},setValue=(e,n,i={})=>{let o=get(u,e),a=p.array.has(e),s=cloneObject(n);set(f,e,s),a?(v.array.next({name:e,values:{...f}}),(g.isDirty||g.dirtyFields)&&i.shouldDirty&&v.state.next({name:e,dirtyFields:getDirtyFields(l,f),isDirty:_getDirty(e,s)})):!o||o._f||isNullOrUndefined(s)?setFieldValue(e,s,i):setValues(e,s,i),isWatched(e,p)&&v.state.next({...c}),v.values.next({name:e,values:{...f}}),h.mount||t()},onChange=async e=>{let t=e.target,o=t.name,s=!0,l=get(u,o);if(l){let d,h;let m=t.type?getFieldValue(l._f):getEventValue(e),b=e.type===a.BLUR||e.type===a.FOCUS_OUT,x=!hasValidation(l._f)&&!i.resolver&&!get(c.errors,o)&&!l._f.deps||skipValidation(b,get(c.touchedFields,o),c.isSubmitted,_,y),F=isWatched(o,p,b);set(f,o,m),b?(l._f.onBlur&&l._f.onBlur(e),n&&n(0)):l._f.onChange&&l._f.onChange(e);let P=updateTouchAndDirty(o,m,b,!1),A=!isEmptyObject(P)||F;if(b||v.values.next({name:o,type:e.type,values:{...f}}),x)return g.isValid&&_updateValid(),A&&v.state.next({name:o,...F?{}:P});if(!b&&F&&v.state.next({...c}),_updateIsValidating(!0),i.resolver){let{errors:e}=await _executeSchema([o]),t=schemaErrorLookup(c.errors,u,o),n=schemaErrorLookup(e,u,t.name||o);d=n.error,o=n.name,h=isEmptyObject(e)}else d=(await validateField(l,f,w,i.shouldUseNativeValidation))[o],(s=Number.isNaN(m)||m===get(f,o,m))&&(d?h=!1:g.isValid&&(h=await executeBuiltInValidation(u,!0)));s&&(l._f.deps&&trigger(l._f.deps),shouldRenderByError(o,h,d,P))}},trigger=async(e,t={})=>{let n,o;let a=convertToArrayPayload(e);if(_updateIsValidating(!0),i.resolver){let t=await executeSchemaAndUpdateState(isUndefined(e)?e:a);n=isEmptyObject(t),o=e?!a.some(e=>get(t,e)):n}else e?((o=(await Promise.all(a.map(async e=>{let t=get(u,e);return await executeBuiltInValidation(t&&t._f?{[e]:t}:t)}))).every(Boolean))||c.isValid)&&_updateValid():o=n=await executeBuiltInValidation(u);return v.state.next({...!isString(e)||g.isValid&&n!==c.isValid?{}:{name:e},...i.resolver||!e?{isValid:n}:{},errors:c.errors,isValidating:!1}),t.shouldFocus&&!o&&focusFieldBy(u,e=>e&&get(c.errors,e),e?a:p.mount),o},getValues=e=>{let t={...l,...h.mount?f:{}};return isUndefined(e)?t:isString(e)?get(t,e):e.map(e=>get(t,e))},getFieldState=(e,t)=>({invalid:!!get((t||c).errors,e),isDirty:!!get((t||c).dirtyFields,e),isTouched:!!get((t||c).touchedFields,e),error:get((t||c).errors,e)}),setError=(e,t,n)=>{let i=(get(u,e,{_f:{}})._f||{}).ref;set(c.errors,e,{...t,ref:i}),v.state.next({name:e,errors:c.errors,isValid:!1}),n&&n.shouldFocus&&i&&i.focus&&i.focus()},unregister=(e,t={})=>{for(let n of e?convertToArrayPayload(e):p.mount)p.mount.delete(n),p.array.delete(n),t.keepValue||(unset(u,n),unset(f,n)),t.keepError||unset(c.errors,n),t.keepDirty||unset(c.dirtyFields,n),t.keepTouched||unset(c.touchedFields,n),i.shouldUnregister||t.keepDefaultValue||unset(l,n);v.values.next({values:{...f}}),v.state.next({...c,...t.keepDirty?{isDirty:_getDirty()}:{}}),t.keepIsValid||_updateValid()},_updateDisabledField=({disabled:e,name:t,field:n,fields:i})=>{if(isBoolean(e)){let o=e?void 0:get(f,t,getFieldValue(n?n._f:get(i,t)._f));set(f,t,o),updateTouchAndDirty(t,o,!1,!1,!0)}},register=(e,t={})=>{let n=get(u,e),o=isBoolean(t.disabled);return set(u,e,{...n||{},_f:{...n&&n._f?n._f:{ref:{name:e}},name:e,mount:!0,...t}}),p.mount.add(e),n?_updateDisabledField({field:n,disabled:t.disabled,name:e}):updateValidAndValue(e,!0,t.value),{...o?{disabled:t.disabled}:{},...i.progressive?{required:!!t.required,min:getRuleValue(t.min),max:getRuleValue(t.max),minLength:getRuleValue(t.minLength),maxLength:getRuleValue(t.maxLength),pattern:getRuleValue(t.pattern)}:{},name:e,onChange,onBlur:onChange,ref:o=>{if(o){register(e,t),n=get(u,e);let i=isUndefined(o.value)&&o.querySelectorAll&&o.querySelectorAll("input,select,textarea")[0]||o,a=isRadioOrCheckbox(i),s=n._f.refs||[];(a?s.find(e=>e===i):i===n._f.ref)||(set(u,e,{_f:{...n._f,...a?{refs:[...s.filter(live),i,...Array.isArray(get(l,e))?[{}]:[]],ref:{type:i.type,name:e}}:{ref:i}}}),updateValidAndValue(e,!1,void 0,i))}else(n=get(u,e,{}))._f&&(n._f.mount=!1),(i.shouldUnregister||t.shouldUnregister)&&!(isNameInFieldArray(p.array,e)&&h.action)&&p.unMount.add(e)}}},_focusError=()=>i.shouldFocusError&&focusFieldBy(u,e=>e&&get(c.errors,e),p.mount),handleSubmit=(e,t)=>async n=>{n&&(n.preventDefault&&n.preventDefault(),n.persist&&n.persist());let o=cloneObject(f);if(v.state.next({isSubmitting:!0}),i.resolver){let{errors:e,values:t}=await _executeSchema();c.errors=e,o=t}else await executeBuiltInValidation(u);unset(c.errors,"root"),isEmptyObject(c.errors)?(v.state.next({errors:{}}),await e(o,n)):(t&&await t({...c.errors},n),_focusError(),setTimeout(_focusError)),v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:isEmptyObject(c.errors),submitCount:c.submitCount+1,errors:c.errors})},_reset=(n,i={})=>{let a=n?cloneObject(n):l,s=cloneObject(a),d=n&&!isEmptyObject(n)?s:l;if(i.keepDefaultValues||(l=a),!i.keepValues){if(i.keepDirtyValues||b)for(let e of p.mount)get(c.dirtyFields,e)?set(d,e,get(f,e)):setValue(e,get(d,e));else{if(o&&isUndefined(n))for(let e of p.mount){let t=get(u,e);if(t&&t._f){let e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(isHTMLElement(e)){let t=e.closest("form");if(t){t.reset();break}}}}u={}}f=e.shouldUnregister?i.keepDefaultValues?cloneObject(l):{}:cloneObject(d),v.array.next({values:{...d}}),v.values.next({values:{...d}})}p={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},h.mount||t(),h.mount=!g.isValid||!!i.keepIsValid,h.watch=!!e.shouldUnregister,v.state.next({submitCount:i.keepSubmitCount?c.submitCount:0,isDirty:i.keepDirty?c.isDirty:!!(i.keepDefaultValues&&!deepEqual(n,l)),isSubmitted:!!i.keepIsSubmitted&&c.isSubmitted,dirtyFields:i.keepDirtyValues?c.dirtyFields:i.keepDefaultValues&&n?getDirtyFields(l,n):{},touchedFields:i.keepTouched?c.touchedFields:{},errors:i.keepErrors?c.errors:{},isSubmitSuccessful:!!i.keepIsSubmitSuccessful&&c.isSubmitSuccessful,isSubmitting:!1})},reset=(e,t)=>_reset(isFunction(e)?e(f):e,t);return{control:{register,unregister,getFieldState,handleSubmit,setError,_executeSchema,_getWatch,_getDirty,_updateValid,_removeUnmounted:()=>{for(let e of p.unMount){let t=get(u,e);t&&(t._f.refs?t._f.refs.every(e=>!live(e)):!live(t._f.ref))&&unregister(e)}p.unMount=new Set},_updateFieldArray:(e,t=[],n,i,o=!0,a=!0)=>{if(i&&n){if(h.action=!0,a&&Array.isArray(get(u,e))){let t=n(get(u,e),i.argA,i.argB);o&&set(u,e,t)}if(a&&Array.isArray(get(c.errors,e))){let t=n(get(c.errors,e),i.argA,i.argB);o&&set(c.errors,e,t),unsetEmptyArray(c.errors,e)}if(g.touchedFields&&a&&Array.isArray(get(c.touchedFields,e))){let t=n(get(c.touchedFields,e),i.argA,i.argB);o&&set(c.touchedFields,e,t)}g.dirtyFields&&(c.dirtyFields=getDirtyFields(l,f)),v.state.next({name:e,isDirty:_getDirty(e,t),dirtyFields:c.dirtyFields,errors:c.errors,isValid:c.isValid})}else set(f,e,t)},_updateDisabledField,_getFieldArray:t=>compact(get(h.mount?f:l,t,e.shouldUnregister?get(l,t,[]):[])),_reset,_resetDefaultValues:()=>isFunction(i.defaultValues)&&i.defaultValues().then(e=>{reset(e,i.resetOptions),v.state.next({isLoading:!1})}),_updateFormState:e=>{c={...c,...e}},_subjects:v,_proxyFormState:g,get _fields(){return u},get _formValues(){return f},get _state(){return h},set _state(value){h=value},get _defaultValues(){return l},get _names(){return p},set _names(value){p=value},get _formState(){return c},set _formState(value){c=value},get _options(){return i},set _options(value){i={...i,...value}}},trigger,register,handleSubmit,watch:(e,t)=>isFunction(e)?v.values.subscribe({next:n=>e(_getWatch(void 0,t),n)}):_getWatch(e,t,!0),setValue,getValues,reset,resetField:(e,t={})=>{get(u,e)&&(isUndefined(t.defaultValue)?setValue(e,get(l,e)):(setValue(e,t.defaultValue),set(l,e,t.defaultValue)),t.keepTouched||unset(c.touchedFields,e),t.keepDirty||(unset(c.dirtyFields,e),c.isDirty=t.defaultValue?_getDirty(e,get(l,e)):_getDirty()),!t.keepError&&(unset(c.errors,e),g.isValid&&_updateValid()),v.state.next({...c}))},clearErrors:e=>{e&&convertToArrayPayload(e).forEach(e=>unset(c.errors,e)),v.state.next({errors:e?c.errors:{}})},unregister,setError,setFocus:(e,t={})=>{let n=get(u,e),i=n&&n._f;if(i){let e=i.refs?i.refs[0]:i.ref;e.focus&&(e.focus(),t.shouldSelect&&e.select())}},getFieldState}}(e,()=>u(e=>({...e}))),formState:c});let l=t.current.control;return l._options=e,!function(e){let t=i.useRef(e);t.current=e,i.useEffect(()=>{let n=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{n&&n.unsubscribe()}},[e.disabled])}({subject:l._subjects.state,next:e=>{shouldRenderFormState(e,l._proxyFormState,l._updateFormState,!0)&&u({...l._formState})}}),i.useEffect(()=>{e.values&&!deepEqual(e.values,n.current)?(l._reset(e.values,l._options.resetOptions),n.current=e.values):l._resetDefaultValues()},[e.values,l]),i.useEffect(()=>{l._state.mount||(l._updateValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),t.current.formState=getProxyFormState(c,l),t.current}},3986:function(e,t,n){"use strict";n.d(t,{m:function(){return d}});var i=/^\[(.+)\]$/;function getPart(e,t){var n=e;return t.split("-").forEach(function(e){n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)}),n}var o=/\s+/;function twJoin(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=function toValue(e){if("string"==typeof e)return e;for(var t,n="",i=0;i<e.length;i++)e[i]&&(t=toValue(e[i]))&&(n&&(n+=" "),n+=t);return n}(e))&&(i&&(i+=" "),i+=t);return i}function fromTheme(e){var themeGetter=function(t){return t[e]||[]};return themeGetter.isThemeGetter=!0,themeGetter}var a=/^\[(?:([a-z-]+):)?(.+)\]$/i,s=/^\d+\/\d+$/,c=new Set(["px","full","screen"]),u=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,l=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,f=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function isLength(e){return isNumber(e)||c.has(e)||s.test(e)||isArbitraryLength(e)}function isArbitraryLength(e){return getIsArbitraryValue(e,"length",isLengthOnly)}function isArbitrarySize(e){return getIsArbitraryValue(e,"size",isNever)}function isArbitraryPosition(e){return getIsArbitraryValue(e,"position",isNever)}function isArbitraryUrl(e){return getIsArbitraryValue(e,"url",isUrl)}function isArbitraryNumber(e){return getIsArbitraryValue(e,"number",isNumber)}function isNumber(e){return!Number.isNaN(Number(e))}function isPercent(e){return e.endsWith("%")&&isNumber(e.slice(0,-1))}function isInteger(e){return isIntegerOnly(e)||getIsArbitraryValue(e,"number",isIntegerOnly)}function isArbitraryValue(e){return a.test(e)}function isAny(){return!0}function isTshirtSize(e){return u.test(e)}function isArbitraryShadow(e){return getIsArbitraryValue(e,"",isShadow)}function getIsArbitraryValue(e,t,n){var i=a.exec(e);return!!i&&(i[1]?i[1]===t:n(i[2]))}function isLengthOnly(e){return l.test(e)}function isNever(){return!1}function isUrl(e){return e.startsWith("url(")}function isIntegerOnly(e){return Number.isInteger(Number(e))}function isShadow(e){return f.test(e)}var d=function(){for(var e,t,n,a=arguments.length,s=Array(a),c=0;c<a;c++)s[c]=arguments[c];var functionToCall=function(o){var a=s[0];return t=(e=function(e){var t,n,o,a,s,c,u,l,f,d,h;return{cache:function(e){if(e<1)return{get:function(){},set:function(){}};var t=0,n=new Map,i=new Map;function update(o,a){n.set(o,a),++t>e&&(t=0,i=n,n=new Map)}return{get:function(e){var t=n.get(e);return void 0!==t?t:void 0!==(t=i.get(e))?(update(e,t),t):void 0},set:function(e,t){n.has(e)?n.set(e,t):update(e,t)}}}(e.cacheSize),splitModifiers:(n=1===(t=e.separator||":").length,o=t[0],a=t.length,function(e){for(var i,s=[],c=0,u=0,l=0;l<e.length;l++){var f=e[l];if(0===c){if(f===o&&(n||e.slice(l,l+a)===t)){s.push(e.slice(u,l)),u=l+a;continue}if("/"===f){i=l;continue}}"["===f?c++:"]"===f&&c--}var d=0===s.length?e:e.substring(u),h=d.startsWith("!"),p=h?d.substring(1):d;return{modifiers:s,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:i&&i>u?i-u:void 0}}),...(l=e.theme,f=e.prefix,d={nextPart:new Map,validators:[]},(h=Object.entries(e.classGroups),f?h.map(function(e){return[e[0],e[1].map(function(e){return"string"==typeof e?f+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(function(e){return[f+e[0],e[1]]})):e})]}):h).forEach(function(e){var t=e[0];(function processClassesRecursively(e,t,n,i){e.forEach(function(e){if("string"==typeof e){(""===e?t:getPart(t,e)).classGroupId=n;return}if("function"==typeof e){if(e.isThemeGetter){processClassesRecursively(e(i),t,n,i);return}t.validators.push({validator:e,classGroupId:n});return}Object.entries(e).forEach(function(e){var o=e[0];processClassesRecursively(e[1],getPart(t,o),n,i)})})})(e[1],d,t,l)}),s=e.conflictingClassGroups,u=void 0===(c=e.conflictingClassGroupModifiers)?{}:c,{getClassGroupId:function(e){var t=e.split("-");return""===t[0]&&1!==t.length&&t.shift(),function getGroupRecursive(e,t){if(0===e.length)return t.classGroupId;var n=e[0],i=t.nextPart.get(n),o=i?getGroupRecursive(e.slice(1),i):void 0;if(o)return o;if(0!==t.validators.length){var a=e.join("-");return t.validators.find(function(e){return(0,e.validator)(a)})?.classGroupId}}(t,d)||function(e){if(i.test(e)){var t=i.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}}(e)},getConflictingClassGroupIds:function(e,t){var n=s[e]||[];return t&&u[e]?[].concat(n,u[e]):n}})}}(s.slice(1).reduce(function(e,t){return t(e)},a()))).cache.get,n=e.cache.set,functionToCall=tailwindMerge,tailwindMerge(o)};function tailwindMerge(i){var a,s,c,u,l,f=t(i);if(f)return f;var d=(s=(a=e).splitModifiers,c=a.getClassGroupId,u=a.getConflictingClassGroupIds,l=new Set,i.trim().split(o).map(function(e){var t=s(e),n=t.modifiers,i=t.hasImportantModifier,o=t.baseClassName,a=t.maybePostfixModifierPosition,u=c(a?o.substring(0,a):o),l=!!a;if(!u){if(!a||!(u=c(o)))return{isTailwindClass:!1,originalClassName:e};l=!1}var f=(function(e){if(e.length<=1)return e;var t=[],n=[];return e.forEach(function(e){"["===e[0]?(t.push.apply(t,n.sort().concat([e])),n=[]):n.push(e)}),t.push.apply(t,n.sort()),t})(n).join(":");return{isTailwindClass:!0,modifierId:i?f+"!":f,classGroupId:u,originalClassName:e,hasPostfixModifier:l}}).reverse().filter(function(e){if(!e.isTailwindClass)return!0;var t=e.modifierId,n=e.classGroupId,i=e.hasPostfixModifier,o=t+n;return!l.has(o)&&(l.add(o),u(n,i).forEach(function(e){return l.add(t+e)}),!0)}).reverse().map(function(e){return e.originalClassName}).join(" "));return n(i,d),d}return function(){return functionToCall(twJoin.apply(null,arguments))}}(function(){var e=fromTheme("colors"),t=fromTheme("spacing"),n=fromTheme("blur"),i=fromTheme("brightness"),o=fromTheme("borderColor"),a=fromTheme("borderRadius"),s=fromTheme("borderSpacing"),c=fromTheme("borderWidth"),u=fromTheme("contrast"),l=fromTheme("grayscale"),f=fromTheme("hueRotate"),d=fromTheme("invert"),h=fromTheme("gap"),p=fromTheme("gradientColorStops"),m=fromTheme("gradientColorStopPositions"),g=fromTheme("inset"),v=fromTheme("margin"),b=fromTheme("opacity"),y=fromTheme("padding"),_=fromTheme("saturate"),w=fromTheme("scale"),x=fromTheme("sepia"),F=fromTheme("skew"),P=fromTheme("space"),A=fromTheme("translate"),getOverscroll=function(){return["auto","contain","none"]},getOverflow=function(){return["auto","hidden","clip","visible","scroll"]},getSpacingWithAutoAndArbitrary=function(){return["auto",isArbitraryValue,t]},getSpacingWithArbitrary=function(){return[isArbitraryValue,t]},getLengthWithEmpty=function(){return["",isLength]},getNumberWithAutoAndArbitrary=function(){return["auto",isNumber,isArbitraryValue]},getPositions=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},getLineStyles=function(){return["solid","dashed","dotted","double","none"]},getBlendModes=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},getAlign=function(){return["start","end","center","between","around","evenly","stretch"]},getZeroAndEmpty=function(){return["","0",isArbitraryValue]},getBreaks=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},getNumber=function(){return[isNumber,isArbitraryNumber]},getNumberAndArbitrary=function(){return[isNumber,isArbitraryValue]};return{cacheSize:500,theme:{colors:[isAny],spacing:[isLength],blur:["none","",isTshirtSize,isArbitraryValue],brightness:getNumber(),borderColor:[e],borderRadius:["none","","full",isTshirtSize,isArbitraryValue],borderSpacing:getSpacingWithArbitrary(),borderWidth:getLengthWithEmpty(),contrast:getNumber(),grayscale:getZeroAndEmpty(),hueRotate:getNumberAndArbitrary(),invert:getZeroAndEmpty(),gap:getSpacingWithArbitrary(),gradientColorStops:[e],gradientColorStopPositions:[isPercent,isArbitraryLength],inset:getSpacingWithAutoAndArbitrary(),margin:getSpacingWithAutoAndArbitrary(),opacity:getNumber(),padding:getSpacingWithArbitrary(),saturate:getNumber(),scale:getNumber(),sepia:getZeroAndEmpty(),skew:getNumberAndArbitrary(),space:getSpacingWithArbitrary(),translate:getSpacingWithArbitrary()},classGroups:{aspect:[{aspect:["auto","square","video",isArbitraryValue]}],container:["container"],columns:[{columns:[isTshirtSize]}],"break-after":[{"break-after":getBreaks()}],"break-before":[{"break-before":getBreaks()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(getPositions(),[isArbitraryValue])}],overflow:[{overflow:getOverflow()}],"overflow-x":[{"overflow-x":getOverflow()}],"overflow-y":[{"overflow-y":getOverflow()}],overscroll:[{overscroll:getOverscroll()}],"overscroll-x":[{"overscroll-x":getOverscroll()}],"overscroll-y":[{"overscroll-y":getOverscroll()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",isInteger]}],basis:[{basis:getSpacingWithAutoAndArbitrary()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",isArbitraryValue]}],grow:[{grow:getZeroAndEmpty()}],shrink:[{shrink:getZeroAndEmpty()}],order:[{order:["first","last","none",isInteger]}],"grid-cols":[{"grid-cols":[isAny]}],"col-start-end":[{col:["auto",{span:["full",isInteger]},isArbitraryValue]}],"col-start":[{"col-start":getNumberWithAutoAndArbitrary()}],"col-end":[{"col-end":getNumberWithAutoAndArbitrary()}],"grid-rows":[{"grid-rows":[isAny]}],"row-start-end":[{row:["auto",{span:[isInteger]},isArbitraryValue]}],"row-start":[{"row-start":getNumberWithAutoAndArbitrary()}],"row-end":[{"row-end":getNumberWithAutoAndArbitrary()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",isArbitraryValue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",isArbitraryValue]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal"].concat(getAlign())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(getAlign(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(getAlign(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",isArbitraryValue,t]}],"min-w":[{"min-w":["min","max","fit",isArbitraryValue,isLength]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[isTshirtSize]},isTshirtSize,isArbitraryValue]}],h:[{h:[isArbitraryValue,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",isArbitraryValue,isLength]}],"max-h":[{"max-h":[isArbitraryValue,t,"min","max","fit"]}],"font-size":[{text:["base",isTshirtSize,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",isArbitraryNumber]}],"font-family":[{font:[isAny]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",isArbitraryValue]}],"line-clamp":[{"line-clamp":["none",isNumber,isArbitraryNumber]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",isArbitraryValue,isLength]}],"list-image":[{"list-image":["none",isArbitraryValue]}],"list-style-type":[{list:["none","disc","decimal",isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(getLineStyles(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",isLength]}],"underline-offset":[{"underline-offset":["auto",isArbitraryValue,isLength]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:getSpacingWithArbitrary()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(getPositions(),[isArbitraryPosition])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",isArbitrarySize]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},isArbitraryUrl]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[].concat(getLineStyles(),["hidden"])}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:getLineStyles()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:[""].concat(getLineStyles())}],"outline-offset":[{"outline-offset":[isArbitraryValue,isLength]}],"outline-w":[{outline:[isLength]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:getLengthWithEmpty()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[isLength]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",isTshirtSize,isArbitraryShadow]}],"shadow-color":[{shadow:[isAny]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":getBlendModes()}],"bg-blend":[{"bg-blend":getBlendModes()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[i]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",isTshirtSize,isArbitraryValue]}],grayscale:[{grayscale:[l]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[d]}],saturate:[{saturate:[_]}],sepia:[{sepia:[x]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[l]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[x]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",isArbitraryValue]}],duration:[{duration:getNumberAndArbitrary()}],ease:[{ease:["linear","in","out","in-out",isArbitraryValue]}],delay:[{delay:getNumberAndArbitrary()}],animate:[{animate:["none","spin","ping","pulse","bounce",isArbitraryValue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[isInteger,isArbitraryValue]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[F]}],"skew-y":[{"skew-y":[F]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",isArbitraryValue]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryValue]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":getSpacingWithArbitrary()}],"scroll-mx":[{"scroll-mx":getSpacingWithArbitrary()}],"scroll-my":[{"scroll-my":getSpacingWithArbitrary()}],"scroll-ms":[{"scroll-ms":getSpacingWithArbitrary()}],"scroll-me":[{"scroll-me":getSpacingWithArbitrary()}],"scroll-mt":[{"scroll-mt":getSpacingWithArbitrary()}],"scroll-mr":[{"scroll-mr":getSpacingWithArbitrary()}],"scroll-mb":[{"scroll-mb":getSpacingWithArbitrary()}],"scroll-ml":[{"scroll-ml":getSpacingWithArbitrary()}],"scroll-p":[{"scroll-p":getSpacingWithArbitrary()}],"scroll-px":[{"scroll-px":getSpacingWithArbitrary()}],"scroll-py":[{"scroll-py":getSpacingWithArbitrary()}],"scroll-ps":[{"scroll-ps":getSpacingWithArbitrary()}],"scroll-pe":[{"scroll-pe":getSpacingWithArbitrary()}],"scroll-pt":[{"scroll-pt":getSpacingWithArbitrary()}],"scroll-pr":[{"scroll-pr":getSpacingWithArbitrary()}],"scroll-pb":[{"scroll-pb":getSpacingWithArbitrary()}],"scroll-pl":[{"scroll-pl":getSpacingWithArbitrary()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryValue]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[isLength,isArbitraryNumber]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}})}}]);